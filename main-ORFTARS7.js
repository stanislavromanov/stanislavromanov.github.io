var bP=Object.create;var hd=Object.defineProperty,wP=Object.defineProperties,SP=Object.getOwnPropertyDescriptor,EP=Object.getOwnPropertyDescriptors,MP=Object.getOwnPropertyNames,fd=Object.getOwnPropertySymbols,TP=Object.getPrototypeOf,eg=Object.prototype.hasOwnProperty,fw=Object.prototype.propertyIsEnumerable;var na=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),AP=n=>{throw TypeError(n)};var dw=(n,e,t)=>e in n?hd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ae=(n,e)=>{for(var t in e||={})eg.call(e,t)&&dw(n,t,e[t]);if(fd)for(var t of fd(e))fw.call(e,t)&&dw(n,t,e[t]);return n},Dt=(n,e)=>wP(n,EP(e));var hw=(n,e)=>{var t={};for(var r in n)eg.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fd)for(var r of fd(n))e.indexOf(r)<0&&fw.call(n,r)&&(t[r]=n[r]);return t};var je=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),CP=(n,e)=>{for(var t in e)hd(n,t,{get:e[t],enumerable:!0})},DP=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MP(e))!eg.call(n,i)&&i!==t&&hd(n,i,{get:()=>e[i],enumerable:!(r=SP(e,i))||r.enumerable});return n};var as=(n,e,t)=>(t=n!=null?bP(TP(n)):{},DP(e||!n||!n.__esModule?hd(t,"default",{value:n,enumerable:!0}):t,n));var xe=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())}),qs=function(n,e){this[0]=n,this[1]=e},tg=(n,e,t)=>{var r=(o,a,c,l)=>{try{var u=t[o](a),d=(a=u.value)instanceof qs,f=u.done;Promise.resolve(d?a[0]:a).then(h=>d?r(o==="return"?o:"next",a[1]?{done:h.done,value:h.value}:h,c,l):c({value:h,done:f})).catch(h=>r("throw",h,c,l))}catch(h){l(h)}},i=o=>s[o]=a=>new Promise((c,l)=>r(o,a,c,l)),s={};return t=t.apply(n,e),s[na("asyncIterator")]=()=>s,i("next"),i("throw"),i("return"),s},ng=n=>{var e=n[na("asyncIterator")],t=!1,r,i={};return e==null?(e=n[na("iterator")](),r=s=>i[s]=o=>e[s](o)):(e=e.call(n),r=s=>i[s]=o=>{if(t){if(t=!1,s==="throw")throw o;return o}return t=!0,{done:!1,value:new qs(new Promise(a=>{var c=e[s](o);c instanceof Object||AP("Object expected"),a(c)}),1)}}),i[na("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=s=>{throw s},"return"in e&&r("return"),i},pw=(n,e,t)=>(e=n[na("asyncIterator")])?e.call(n):(n=n[na("iterator")](),e={},t=(r,i)=>(i=n[r])&&(e[r]=s=>new Promise((o,a,c)=>(s=i.call(n,s),c=s.done,Promise.resolve(s.value).then(l=>o({value:l,done:c}),a)))),t("next"),t("return"),e);var lD=je((Yte,cD)=>{"use strict";cD.exports=Error});var dD=je((Zte,uD)=>{"use strict";uD.exports=EvalError});var hD=je((Kte,fD)=>{"use strict";fD.exports=RangeError});var mD=je((Jte,pD)=>{"use strict";pD.exports=ReferenceError});var i0=je((Qte,gD)=>{"use strict";gD.exports=SyntaxError});var ec=je((ene,yD)=>{"use strict";yD.exports=TypeError});var _D=je((tne,vD)=>{"use strict";vD.exports=URIError});var bD=je((nne,xD)=>{"use strict";xD.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var ED=je((rne,SD)=>{"use strict";var wD=typeof Symbol<"u"&&Symbol,eH=bD();SD.exports=function(){return typeof wD!="function"||typeof Symbol!="function"||typeof wD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:eH()}});var TD=je((ine,MD)=>{"use strict";var s0={__proto__:null,foo:{}},tH=Object;MD.exports=function(){return{__proto__:s0}.foo===s0.foo&&!(s0 instanceof tH)}});var DD=je((sne,CD)=>{"use strict";var nH="Function.prototype.bind called on incompatible ",rH=Object.prototype.toString,iH=Math.max,sH="[object Function]",AD=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<t.length;s+=1)r[s+e.length]=t[s];return r},oH=function(e,t){for(var r=[],i=t||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},aH=function(n,e){for(var t="",r=0;r<n.length;r+=1)t+=n[r],r+1<n.length&&(t+=e);return t};CD.exports=function(e){var t=this;if(typeof t!="function"||rH.apply(t)!==sH)throw new TypeError(nH+t);for(var r=oH(arguments,1),i,s=function(){if(this instanceof i){var u=t.apply(this,AD(r,arguments));return Object(u)===u?u:this}return t.apply(e,AD(r,arguments))},o=iH(0,t.length-r.length),a=[],c=0;c<o;c++)a[c]="$"+c;if(i=Function("binder","return function ("+aH(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i}});var zh=je((one,ID)=>{"use strict";var cH=DD();ID.exports=Function.prototype.bind||cH});var ND=je((ane,RD)=>{"use strict";var lH=Function.prototype.call,uH=Object.prototype.hasOwnProperty,dH=zh();RD.exports=dH.call(lH,uH)});var _o=je((cne,kD)=>{"use strict";var at,fH=lD(),hH=dD(),pH=hD(),mH=mD(),ic=i0(),rc=ec(),gH=_D(),FD=Function,o0=function(n){try{return FD('"use strict"; return ('+n+").constructor;")()}catch{}},yo=Object.getOwnPropertyDescriptor;if(yo)try{yo({},"")}catch{yo=null}var a0=function(){throw new rc},yH=yo?function(){try{return arguments.callee,a0}catch{try{return yo(arguments,"callee").get}catch{return a0}}}():a0,tc=ED()(),vH=TD()(),dn=Object.getPrototypeOf||(vH?function(n){return n.__proto__}:null),nc={},_H=typeof Uint8Array>"u"||!dn?at:dn(Uint8Array),vo={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?at:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?at:ArrayBuffer,"%ArrayIteratorPrototype%":tc&&dn?dn([][Symbol.iterator]()):at,"%AsyncFromSyncIteratorPrototype%":at,"%AsyncFunction%":nc,"%AsyncGenerator%":nc,"%AsyncGeneratorFunction%":nc,"%AsyncIteratorPrototype%":nc,"%Atomics%":typeof Atomics>"u"?at:Atomics,"%BigInt%":typeof BigInt>"u"?at:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?at:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?at:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?at:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":fH,"%eval%":eval,"%EvalError%":hH,"%Float32Array%":typeof Float32Array>"u"?at:Float32Array,"%Float64Array%":typeof Float64Array>"u"?at:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?at:FinalizationRegistry,"%Function%":FD,"%GeneratorFunction%":nc,"%Int8Array%":typeof Int8Array>"u"?at:Int8Array,"%Int16Array%":typeof Int16Array>"u"?at:Int16Array,"%Int32Array%":typeof Int32Array>"u"?at:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tc&&dn?dn(dn([][Symbol.iterator]())):at,"%JSON%":typeof JSON=="object"?JSON:at,"%Map%":typeof Map>"u"?at:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tc||!dn?at:dn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?at:Promise,"%Proxy%":typeof Proxy>"u"?at:Proxy,"%RangeError%":pH,"%ReferenceError%":mH,"%Reflect%":typeof Reflect>"u"?at:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?at:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tc||!dn?at:dn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?at:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tc&&dn?dn(""[Symbol.iterator]()):at,"%Symbol%":tc?Symbol:at,"%SyntaxError%":ic,"%ThrowTypeError%":yH,"%TypedArray%":_H,"%TypeError%":rc,"%Uint8Array%":typeof Uint8Array>"u"?at:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?at:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?at:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?at:Uint32Array,"%URIError%":gH,"%WeakMap%":typeof WeakMap>"u"?at:WeakMap,"%WeakRef%":typeof WeakRef>"u"?at:WeakRef,"%WeakSet%":typeof WeakSet>"u"?at:WeakSet};if(dn)try{null.error}catch(n){PD=dn(dn(n)),vo["%Error.prototype%"]=PD}var PD,xH=function n(e){var t;if(e==="%AsyncFunction%")t=o0("async function () {}");else if(e==="%GeneratorFunction%")t=o0("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=o0("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&dn&&(t=dn(i.prototype))}return vo[e]=t,t},OD={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ru=zh(),Hh=ND(),bH=ru.call(Function.call,Array.prototype.concat),wH=ru.call(Function.apply,Array.prototype.splice),LD=ru.call(Function.call,String.prototype.replace),Gh=ru.call(Function.call,String.prototype.slice),SH=ru.call(Function.call,RegExp.prototype.exec),EH=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,MH=/\\(\\)?/g,TH=function(e){var t=Gh(e,0,1),r=Gh(e,-1);if(t==="%"&&r!=="%")throw new ic("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new ic("invalid intrinsic syntax, expected opening `%`");var i=[];return LD(e,EH,function(s,o,a,c){i[i.length]=a?LD(c,MH,"$1"):o||s}),i},AH=function(e,t){var r=e,i;if(Hh(OD,r)&&(i=OD[r],r="%"+i[0]+"%"),Hh(vo,r)){var s=vo[r];if(s===nc&&(s=xH(r)),typeof s>"u"&&!t)throw new rc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new ic("intrinsic "+e+" does not exist!")};kD.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new rc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new rc('"allowMissing" argument must be a boolean');if(SH(/^%?[^%]*%?$/,e)===null)throw new ic("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=TH(e),i=r.length>0?r[0]:"",s=AH("%"+i+"%",t),o=s.name,a=s.value,c=!1,l=s.alias;l&&(i=l[0],wH(r,bH([0,1],l)));for(var u=1,d=!0;u<r.length;u+=1){var f=r[u],h=Gh(f,0,1),g=Gh(f,-1);if((h==='"'||h==="'"||h==="`"||g==='"'||g==="'"||g==="`")&&h!==g)throw new ic("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(c=!0),i+="."+f,o="%"+i+"%",Hh(vo,o))a=vo[o];else if(a!=null){if(!(f in a)){if(!t)throw new rc("base intrinsic for "+e+" exists, but the property is not available.");return}if(yo&&u+1>=r.length){var y=yo(a,f);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[f]}else d=Hh(a,f),a=a[f];d&&!c&&(vo[o]=a)}}return a}});var Wh=je((lne,UD)=>{"use strict";var CH=_o(),jh=CH("%Object.defineProperty%",!0)||!1;if(jh)try{jh({},"a",{value:1})}catch{jh=!1}UD.exports=jh});var c0=je((une,BD)=>{"use strict";var DH=_o(),$h=DH("%Object.getOwnPropertyDescriptor%",!0);if($h)try{$h([],"length")}catch{$h=null}BD.exports=$h});var GD=je((dne,HD)=>{"use strict";var VD=Wh(),IH=i0(),sc=ec(),zD=c0();HD.exports=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new sc("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new sc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new sc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new sc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new sc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new sc("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!zD&&zD(e,t);if(VD)VD(e,t,{configurable:o===null&&c?c.configurable:!o,enumerable:i===null&&c?c.enumerable:!i,value:r,writable:s===null&&c?c.writable:!s});else if(a||!i&&!s&&!o)e[t]=r;else throw new IH("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var $D=je((fne,WD)=>{"use strict";var l0=Wh(),jD=function(){return!!l0};jD.hasArrayLengthDefineBug=function(){if(!l0)return null;try{return l0([],"length",{value:1}).length!==1}catch{return!0}};WD.exports=jD});var KD=je((hne,ZD)=>{"use strict";var RH=_o(),qD=GD(),NH=$D()(),XD=c0(),YD=ec(),PH=RH("%Math.floor%");ZD.exports=function(e,t){if(typeof e!="function")throw new YD("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||PH(t)!==t)throw new YD("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&XD){var o=XD(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(NH?qD(e,"length",t,!0,!0):qD(e,"length",t)),e}});var rI=je((pne,qh)=>{"use strict";var u0=zh(),Xh=_o(),OH=KD(),LH=ec(),eI=Xh("%Function.prototype.apply%"),tI=Xh("%Function.prototype.call%"),nI=Xh("%Reflect.apply%",!0)||u0.call(tI,eI),JD=Wh(),FH=Xh("%Math.max%");qh.exports=function(e){if(typeof e!="function")throw new LH("a function is required");var t=nI(u0,tI,arguments);return OH(t,1+FH(0,e.length-(arguments.length-1)),!0)};var QD=function(){return nI(u0,eI,arguments)};JD?JD(qh.exports,"apply",{value:QD}):qh.exports.apply=QD});var aI=je((mne,oI)=>{"use strict";var iI=_o(),sI=rI(),kH=sI(iI("String.prototype.indexOf"));oI.exports=function(e,t){var r=iI(e,!!t);return typeof r=="function"&&kH(e,".prototype.")>-1?sI(r):r}});var cI=je(()=>{});var CI=je((vne,AI)=>{var x0=typeof Map=="function"&&Map.prototype,d0=Object.getOwnPropertyDescriptor&&x0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Zh=x0&&d0&&typeof d0.get=="function"?d0.get:null,lI=x0&&Map.prototype.forEach,b0=typeof Set=="function"&&Set.prototype,f0=Object.getOwnPropertyDescriptor&&b0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Kh=b0&&f0&&typeof f0.get=="function"?f0.get:null,uI=b0&&Set.prototype.forEach,UH=typeof WeakMap=="function"&&WeakMap.prototype,su=UH?WeakMap.prototype.has:null,BH=typeof WeakSet=="function"&&WeakSet.prototype,ou=BH?WeakSet.prototype.has:null,VH=typeof WeakRef=="function"&&WeakRef.prototype,dI=VH?WeakRef.prototype.deref:null,zH=Boolean.prototype.valueOf,HH=Object.prototype.toString,GH=Function.prototype.toString,jH=String.prototype.match,w0=String.prototype.slice,Ds=String.prototype.replace,WH=String.prototype.toUpperCase,fI=String.prototype.toLowerCase,bI=RegExp.prototype.test,hI=Array.prototype.concat,ui=Array.prototype.join,$H=Array.prototype.slice,pI=Math.floor,m0=typeof BigInt=="function"?BigInt.prototype.valueOf:null,h0=Object.getOwnPropertySymbols,g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,oc=typeof Symbol=="function"&&typeof Symbol.iterator=="object",wn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===oc||!0)?Symbol.toStringTag:null,wI=Object.prototype.propertyIsEnumerable,mI=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function gI(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||bI.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-pI(-n):pI(n);if(r!==n){var i=String(r),s=w0.call(e,i.length+1);return Ds.call(i,t,"$&_")+"."+Ds.call(Ds.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ds.call(e,t,"$&_")}var y0=cI(),yI=y0.custom,vI=EI(yI)?yI:null;AI.exports=function n(e,t,r,i){var s=t||{};if(Cs(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Cs(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Cs(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Cs(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Cs(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return TI(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?gI(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return a?gI(e,l):l}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return v0(e)?"[Array]":"[Object]";var d=u4(s,r);if(typeof i>"u")i=[];else if(MI(i,e)>=0)return"[Circular]";function f(F,V,$){if(V&&(i=$H.call(i),i.push(V)),$){var q={depth:s.depth};return Cs(s,"quoteStyle")&&(q.quoteStyle=s.quoteStyle),n(F,q,r+1,i)}return n(F,s,r+1,i)}if(typeof e=="function"&&!_I(e)){var h=t4(e),g=Yh(e,f);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(g.length>0?" { "+ui.call(g,", ")+" }":"")}if(EI(e)){var y=oc?Ds.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):g0.call(e);return typeof e=="object"&&!oc?iu(y):y}if(a4(e)){for(var m="<"+fI.call(String(e.nodeName)),p=e.attributes||[],E=0;E<p.length;E++)m+=" "+p[E].name+"="+SI(qH(p[E].value),"double",s);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+fI.call(String(e.nodeName))+">",m}if(v0(e)){if(e.length===0)return"[]";var _=Yh(e,f);return d&&!l4(_)?"["+_0(_,d)+"]":"[ "+ui.call(_,", ")+" ]"}if(YH(e)){var x=Yh(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!wI.call(e,"cause")?"{ ["+String(e)+"] "+ui.call(hI.call("[cause]: "+f(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ui.call(x,", ")+" }"}if(typeof e=="object"&&o){if(vI&&typeof e[vI]=="function"&&y0)return y0(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(n4(e)){var C=[];return lI&&lI.call(e,function(F,V){C.push(f(V,e,!0)+" => "+f(F,e))}),xI("Map",Zh.call(e),C,d)}if(s4(e)){var T=[];return uI&&uI.call(e,function(F){T.push(f(F,e))}),xI("Set",Kh.call(e),T,d)}if(r4(e))return p0("WeakMap");if(o4(e))return p0("WeakSet");if(i4(e))return p0("WeakRef");if(KH(e))return iu(f(Number(e)));if(QH(e))return iu(f(m0.call(e)));if(JH(e))return iu(zH.call(e));if(ZH(e))return iu(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!XH(e)&&!_I(e)){var D=Yh(e,f),I=mI?mI(e)===Object.prototype:e instanceof Object||e.constructor===Object,S=e instanceof Object?"":"null prototype",b=!I&&wn&&Object(e)===e&&wn in e?w0.call(Is(e),8,-1):S?"Object":"",A=I||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",j=A+(b||S?"["+ui.call(hI.call([],b||[],S||[]),": ")+"] ":"");return D.length===0?j+"{}":d?j+"{"+_0(D,d)+"}":j+"{ "+ui.call(D,", ")+" }"}return String(e)};function SI(n,e,t){var r=(t.quoteStyle||e)==="double"?'"':"'";return r+n+r}function qH(n){return Ds.call(String(n),/"/g,"&quot;")}function v0(n){return Is(n)==="[object Array]"&&(!wn||!(typeof n=="object"&&wn in n))}function XH(n){return Is(n)==="[object Date]"&&(!wn||!(typeof n=="object"&&wn in n))}function _I(n){return Is(n)==="[object RegExp]"&&(!wn||!(typeof n=="object"&&wn in n))}function YH(n){return Is(n)==="[object Error]"&&(!wn||!(typeof n=="object"&&wn in n))}function ZH(n){return Is(n)==="[object String]"&&(!wn||!(typeof n=="object"&&wn in n))}function KH(n){return Is(n)==="[object Number]"&&(!wn||!(typeof n=="object"&&wn in n))}function JH(n){return Is(n)==="[object Boolean]"&&(!wn||!(typeof n=="object"&&wn in n))}function EI(n){if(oc)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!g0)return!1;try{return g0.call(n),!0}catch{}return!1}function QH(n){if(!n||typeof n!="object"||!m0)return!1;try{return m0.call(n),!0}catch{}return!1}var e4=Object.prototype.hasOwnProperty||function(n){return n in this};function Cs(n,e){return e4.call(n,e)}function Is(n){return HH.call(n)}function t4(n){if(n.name)return n.name;var e=jH.call(GH.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function MI(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}function n4(n){if(!Zh||!n||typeof n!="object")return!1;try{Zh.call(n);try{Kh.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function r4(n){if(!su||!n||typeof n!="object")return!1;try{su.call(n,su);try{ou.call(n,ou)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function i4(n){if(!dI||!n||typeof n!="object")return!1;try{return dI.call(n),!0}catch{}return!1}function s4(n){if(!Kh||!n||typeof n!="object")return!1;try{Kh.call(n);try{Zh.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function o4(n){if(!ou||!n||typeof n!="object")return!1;try{ou.call(n,ou);try{su.call(n,su)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function a4(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function TI(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return TI(w0.call(n,0,e.maxStringLength),e)+r}var i=Ds.call(Ds.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,c4);return SI(i,"single",e)}function c4(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+WH.call(e.toString(16))}function iu(n){return"Object("+n+")"}function p0(n){return n+" { ? }"}function xI(n,e,t,r){var i=r?_0(t,r):ui.call(t,", ");return n+" ("+e+") {"+i+"}"}function l4(n){for(var e=0;e<n.length;e++)if(MI(n[e],`
`)>=0)return!1;return!0}function u4(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=ui.call(Array(n.indent+1)," ");else return null;return{base:t,prev:ui.call(Array(e+1),t)}}function _0(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+ui.call(n,","+t)+`
`+e.prev}function Yh(n,e){var t=v0(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=Cs(n,i)?e(n[i],n):""}var s=typeof h0=="function"?h0(n):[],o;if(oc){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in n)Cs(n,c)&&(t&&String(Number(c))===c&&c<n.length||oc&&o["$"+c]instanceof Symbol||(bI.call(/[^\w$]/,c)?r.push(e(c,n)+": "+e(n[c],n)):r.push(c+": "+e(n[c],n))));if(typeof h0=="function")for(var l=0;l<s.length;l++)wI.call(n,s[l])&&r.push("["+e(s[l])+"]: "+e(n[s[l]],n));return r}});var RI=je((_ne,II)=>{"use strict";var DI=_o(),ac=aI(),d4=CI(),f4=ec(),Jh=DI("%WeakMap%",!0),Qh=DI("%Map%",!0),h4=ac("WeakMap.prototype.get",!0),p4=ac("WeakMap.prototype.set",!0),m4=ac("WeakMap.prototype.has",!0),g4=ac("Map.prototype.get",!0),y4=ac("Map.prototype.set",!0),v4=ac("Map.prototype.has",!0),S0=function(n,e){for(var t=n,r;(r=t.next)!==null;t=r)if(r.key===e)return t.next=r.next,r.next=n.next,n.next=r,r},_4=function(n,e){var t=S0(n,e);return t&&t.value},x4=function(n,e,t){var r=S0(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},b4=function(n,e){return!!S0(n,e)};II.exports=function(){var e,t,r,i={assert:function(s){if(!i.has(s))throw new f4("Side channel does not contain "+d4(s))},get:function(s){if(Jh&&s&&(typeof s=="object"||typeof s=="function")){if(e)return h4(e,s)}else if(Qh){if(t)return g4(t,s)}else if(r)return _4(r,s)},has:function(s){if(Jh&&s&&(typeof s=="object"||typeof s=="function")){if(e)return m4(e,s)}else if(Qh){if(t)return v4(t,s)}else if(r)return b4(r,s);return!1},set:function(s,o){Jh&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Jh),p4(e,s,o)):Qh?(t||(t=new Qh),y4(t,s,o)):(r||(r={key:{},next:null}),x4(r,s,o))}};return i}});var ep=je((xne,NI)=>{"use strict";var w4=String.prototype.replace,S4=/%20/g,E0={RFC1738:"RFC1738",RFC3986:"RFC3986"};NI.exports={default:E0.RFC3986,formatters:{RFC1738:function(n){return w4.call(n,S4,"+")},RFC3986:function(n){return String(n)}},RFC1738:E0.RFC1738,RFC3986:E0.RFC3986}});var A0=je((bne,OI)=>{"use strict";var E4=ep(),M0=Object.prototype.hasOwnProperty,xo=Array.isArray,di=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),M4=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(xo(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);t.obj[t.prop]=i}}},PI=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},T4=function n(e,t,r){if(!t)return e;if(typeof t!="object"){if(xo(e))e.push(t);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!M0.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return xo(e)&&!xo(t)&&(i=PI(e,r)),xo(e)&&xo(t)?(t.forEach(function(s,o){if(M0.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=n(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return M0.call(s,o)?s[o]=n(s[o],a,r):s[o]=a,s},i)},A4=function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},C4=function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},T0=1024,D4=function(e,t,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;c+=T0){for(var l=o.length>=T0?o.slice(c,c+T0):o,u=[],d=0;d<l.length;++d){var f=l.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===E4.RFC1738&&(f===40||f===41)){u[u.length]=l.charAt(d);continue}if(f<128){u[u.length]=di[f];continue}if(f<2048){u[u.length]=di[192|f>>6]+di[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=di[224|f>>12]+di[128|f>>6&63]+di[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=di[240|f>>18]+di[128|f>>12&63]+di[128|f>>6&63]+di[128|f&63]}a+=u.join("")}return a},I4=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var l=a[c],u=o[l];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(t.push({obj:o,prop:l}),r.push(u))}return M4(t),e},R4=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},N4=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},P4=function(e,t){return[].concat(e,t)},O4=function(e,t){if(xo(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)};OI.exports={arrayToObject:PI,assign:A4,combine:P4,compact:I4,decode:C4,encode:D4,isBuffer:N4,isRegExp:R4,maybeMap:O4,merge:T4}});var VI=je((wne,BI)=>{"use strict";var FI=RI(),tp=A0(),au=ep(),L4=Object.prototype.hasOwnProperty,kI={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},fi=Array.isArray,F4=Array.prototype.push,UI=function(n,e){F4.apply(n,fi(e)?e:[e])},k4=Date.prototype.toISOString,LI=au.default,nn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:tp.encode,encodeValuesOnly:!1,format:LI,formatter:au.formatters[LI],indices:!1,serializeDate:function(e){return k4.call(e)},skipNulls:!1,strictNullHandling:!1},U4=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},C0={},B4=function n(e,t,r,i,s,o,a,c,l,u,d,f,h,g,y,m,p,E){for(var _=e,x=E,C=0,T=!1;(x=x.get(C0))!==void 0&&!T;){var D=x.get(e);if(C+=1,typeof D<"u"){if(D===C)throw new RangeError("Cyclic object value");T=!0}typeof x.get(C0)>"u"&&(C=0)}if(typeof u=="function"?_=u(t,_):_ instanceof Date?_=h(_):r==="comma"&&fi(_)&&(_=tp.maybeMap(_,function(he){return he instanceof Date?h(he):he})),_===null){if(o)return l&&!m?l(t,nn.encoder,p,"key",g):t;_=""}if(U4(_)||tp.isBuffer(_)){if(l){var I=m?t:l(t,nn.encoder,p,"key",g);return[y(I)+"="+y(l(_,nn.encoder,p,"value",g))]}return[y(t)+"="+y(String(_))]}var S=[];if(typeof _>"u")return S;var b;if(r==="comma"&&fi(_))m&&l&&(_=tp.maybeMap(_,l)),b=[{value:_.length>0?_.join(",")||null:void 0}];else if(fi(u))b=u;else{var A=Object.keys(_);b=d?A.sort(d):A}var j=c?t.replace(/\./g,"%2E"):t,F=i&&fi(_)&&_.length===1?j+"[]":j;if(s&&fi(_)&&_.length===0)return F+"[]";for(var V=0;V<b.length;++V){var $=b[V],q=typeof $=="object"&&typeof $.value<"u"?$.value:_[$];if(!(a&&q===null)){var te=f&&c?$.replace(/\./g,"%2E"):$,W=fi(_)?typeof r=="function"?r(F,te):F:F+(f?"."+te:"["+te+"]");E.set(e,C);var se=FI();se.set(C0,E),UI(S,n(q,W,r,i,s,o,a,c,r==="comma"&&m&&fi(_)?null:l,u,d,f,h,g,y,m,p,se))}}return S},V4=function(e){if(!e)return nn;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||nn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=au.default;if(typeof e.format<"u"){if(!L4.call(au.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=au.formatters[r],s=nn.filter;(typeof e.filter=="function"||fi(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in kI?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=nn.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:nn.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:nn.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:nn.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:nn.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?nn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:nn.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:nn.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:nn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:nn.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:nn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:nn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:nn.strictNullHandling}};BI.exports=function(n,e){var t=n,r=V4(e),i,s;typeof r.filter=="function"?(s=r.filter,t=s("",t)):fi(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a=kI[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var l=FI(),u=0;u<i.length;++u){var d=i[u];r.skipNulls&&t[d]===null||UI(o,B4(t[d],d,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}var f=o.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}});var GI=je((Sne,HI)=>{"use strict";var cc=A0(),D0=Object.prototype.hasOwnProperty,z4=Array.isArray,Ht={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:cc.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},H4=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},zI=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},G4="utf8=%26%2310003%3B",j4="utf8=%E2%9C%93",W4=function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,c,l=t.charset;if(t.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===j4?l="utf-8":o[c]===G4&&(l="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var u=o[c],d=u.indexOf("]="),f=d===-1?u.indexOf("="):d+1,h,g;f===-1?(h=t.decoder(u,Ht.decoder,l,"key"),g=t.strictNullHandling?null:""):(h=t.decoder(u.slice(0,f),Ht.decoder,l,"key"),g=cc.maybeMap(zI(u.slice(f+1),t),function(m){return t.decoder(m,Ht.decoder,l,"value")})),g&&t.interpretNumericEntities&&l==="iso-8859-1"&&(g=H4(g)),u.indexOf("[]=")>-1&&(g=z4(g)?[g]:g);var y=D0.call(r,h);y&&t.duplicates==="combine"?r[h]=cc.combine(r[h],g):(!y||t.duplicates==="last")&&(r[h]=g)}return r},$4=function(n,e,t,r){for(var i=r?e:zI(e,t),s=n.length-1;s>=0;--s){var o,a=n[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&(i===""||t.strictNullHandling&&i===null)?[]:[].concat(i);else{o=t.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);!t.parseArrays&&l===""?o={0:i}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},q4=function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=r.depth>0&&o.exec(s),l=c?s.slice(0,c.index):s,u=[];if(l){if(!r.plainObjects&&D0.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var d=0;r.depth>0&&(c=a.exec(s))!==null&&d<r.depth;){if(d+=1,!r.plainObjects&&D0.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(c[1])}if(c){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+s.slice(c.index)+"]")}return $4(u,t,r,i)}},X4=function(e){if(!e)return Ht;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Ht.charset:e.charset,r=typeof e.duplicates>"u"?Ht.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ht.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ht.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ht.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ht.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ht.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ht.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ht.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ht.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ht.decoder,delimiter:typeof e.delimiter=="string"||cc.isRegExp(e.delimiter)?e.delimiter:Ht.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ht.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ht.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ht.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ht.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ht.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ht.strictNullHandling}};HI.exports=function(n,e){var t=X4(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?Object.create(null):{};for(var r=typeof n=="string"?W4(n,t):n,i=t.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],c=q4(a,r[a],t,typeof n=="string");i=cc.merge(i,c,t)}return t.allowSparse===!0?i:cc.compact(i)}});var WI=je((Ene,jI)=>{"use strict";var Y4=VI(),Z4=GI(),K4=ep();jI.exports={formats:K4,parse:Z4,stringify:Y4}});var P0=je((Tne,YI)=>{var jt=YI.exports={},hi,pi;function R0(){throw new Error("setTimeout has not been defined")}function N0(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?hi=setTimeout:hi=R0}catch{hi=R0}try{typeof clearTimeout=="function"?pi=clearTimeout:pi=N0}catch{pi=N0}})();function $I(n){if(hi===setTimeout)return setTimeout(n,0);if((hi===R0||!hi)&&setTimeout)return hi=setTimeout,setTimeout(n,0);try{return hi(n,0)}catch{try{return hi.call(null,n,0)}catch{return hi.call(this,n,0)}}}function J4(n){if(pi===clearTimeout)return clearTimeout(n);if((pi===N0||!pi)&&clearTimeout)return pi=clearTimeout,clearTimeout(n);try{return pi(n)}catch{try{return pi.call(null,n)}catch{return pi.call(this,n)}}}var zi=[],lc=!1,bo,np=-1;function Q4(){!lc||!bo||(lc=!1,bo.length?zi=bo.concat(zi):np=-1,zi.length&&qI())}function qI(){if(!lc){var n=$I(Q4);lc=!0;for(var e=zi.length;e;){for(bo=zi,zi=[];++np<e;)bo&&bo[np].run();np=-1,e=zi.length}bo=null,lc=!1,J4(n)}}jt.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];zi.push(new XI(n,e)),zi.length===1&&!lc&&$I(qI)};function XI(n,e){this.fun=n,this.array=e}XI.prototype.run=function(){this.fun.apply(null,this.array)};jt.title="browser";jt.browser=!0;jt.env={};jt.argv=[];jt.version="";jt.versions={};function Hi(){}jt.on=Hi;jt.addListener=Hi;jt.once=Hi;jt.off=Hi;jt.removeListener=Hi;jt.removeAllListeners=Hi;jt.emit=Hi;jt.prependListener=Hi;jt.prependOnceListener=Hi;jt.listeners=function(n){return[]};jt.binding=function(n){throw new Error("process.binding is not supported")};jt.cwd=function(){return"/"};jt.chdir=function(n){throw new Error("process.chdir is not supported")};jt.umask=function(){return 0}});var tR=je((Rne,eR)=>{var nG=typeof global=="object"&&global&&global.Object===Object&&global;eR.exports=nG});var rR=je((Nne,nR)=>{var rG=tR(),iG=typeof self=="object"&&self&&self.Object===Object&&self,sG=rG||iG||Function("return this")();nR.exports=sG});var L0=je((Pne,iR)=>{var oG=rR(),aG=oG.Symbol;iR.exports=aG});var cR=je((One,aR)=>{var sR=L0(),oR=Object.prototype,cG=oR.hasOwnProperty,lG=oR.toString,lu=sR?sR.toStringTag:void 0;function uG(n){var e=cG.call(n,lu),t=n[lu];try{n[lu]=void 0;var r=!0}catch{}var i=lG.call(n);return r&&(e?n[lu]=t:delete n[lu]),i}aR.exports=uG});var uR=je((Lne,lR)=>{var dG=Object.prototype,fG=dG.toString;function hG(n){return fG.call(n)}lR.exports=hG});var F0=je((Fne,hR)=>{var dR=L0(),pG=cR(),mG=uR(),gG="[object Null]",yG="[object Undefined]",fR=dR?dR.toStringTag:void 0;function vG(n){return n==null?n===void 0?yG:gG:fR&&fR in Object(n)?pG(n):mG(n)}hR.exports=vG});var mR=je((kne,pR)=>{var _G=Array.isArray;pR.exports=_G});var k0=je((Une,gR)=>{function xG(n){return n!=null&&typeof n=="object"}gR.exports=xG});var vR=je((Bne,yR)=>{var bG=F0(),wG=mR(),SG=k0(),EG="[object String]";function MG(n){return typeof n=="string"||!wG(n)&&SG(n)&&bG(n)==EG}yR.exports=MG});var MR=je((sre,ER)=>{function DG(n,e){return function(t){return n(e(t))}}ER.exports=DG});var AR=je((ore,TR)=>{var IG=MR(),RG=IG(Object.getPrototypeOf,Object);TR.exports=RG});var IR=je((are,DR)=>{var NG=F0(),PG=AR(),OG=k0(),LG="[object Object]",FG=Function.prototype,kG=Object.prototype,CR=FG.toString,UG=kG.hasOwnProperty,BG=CR.call(Object);function VG(n){if(!OG(n)||NG(n)!=LG)return!1;var e=PG(n);if(e===null)return!0;var t=UG.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&CR.call(t)==BG}DR.exports=VG});var kR=je((Y0,Z0)=>{(function(n,e){typeof Y0=="object"&&typeof Z0<"u"?Z0.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n["fast-copy"]=e())})(Y0,function(){"use strict";var n=Function.prototype.toString,e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,o=Object.getPrototypeOf,a=Object.prototype,c=a.hasOwnProperty,l=a.propertyIsEnumerable,u=typeof s=="function",d=typeof WeakMap=="function",f=function(){if(d)return function(){return new WeakMap};var C=function(){function T(){this._keys=[],this._values=[]}return T.prototype.has=function(D){return!!~this._keys.indexOf(D)},T.prototype.get=function(D){return this._values[this._keys.indexOf(D)]},T.prototype.set=function(D,I){this._keys.push(D),this._values.push(I)},T}();return function(){return new C}}(),h=function(C,T){var D=C.__proto__||o(C);if(!D)return e(null);var I=D.constructor;if(I===T.Object)return D===T.Object.prototype?{}:e(D);if(~n.call(I).indexOf("[native code]"))try{return new I}catch{}return e(D)},g=function(C,T,D,I){var S=h(C,T);I.set(C,S);for(var b in C)c.call(C,b)&&(S[b]=D(C[b],I));if(u)for(var A=s(C),j=0,F=A.length,V=void 0;j<F;++j)V=A[j],l.call(C,V)&&(S[V]=D(C[V],I));return S},y=function(C,T,D,I){var S=h(C,T);I.set(C,S);for(var b=u?i(C).concat(s(C)):i(C),A=0,j=b.length,F=void 0,V=void 0;A<j;++A)if(F=b[A],F!=="callee"&&F!=="caller")if(V=r(C,F),V){!V.get&&!V.set&&(V.value=D(C[F],I));try{t(S,F,V)}catch{S[F]=V.value}}else S[F]=D(C[F],I);return S},m=function(C){var T="";return C.global&&(T+="g"),C.ignoreCase&&(T+="i"),C.multiline&&(T+="m"),C.unicode&&(T+="u"),C.sticky&&(T+="y"),T},p=Array.isArray,E=Object.getPrototypeOf,_=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:(console&&console.error&&console.error('Unable to locate global object, returning "this".'),this)}();function x(C,T){var D=!!(T&&T.isStrict),I=T&&T.realm||_,S=D?y:g,b=function(A,j){if(!A||typeof A!="object")return A;if(j.has(A))return j.get(A);var F=A.__proto__||E(A),V=F&&F.constructor;if(!V||V===I.Object)return S(A,I,b,j);var $;if(p(A)){if(D)return y(A,I,b,j);$=new V,j.set(A,$);for(var q=0,te=A.length;q<te;++q)$[q]=b(A[q],j);return $}if(A instanceof I.Date)return new V(A.getTime());if(A instanceof I.RegExp)return $=new V(A.source,A.flags||m(A)),$.lastIndex=A.lastIndex,$;if(I.Map&&A instanceof I.Map)return $=new V,j.set(A,$),A.forEach(function(W,se){$.set(se,b(W,j))}),$;if(I.Set&&A instanceof I.Set)return $=new V,j.set(A,$),A.forEach(function(W){$.add(b(W,j))}),$;if(I.Blob&&A instanceof I.Blob)return A.slice(0,A.size,A.type);if(I.Buffer&&I.Buffer.isBuffer(A))return $=I.Buffer.allocUnsafe?I.Buffer.allocUnsafe(A.length):new V(A.length),j.set(A,$),A.copy($),$;if(I.ArrayBuffer){if(I.ArrayBuffer.isView(A))return $=new V(A.buffer.slice(0)),j.set(A,$),$;if(A instanceof I.ArrayBuffer)return $=A.slice(0),j.set(A,$),$}return typeof A.then=="function"||A instanceof Error||I.WeakMap&&A instanceof I.WeakMap||I.WeakSet&&A instanceof I.WeakSet?A:S(A,I,b,j)};return b(C,f())}return x.default=x,x.strict=function(T,D){return x(T,{isStrict:!0,realm:D?D.realm:void 0})},x})});var J0=je((K0,zR)=>{K0=zR.exports=fj;K0.getSerialize=VR;function fj(n,e,t,r){return JSON.stringify(n,VR(e,r),t)}function VR(n,e){var t=[],r=[];return e==null&&(e=function(i,s){return t[0]===s?"[Circular ~]":"[Circular ~."+r.slice(0,t.indexOf(s)).join(".")+"]"}),function(i,s){if(t.length>0){var o=t.indexOf(this);~o?t.splice(o+1):t.push(this),~o?r.splice(o,1/0,i):r.push(i),~t.indexOf(s)&&(s=e.call(this,i,s))}else t.push(s);return n==null?s:n.call(this,i,s)}}});function mw(n,e){return Object.is(n,e)}var Qt=null,pd=!1,ig=1,ra=Symbol("SIGNAL");function xt(n){let e=Qt;return Qt=n,e}function gw(){return Qt}var md={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yw(n){if(pd)throw new Error("");if(Qt===null)return;Qt.consumerOnSignalRead(n);let e=Qt.nextProducerIndex++;if(yd(Qt),e<Qt.producerNode.length&&Qt.producerNode[e]!==n&&$c(Qt)){let t=Qt.producerNode[e];gd(t,Qt.producerIndexOfThis[e])}Qt.producerNode[e]!==n&&(Qt.producerNode[e]=n,Qt.producerIndexOfThis[e]=$c(Qt)?bw(n,Qt,e):0),Qt.producerLastReadVersion[e]=n.version}function IP(){ig++}function vw(n){if(!($c(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ig)){if(!n.producerMustRecompute(n)&&!og(n)){rg(n);return}n.producerRecomputeValue(n),rg(n)}}function _w(n){if(n.liveConsumerNode===void 0)return;let e=pd;pd=!0;try{for(let t of n.liveConsumerNode)t.dirty||NP(t)}finally{pd=e}}function RP(){return Qt?.consumerAllowSignalWrites!==!1}function NP(n){n.dirty=!0,_w(n),n.consumerMarkedDirty?.(n)}function rg(n){n.dirty=!1,n.lastCleanEpoch=ig}function sg(n){return n&&(n.nextProducerIndex=0),xt(n)}function xw(n,e){if(xt(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if($c(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function og(n){yd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vw(t),r!==t.version))return!0}return!1}function ag(n){if(yd(n),$c(n))for(let e=0;e<n.producerNode.length;e++)gd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bw(n,e,t){if(ww(n),n.liveConsumerNode.length===0&&Sw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=bw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gd(n,e){if(ww(n),n.liveConsumerNode.length===1&&Sw(n))for(let r=0;r<n.producerNode.length;r++)gd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yd(i),i.producerIndexOfThis[r]=e}}function $c(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ww(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Sw(n){return n.producerNode!==void 0}function PP(){throw new Error}var Ew=PP;function OP(){Ew()}function Mw(n){Ew=n}var LP=null;function Tw(n,e){RP()||OP(),n.equal(n.value,e)||(n.value=e,FP(n))}var Aw=Dt(ae({},md),{equal:mw,value:void 0});function FP(n){n.version++,IP(),_w(n),LP?.()}function We(n){return typeof n=="function"}function ia(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vd=ia(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function qc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $t=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(We(r))try{r()}catch(s){e=s instanceof vd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Cw(s)}catch(o){e=e??[],o instanceof vd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Cw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&qc(t,e)}remove(e){let{_finalizers:t}=this;t&&qc(t,e),e instanceof n&&e._removeParent(this)}};$t.EMPTY=(()=>{let n=new $t;return n.closed=!0,n})();var cg=$t.EMPTY;function _d(n){return n instanceof $t||n&&"closed"in n&&We(n.remove)&&We(n.add)&&We(n.unsubscribe)}function Cw(n){We(n)?n():n.unsubscribe()}var Ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sa={setTimeout(n,e,...t){let{delegate:r}=sa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=sa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xd(n){sa.setTimeout(()=>{let{onUnhandledError:e}=Ir;if(e)e(n);else throw n})}function Xc(){}var Dw=lg("C",void 0,void 0);function Iw(n){return lg("E",void 0,n)}function Rw(n){return lg("N",n,void 0)}function lg(n,e,t){return{kind:n,value:e,error:t}}var Xs=null;function oa(n){if(Ir.useDeprecatedSynchronousErrorHandling){let e=!Xs;if(e&&(Xs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xs;if(Xs=null,t)throw r}}else n()}function Nw(n){Ir.useDeprecatedSynchronousErrorHandling&&Xs&&(Xs.errorThrown=!0,Xs.error=n)}var Ys=class extends $t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_d(e)&&e.add(this)):this.destination=BP}static create(e,t,r){return new aa(e,t,r)}next(e){this.isStopped?dg(Rw(e),this):this._next(e)}error(e){this.isStopped?dg(Iw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dg(Dw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kP=Function.prototype.bind;function ug(n,e){return kP.call(n,e)}var fg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bd(r)}else bd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bd(t)}}},aa=class extends Ys{constructor(e,t,r){super();let i;if(We(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ir.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ug(e.next,s),error:e.error&&ug(e.error,s),complete:e.complete&&ug(e.complete,s)}):i=e}this.destination=new fg(i)}};function bd(n){Ir.useDeprecatedSynchronousErrorHandling?Nw(n):xd(n)}function UP(n){throw n}function dg(n,e){let{onStoppedNotification:t}=Ir;t&&sa.setTimeout(()=>t(n,e))}var BP={closed:!0,next:Xc,error:UP,complete:Xc};var ca=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wn(n){return n}function hg(...n){return pg(n)}function pg(n){return n.length===0?Wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Tt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=zP(t)?t:new aa(t,r,i);return oa(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Pw(r),new r((i,s)=>{let o=new aa({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ca](){return this}pipe(...t){return pg(t)(this)}toPromise(t){return t=Pw(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Pw(n){var e;return(e=n??Ir.Promise)!==null&&e!==void 0?e:Promise}function VP(n){return n&&We(n.next)&&We(n.error)&&We(n.complete)}function zP(n){return n&&n instanceof Ys||VP(n)&&_d(n)}function mg(n){return We(n?.lift)}function ht(n){return e=>{if(mg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pt(n,e,t,r,i){return new gg(n,e,t,r,i)}var gg=class extends Ys{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function la(){return ht((n,e)=>{let t=null;n._refCount++;let r=pt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ua=class extends Tt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $t;let t=this.getSubject();e.add(this.source.subscribe(pt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$t.EMPTY)}return e}refCount(){return la()(this)}};var Ow=ia(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var an=(()=>{class n extends Tt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new wd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ow}next(t){oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){oa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?cg:(this.currentObservers=null,s.push(t),new $t(()=>{this.currentObservers=null,qc(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Tt;return t.source=this,t}}return n.create=(e,t)=>new wd(e,t),n})(),wd=class extends an{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cg}};var mn=class extends an{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $n=new Tt(n=>n.complete());function Lw(n){return n&&We(n.schedule)}function Fw(n){return n[n.length-1]}function kw(n){return We(Fw(n))?n.pop():void 0}function cs(n){return Lw(Fw(n))?n.pop():void 0}function Bw(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Uw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(n){return this instanceof Zs?(this.v=n,this):new Zs(n)}function Vw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(y){return new Promise(function(m,p){s.push([h,y,m,p])>1||c(h,y)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(y){f(s[0][3],y)}}function l(h){h.value instanceof Zs?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function zw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Uw=="function"?Uw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Sd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ed(n){return We(n?.then)}function Md(n){return We(n[ca])}function Td(n){return Symbol.asyncIterator&&We(n?.[Symbol.asyncIterator])}function Ad(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cd=HP();function Dd(n){return We(n?.[Cd])}function Id(n){return Vw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zs(t.read());if(i)return yield Zs(void 0);yield yield Zs(r)}}finally{t.releaseLock()}})}function Rd(n){return We(n?.getReader)}function cn(n){if(n instanceof Tt)return n;if(n!=null){if(Md(n))return GP(n);if(Sd(n))return jP(n);if(Ed(n))return WP(n);if(Td(n))return Hw(n);if(Dd(n))return $P(n);if(Rd(n))return qP(n)}throw Ad(n)}function GP(n){return new Tt(e=>{let t=n[ca]();if(We(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jP(n){return new Tt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function WP(n){return new Tt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xd)})}function $P(n){return new Tt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Hw(n){return new Tt(e=>{XP(n,e).catch(t=>e.error(t))})}function qP(n){return Hw(Id(n))}function XP(n,e){var t,r,i,s;return Bw(this,void 0,void 0,function*(){try{for(t=zw(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Nd(n,e=0){return ht((t,r)=>{t.subscribe(pt(r,i=>Pn(r,n,()=>r.next(i),e),()=>Pn(r,n,()=>r.complete(),e),i=>Pn(r,n,()=>r.error(i),e)))})}function Pd(n,e=0){return ht((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Gw(n,e){return cn(n).pipe(Pd(e),Nd(e))}function jw(n,e){return cn(n).pipe(Pd(e),Nd(e))}function Ww(n,e){return new Tt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $w(n,e){return new Tt(t=>{let r;return Pn(t,e,()=>{r=n[Cd](),Pn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>We(r?.return)&&r.return()})}function Od(n,e){if(!n)throw new Error("Iterable cannot be null");return new Tt(t=>{Pn(t,e,()=>{let r=n[Symbol.asyncIterator]();Pn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qw(n,e){return Od(Id(n),e)}function Xw(n,e){if(n!=null){if(Md(n))return Gw(n,e);if(Sd(n))return Ww(n,e);if(Ed(n))return jw(n,e);if(Td(n))return Od(n,e);if(Dd(n))return $w(n,e);if(Rd(n))return qw(n,e)}throw Ad(n)}function kt(n,e){return e?Xw(n,e):cn(n)}function Pe(...n){let e=cs(n);return kt(n,e)}function da(n,e){let t=We(n)?n:()=>n,r=i=>i.error(t());return new Tt(e?i=>e.schedule(r,0,i):r)}function yg(n){return!!n&&(n instanceof Tt||We(n.lift)&&We(n.subscribe))}var Ci=ia(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ot(n,e){return ht((t,r)=>{let i=0;t.subscribe(pt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:YP}=Array;function ZP(n,e){return YP(e)?n(...e):n(e)}function Yw(n){return ot(e=>ZP(n,e))}var{isArray:KP}=Array,{getPrototypeOf:JP,prototype:QP,keys:eO}=Object;function Zw(n){if(n.length===1){let e=n[0];if(KP(e))return{args:e,keys:null};if(tO(e)){let t=eO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tO(n){return n&&typeof n=="object"&&JP(n)===QP}function Kw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yc(...n){let e=cs(n),t=kw(n),{args:r,keys:i}=Zw(n);if(r.length===0)return kt([],e);let s=new Tt(nO(r,e,i?o=>Kw(i,o):Wn));return t?s.pipe(Yw(t)):s}function nO(n,e,t=Wn){return r=>{Jw(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Jw(e,()=>{let l=kt(n[c],e),u=!1;l.subscribe(pt(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Jw(n,e,t){n?Pn(t,n,e):e()}function Qw(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=y=>l<r?g(y):c.push(y),g=y=>{s&&e.next(y),l++;let m=!1;cn(t(y,u++)).subscribe(pt(e,p=>{i?.(p),s?h(p):e.next(p)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let p=c.shift();o?Pn(e,o,()=>g(p)):g(p)}f()}catch(p){e.error(p)}}))};return n.subscribe(pt(e,h,()=>{d=!0,f()})),()=>{a?.()}}function qt(n,e,t=1/0){return We(e)?qt((r,i)=>ot((s,o)=>e(r,s,i,o))(cn(n(r,i))),t):(typeof e=="number"&&(t=e),ht((r,i)=>Qw(r,i,n,t)))}function ls(n=1/0){return qt(Wn,n)}function eS(){return ls(1)}function fa(...n){return eS()(kt(n,cs(n)))}function Ld(n){return new Tt(e=>{cn(n()).subscribe(e)})}function qn(n,e){return ht((t,r)=>{let i=0;t.subscribe(pt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function us(n){return ht((e,t)=>{let r=null,i=!1,s;r=e.subscribe(pt(t,void 0,void 0,o=>{s=cn(n(o,us(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function tS(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(pt(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ds(n,e){return We(e)?qt(n,e,1):qt(n,1)}function fs(n){return ht((e,t)=>{let r=!1;e.subscribe(pt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Di(n){return n<=0?()=>$n:ht((e,t)=>{let r=0;e.subscribe(pt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vg(n){return ot(()=>n)}function Fd(n=rO){return ht((e,t)=>{let r=!1;e.subscribe(pt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rO(){return new Ci}function ha(n){return ht((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ii(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qn((i,s)=>n(i,s,r)):Wn,Di(1),t?fs(e):Fd(()=>new Ci))}function pa(n){return n<=0?()=>$n:ht((e,t)=>{let r=[];e.subscribe(pt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _g(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qn((i,s)=>n(i,s,r)):Wn,pa(1),t?fs(e):Fd(()=>new Ci))}function xg(n,e){return ht(tS(n,e,arguments.length>=2,!0))}function bg(...n){let e=cs(n);return ht((t,r)=>{(e?fa(n,t,e):fa(n,t)).subscribe(r)})}function Xn(n,e){return ht((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(pt(r,c=>{i?.unsubscribe();let l=0,u=s++;cn(n(c,u)).subscribe(i=pt(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function wg(n){return ht((e,t)=>{cn(n).subscribe(pt(t,()=>t.complete(),Xc)),!t.closed&&e.subscribe(t)})}function en(n,e,t){let r=We(n)||e||t?{next:n,error:e,complete:t}:n;return r?ht((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(pt(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wn}var HS="https://g.co/ng/security#xss",Ee=class extends Error{code;constructor(e,t){super(_f(e,t)),this.code=e}};function _f(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var GS=Symbol("InputSignalNode#UNSET"),iO=Dt(ae({},Aw),{transformFn:void 0,applyValueToInputSignal(n,e){Tw(n,e)}});function jS(n,e){let t=Object.create(iO);t.value=n,t.transformFn=e?.transform;function r(){if(yw(t),t.value===GS)throw new Ee(-950,!1);return t.value}return r[ra]=t,r}function ol(n){return{toString:n}.toString()}var kd="__parameters__";function sO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function WS(n,e,t){return ol(()=>{let r=sO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(kd)?c[kd]:Object.defineProperty(c,kd,{value:[]})[kd];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ng=globalThis;function It(n){for(let e in n)if(n[e]===It)return e;throw Error("Could not find renamed property on target object.")}function Ln(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ln).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function nS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var oO=It({__forward_ref__:It});function $S(n){return n.__forward_ref__=$S,n.toString=function(){return Ln(this())},n}function vr(n){return qS(n)?n():n}function qS(n){return typeof n=="function"&&n.hasOwnProperty(oO)&&n.__forward_ref__===$S}function Ae(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function al(n){return{providers:n.providers||[],imports:n.imports||[]}}function xf(n){return rS(n,YS)||rS(n,ZS)}function XS(n){return xf(n)!==null}function rS(n,e){return n.hasOwnProperty(e)?n[e]:null}function aO(n){let e=n&&(n[YS]||n[ZS]);return e||null}function iS(n){return n&&(n.hasOwnProperty(sS)||n.hasOwnProperty(cO))?n[sS]:null}var YS=It({\u0275prov:It}),sS=It({\u0275inj:It}),ZS=It({ngInjectableDef:It}),cO=It({ngInjectorDef:It}),Re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KS(n){return n&&!!n.\u0275providers}var lO=It({\u0275cmp:It}),uO=It({\u0275dir:It}),dO=It({\u0275pipe:It}),fO=It({\u0275mod:It}),qd=It({\u0275fac:It}),Jc=It({__NG_ELEMENT_ID__:It}),oS=It({__NG_ENV_ID__:It});function bf(n){return typeof n=="string"?n:n==null?"":String(n)}function hO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bf(n)}function pO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ee(-200,n)}function Cy(n,e){throw new Ee(-201,!1)}var nt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(nt||{}),Pg;function JS(){return Pg}function yr(n){let e=Pg;return Pg=n,e}function QS(n,e,t){let r=xf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&nt.Optional)return null;if(e!==void 0)return e;Cy(n,"Injector")}var mO={},Qc=mO,Og="__NG_DI_FLAG__",Xd="ngTempTokenPath",gO="ngTokenPath",yO=/\n/gm,vO="\u0275",aS="__source",_a;function _O(){return _a}function hs(n){let e=_a;return _a=n,e}function xO(n,e=nt.Default){if(_a===void 0)throw new Ee(-203,!1);return _a===null?QS(n,void 0,e):_a.get(n,e&nt.Optional?null:void 0,e)}function Ve(n,e=nt.Default){return(JS()||xO)(vr(n),e)}function Q(n,e=nt.Default){return Ve(n,wf(e))}function wf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Lg(n){let e=[];for(let t=0;t<n.length;t++){let r=vr(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Ee(900,!1);let i,s=nt.Default;for(let o=0;o<r.length;o++){let a=r[o],c=bO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Ve(i,s))}else e.push(Ve(r))}return e}function eE(n,e){return n[Og]=e,n.prototype[Og]=e,n}function bO(n){return n[Og]}function wO(n,e,t,r){let i=n[Xd];throw e[aS]&&i.unshift(e[aS]),n.message=SO(`
`+n.message,i,t,r),n[gO]=i,n[Xd]=null,n}function SO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==vO?n.slice(2):n;let i=Ln(e);if(Array.isArray(e))i=e.map(Ln).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ln(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(yO,`
  `)}`}var Sf=eE(WS("Optional"),8);var Dy=eE(WS("SkipSelf"),4);function ba(n,e){let t=n.hasOwnProperty(qd);return t?n[qd]:null}function EO(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function MO(n){return n.flat(Number.POSITIVE_INFINITY)}function Iy(n,e){n.forEach(t=>Array.isArray(t)?Iy(t,e):e(t))}function tE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var el={},Kr=[],Js=new Re(""),nE=new Re("",-1),rE=new Re(""),Zd=class{get(e,t=Qc){if(t===Qc){let r=new Error(`NullInjectorError: No provider for ${Ln(e)}!`);throw r.name="NullInjectorError",r}return t}};function iE(n,e){let t=n[fO]||null;if(!t&&e===!0)throw new Error(`Type ${Ln(n)} does not have '\u0275mod' property.`);return t}function ms(n){return n[lO]||null}function sE(n){return n[uO]||null}function oE(n){return n[dO]||null}function aE(n){let e=ms(n)||sE(n)||oE(n);return e!==null?e.standalone:!1}function so(n){return{\u0275providers:n}}function TO(...n){return{\u0275providers:cE(!0,n),\u0275fromNgModule:!0}}function cE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Iy(e,o=>{let a=o;Fg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lE(i,s),t}function lE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ry(i,s=>{e(s,r)})}}function Fg(n,e,t,r){if(n=vr(n),!n)return!1;let i=null,s=iS(n),o=!s&&ms(n);if(!s&&!o){let c=n.ngModule;if(s=iS(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Fg(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Iy(s.imports,u=>{Fg(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&lE(l,e)}if(!a){let l=ba(i)||(()=>new i);e({provide:i,useFactory:l,deps:Kr},i),e({provide:rE,useValue:i,multi:!0},i),e({provide:Js,useValue:()=>Ve(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Ry(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ry(n,e){for(let t of n)KS(t)&&(t=t.\u0275providers),Array.isArray(t)?Ry(t,e):e(t)}var AO=It({provide:String,useValue:It});function uE(n){return n!==null&&typeof n=="object"&&AO in n}function CO(n){return!!(n&&n.useExisting)}function DO(n){return!!(n&&n.useFactory)}function kg(n){return typeof n=="function"}var Ef=new Re(""),zd={},IO={},Sg;function Ny(){return Sg===void 0&&(Sg=new Zd),Sg}var Zn=class{},tl=class extends Zn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Bg(e,o=>this.processProvider(o)),this.records.set(nE,ma(void 0,this)),i.has("environment")&&this.records.set(Zn,ma(void 0,this));let s=this.records.get(Ef);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rE,Kr,nt.Self))}destroy(){Zc(this),this._destroyed=!0;let e=xt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xt(e)}}onDestroy(e){return Zc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Zc(this);let t=hs(this),r=yr(void 0),i;try{return e()}finally{hs(t),yr(r)}}get(e,t=Qc,r=nt.Default){if(Zc(this),e.hasOwnProperty(oS))return e[oS](this);r=wf(r);let i,s=hs(this),o=yr(void 0);try{if(!(r&nt.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=FO(e)&&xf(e);l&&this.injectableDefInScope(l)?c=ma(Ug(e),zd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&nt.Self?Ny():this.parent;return t=r&nt.Optional&&t===Qc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Xd]=a[Xd]||[]).unshift(Ln(e)),s)throw a;return wO(a,e,"R3InjectorError",this.source)}else throw a}finally{yr(o),hs(s)}}resolveInjectorInitializers(){let e=xt(null),t=hs(this),r=yr(void 0),i;try{let s=this.get(Js,Kr,nt.Self);for(let o of s)o()}finally{hs(t),yr(r),xt(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ln(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vr(e);let t=kg(e)?e:vr(e&&e.provide),r=NO(e);if(!kg(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ma(void 0,zd,!0),i.factory=()=>Lg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=xt(null);try{return t.value===zd&&(t.value=IO,t.value=t.factory()),typeof t.value=="object"&&t.value&&LO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{xt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ug(n){let e=xf(n),t=e!==null?e.factory:ba(n);if(t!==null)return t;if(n instanceof Re)throw new Ee(204,!1);if(n instanceof Function)return RO(n);throw new Ee(204,!1)}function RO(n){if(n.length>0)throw new Ee(204,!1);let t=aO(n);return t!==null?()=>t.factory(n):()=>new n}function NO(n){if(uE(n))return ma(void 0,n.useValue);{let e=PO(n);return ma(e,zd)}}function PO(n,e,t){let r;if(kg(n)){let i=vr(n);return ba(i)||Ug(i)}else if(uE(n))r=()=>vr(n.useValue);else if(DO(n))r=()=>n.useFactory(...Lg(n.deps||[]));else if(CO(n))r=()=>Ve(vr(n.useExisting));else{let i=vr(n&&(n.useClass||n.provide));if(OO(n))r=()=>new i(...Lg(n.deps));else return ba(i)||Ug(i)}return r}function Zc(n){if(n.destroyed)throw new Ee(205,!1)}function ma(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function OO(n){return!!n.deps}function LO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function FO(n){return typeof n=="function"||typeof n=="object"&&n instanceof Re}function Bg(n,e){for(let t of n)Array.isArray(t)?Bg(t,e):t&&KS(t)?Bg(t.\u0275providers,e):e(t)}function Jn(n,e){n instanceof tl&&Zc(n);let t,r=hs(n),i=yr(void 0);try{return e()}finally{hs(r),yr(i)}}function dE(){return JS()!==void 0||_O()!=null}function kO(n){if(!dE())throw new Ee(-203,!1)}function UO(n){return typeof n=="function"}var Kn=0,Ye=1,ke=2,gn=3,Nr=4,Fr=5,ei=6,Kd=7,ti=8,wa=9,Ri=10,zt=11,nl=12,cS=13,Da=14,_r=15,Qs=16,ga=17,Ni=18,Mf=19,fE=20,ps=21,Eg=22,Jd=23,Yn=24,kn=25,hE=1,rl=6,Pi=7,Qd=8,Sa=9,Fn=10,ef=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ef||{});function Pr(n){return Array.isArray(n)&&typeof n[hE]=="object"}function ri(n){return Array.isArray(n)&&n[hE]===!0}function pE(n){return(n.flags&4)!==0}function cl(n){return n.componentOffset>-1}function Py(n){return(n.flags&1)===1}function ll(n){return!!n.template}function tf(n){return(n[ke]&512)!==0}var Vg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function mE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ul=(()=>{let n=()=>gE;return n.ngInherit=!0,n})();function gE(n){return n.type.prototype.ngOnChanges&&(n.setInput=VO),BO}function BO(){let n=vE(this),e=n?.current;if(e){let t=n.previous;if(t===el)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VO(n,e,t,r,i){let s=this.declaredInputs[r],o=vE(n)||zO(n,{previous:el,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Vg(l&&l.currentValue,t,c===el),mE(n,e,i,t)}var yE="__ngSimpleChanges__";function vE(n){return n[yE]||null}function zO(n,e){return n[yE]=e}var lS=null;var Jr=function(n,e,t){lS?.(n,e,t)},HO="svg",GO="math";function Or(n){for(;Array.isArray(n);)n=n[Kn];return n}function jO(n,e){return Or(e[n])}function Qn(n,e){return Or(e[n.index])}function _E(n,e){return n.data[e]}function vs(n,e){let t=e[n];return Pr(t)?t:t[Kn]}function WO(n){return(n[ke]&4)===4}function Oy(n){return(n[ke]&128)===128}function $O(n){return ri(n[gn])}function nf(n,e){return e==null?null:n[e]}function xE(n){n[ga]=0}function Ly(n){n[ke]&1024||(n[ke]|=1024,Oy(n)&&Af(n))}function qO(n,e){for(;n>0;)e=e[Da],n--;return e}function Tf(n){return!!(n[ke]&9216||n[Yn]?.dirty)}function zg(n){n[Ri].changeDetectionScheduler?.notify(9),n[ke]&64&&(n[ke]|=1024),Tf(n)&&Af(n)}function Af(n){n[Ri].changeDetectionScheduler?.notify(0);let e=eo(n);for(;e!==null&&!(e[ke]&8192||(e[ke]|=8192,!Oy(e)));)e=eo(e)}function bE(n,e){if((n[ke]&256)===256)throw new Ee(911,!1);n[ps]===null&&(n[ps]=[]),n[ps].push(e)}function XO(n,e){if(n[ps]===null)return;let t=n[ps].indexOf(e);t!==-1&&n[ps].splice(t,1)}function eo(n){let e=n[gn];return ri(e)?e[gn]:e}var lt={lFrame:IE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Hg=!1;function YO(){return lt.lFrame.elementDepthCount}function ZO(){lt.lFrame.elementDepthCount++}function KO(){lt.lFrame.elementDepthCount--}function wE(){return lt.bindingsEnabled}function dl(){return lt.skipHydrationRootTNode!==null}function JO(n){return lt.skipHydrationRootTNode===n}function QO(n){lt.skipHydrationRootTNode=n}function eL(){lt.skipHydrationRootTNode=null}function Nt(){return lt.lFrame.lView}function kr(){return lt.lFrame.tView}function Un(){let n=SE();for(;n!==null&&n.type===64;)n=n.parent;return n}function SE(){return lt.lFrame.currentTNode}function tL(){let n=lt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fl(n,e){let t=lt.lFrame;t.currentTNode=n,t.isParent=e}function EE(){return lt.lFrame.isParent}function nL(){lt.lFrame.isParent=!1}function ME(){return Hg}function uS(n){let e=Hg;return Hg=n,e}function TE(){let n=lt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rL(n){return lt.lFrame.bindingIndex=n}function Fy(){return lt.lFrame.bindingIndex++}function iL(){return lt.lFrame.inI18n}function sL(n,e){let t=lt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Gg(e)}function oL(){return lt.lFrame.currentDirectiveIndex}function Gg(n){lt.lFrame.currentDirectiveIndex=n}function AE(){return lt.lFrame.currentQueryIndex}function ky(n){lt.lFrame.currentQueryIndex=n}function aL(n){let e=n[Ye];return e.type===2?e.declTNode:e.type===1?n[Fr]:null}function CE(n,e,t){if(t&nt.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&nt.Host);)if(i=aL(s),i===null||(s=s[Da],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=lt.lFrame=DE();return r.currentTNode=e,r.lView=n,!0}function Uy(n){let e=DE(),t=n[Ye];lt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function DE(){let n=lt.lFrame,e=n===null?null:n.child;return e===null?IE(n):e}function IE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function RE(){let n=lt.lFrame;return lt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var NE=RE;function By(){let n=RE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cL(n){return(lt.lFrame.contextLView=qO(n,lt.lFrame.contextLView))[ti]}function Vy(){return lt.lFrame.selectedIndex}function to(n){lt.lFrame.selectedIndex=n}function zy(){let n=lt.lFrame;return _E(n.tView,n.selectedIndex)}function PE(){return lt.lFrame.currentNamespace}var OE=!0;function Hy(){return OE}function _s(n){OE=n}function lL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gE(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Gy(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Hd(n,e,t){LE(n,e,3,t)}function Gd(n,e,t,r){(n[ke]&3)===t&&LE(n,e,t,r)}function Mg(n,e){let t=n[ke];(t&3)===e&&(t&=16383,t+=1,n[ke]=t)}function LE(n,e,t,r){let i=r!==void 0?n[ga]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ga]+=65536),(a<s||s==-1)&&(uL(n,t,e,c),n[ga]=(n[ga]&4294901760)+c+2),c++}function dS(n,e){Jr(4,n,e);let t=xt(null);try{e.call(n)}finally{xt(t),Jr(5,n,e)}}function uL(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ke]>>14<n[ga]>>16&&(n[ke]&3)===e&&(n[ke]+=16384,dS(a,s)):dS(a,s)}var xa=-1,il=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function dL(n){return n instanceof il}function fL(n){return(n.flags&8)!==0}function hL(n){return(n.flags&16)!==0}function jg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];pL(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function FE(n){return n===3||n===4||n===6}function pL(n){return n.charCodeAt(0)===64}function jy(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?fS(n,t,i,null,e[++r]):fS(n,t,i,null,null))}}return n}function fS(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var Tg={},Wg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=wf(r);let i=this.injector.get(e,Tg,r);return i!==Tg||t===Tg?i:this.parentInjector.get(e,t,r)}};function kE(n){return n!==xa}function rf(n){return n&32767}function mL(n){return n>>16}function sf(n,e){let t=mL(n),r=e;for(;t>0;)r=r[Da],t--;return r}var $g=!0;function hS(n){let e=$g;return $g=n,e}var gL=256,UE=gL-1,BE=5,yL=0,Qr={};function vL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Jc)&&(r=t[Jc]),r==null&&(r=t[Jc]=yL++);let i=r&UE,s=1<<i;e.data[n+(i>>BE)]|=s}function VE(n,e){let t=zE(n,e);if(t!==-1)return t;let r=e[Ye];r.firstCreatePass&&(n.injectorIndex=e.length,Ag(r.data,n),Ag(e,null),Ag(r.blueprint,null));let i=Wy(n,e),s=n.injectorIndex;if(kE(i)){let o=rf(i),a=sf(i,e),c=a[Ye].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Ag(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Wy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$E(i),r===null)return xa;if(t++,i=i[Da],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xa}function _L(n,e,t){vL(n,e,t)}function xL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(FE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function HE(n,e,t){if(t&nt.Optional||n!==void 0)return n;Cy(e,"NodeInjector")}function GE(n,e,t,r){if(t&nt.Optional&&r===void 0&&(r=null),!(t&(nt.Self|nt.Host))){let i=n[wa],s=yr(void 0);try{return i?i.get(e,r,t&nt.Optional):QS(e,r,t&nt.Optional)}finally{yr(s)}}return HE(r,e,t)}function jE(n,e,t,r=nt.Default,i){if(n!==null){if(e[ke]&2048&&!(r&nt.Self)){let o=EL(n,e,t,r,Qr);if(o!==Qr)return o}let s=WE(n,e,t,r,Qr);if(s!==Qr)return s}return GE(e,t,r,i)}function WE(n,e,t,r,i){let s=wL(t);if(typeof s=="function"){if(!CE(e,n,r))return r&nt.Host?HE(i,t,r):GE(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&nt.Optional))Cy(t);else return o}finally{NE()}}else if(typeof s=="number"){let o=null,a=zE(n,e),c=xa,l=r&nt.Host?e[_r][Fr]:null;for((a===-1||r&nt.SkipSelf)&&(c=a===-1?Wy(n,e):e[a+8],c===xa||!mS(r,!1)?a=-1:(o=e[Ye],a=rf(c),e=sf(c,e)));a!==-1;){let u=e[Ye];if(pS(s,a,u.data)){let d=bL(a,e,t,o,r,l);if(d!==Qr)return d}c=e[a+8],c!==xa&&mS(r,e[Ye].data[a+8]===l)&&pS(s,a,e)?(o=u,a=rf(c),e=sf(c,e)):a=-1}}return i}function bL(n,e,t,r,i,s){let o=e[Ye],a=o.data[n+8],c=r==null?cl(a)&&$g:r!=o&&(a.type&3)!==0,l=i&nt.Host&&s===a,u=jd(a,o,t,c,l);return u!==null?Ea(e,o,u,a):Qr}function jd(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=o[h];if(h<c&&t===g||h>=c&&g.type===t)return h}if(i){let h=o[c];if(h&&ll(h)&&h.type===t)return c}return null}function Ea(n,e,t,r){let i=n[t],s=e.data;if(dL(i)){let o=i;o.resolving&&pO(hO(s[t]));let a=hS(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?yr(o.injectImpl):null,u=CE(n,r,nt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&lL(t,s[t],e)}finally{l!==null&&yr(l),hS(a),o.resolving=!1,NE()}}return i}function wL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Jc)?n[Jc]:void 0;return typeof e=="number"?e>=0?e&UE:SL:e}function pS(n,e,t){let r=1<<n;return!!(t[e+(n>>BE)]&r)}function mS(n,e){return!(n&nt.Self)&&!(n&nt.Host&&e)}var Ks=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return jE(this._tNode,this._lView,e,wf(r),t)}};function SL(){return new Ks(Un(),Nt())}function $y(n){return ol(()=>{let e=n.prototype.constructor,t=e[qd]||qg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[qd]||qg(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function qg(n){return qS(n)?()=>{let e=qg(vr(n));return e&&e()}:ba(n)}function EL(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ke]&2048&&!(o[ke]&512);){let a=WE(s,o,t,r|nt.Self,Qr);if(a!==Qr)return a;let c=s.parent;if(!c){let l=o[fE];if(l){let u=l.get(t,Qr,r);if(u!==Qr)return u}c=$E(o),o=o[Da]}s=c}return i}function $E(n){let e=n[Ye],t=e.type;return t===2?e.declTNode:t===1?n[Fr]:null}function qy(n){return xL(Un(),n)}function gS(n,e=null,t=null,r){let i=qE(n,e,t,r);return i.resolveInjectorInitializers(),i}function qE(n,e=null,t=null,r,i=new Set){let s=[t||Kr,TO(n)];return r=r||(typeof n=="object"?void 0:Ln(n)),new tl(s,e||Ny(),r||null,i)}var Lr=class n{static THROW_IF_NOT_FOUND=Qc;static NULL=new Zd;static create(e,t){if(Array.isArray(e))return gS({name:""},t,e,"");{let r=e.name??"";return gS({name:r},e.parent,e.providers,r)}}static \u0275prov=Ae({token:n,providedIn:"any",factory:()=>Ve(nE)});static __NG_ELEMENT_ID__=-1};var ML=new Re("");ML.__NG_ELEMENT_ID__=n=>{let e=Un();if(e===null)throw new Ee(204,!1);if(e.type&2)return e.value;if(n&nt.Optional)return null;throw new Ee(204,!1)};var XE=!1,Xy=(()=>{class n{static __NG_ELEMENT_ID__=TL;static __NG_ENV_ID__=t=>t}return n})(),Xg=class extends Xy{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return bE(this._lView,e),()=>XO(this._lView,e)}};function TL(){return new Xg(Nt())}var Ma=class{},Cf=new Re("",{providedIn:"root",factory:()=>!1});var YE=new Re(""),ZE=new Re(""),oo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new mn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n})}return n})();var Yg=class extends an{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,dE()&&(this.destroyRef=Q(Xy,{optional:!0})??void 0,this.pendingTasks=Q(oo,{optional:!0})??void 0)}emit(e){let t=xt(null);try{super.next(e)}finally{xt(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof $t&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},On=Yg;function of(...n){}function KE(n){let e,t;function r(){n=of;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function yS(n){return queueMicrotask(()=>n()),()=>{n=of}}var Yy="isAngularZone",af=Yy+"_ID",AL=0,Ut=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new On(!1);onMicrotaskEmpty=new On(!1);onStable=new On(!1);onError=new On(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=XE}=e;if(typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,IL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Yy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,CL,of,of);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},CL={};function Zy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){KE(()=>{n.callbackScheduled=!1,Zg(n),n.isCheckStableRunning=!0,Zy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Zg(n)}function IL(n){let e=()=>{DL(n)},t=AL++;n._inner=n._inner.fork({name:"angular",properties:{[Yy]:!0,[af]:t,[af+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(RL(c))return r.invokeTask(s,o,a,c);try{return vS(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),_S(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return vS(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NL(c)&&e(),_S(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Zg(n),Zy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Zg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _S(n){n._nesting--,Zy(n)}var Kg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new On;onMicrotaskEmpty=new On;onStable=new On;onError=new On;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function RL(n){return JE(n,"__ignore_ng_zone__")}function NL(n){return JE(n,"__scheduler_tick__")}function JE(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Oi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},PL=new Re("",{providedIn:"root",factory:()=>{let n=Q(Ut),e=Q(Oi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function xS(n,e){return jS(n,e)}function OL(n){return jS(GS,n)}var QE=(xS.required=OL,xS);function LL(){return Ia(Un(),Nt())}function Ia(n,e){return new Li(Qn(n,e))}var Li=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=LL}return n})();function FL(n){return n instanceof Li?n.nativeElement:n}function kL(){return this._results[Symbol.iterator]()}var Jg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new an}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=MO(e);(this._changesDetected=!EO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=kL},UL="ngSkipHydration",BL="ngskiphydration";function eM(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===BL)return!0}return!1}function tM(n){return n.hasAttribute(UL)}function cf(n){return(n.flags&128)===128}function VL(n){if(cf(n))return!0;let e=n.parent;for(;e;){if(cf(n)||eM(e))return!0;e=e.parent}return!1}var nM=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nM||{}),rM=new Map,zL=0;function HL(){return zL++}function GL(n){rM.set(n[Mf],n)}function Qg(n){rM.delete(n[Mf])}var bS="__ngContext__";function no(n,e){Pr(e)?(n[bS]=e[Mf],GL(e)):n[bS]=e}function iM(n){return oM(n[nl])}function sM(n){return oM(n[Nr])}function oM(n){for(;n!==null&&!ri(n);)n=n[Nr];return n}var ey;function aM(n){ey=n}function Df(){if(ey!==void 0)return ey;if(typeof document<"u")return document;throw new Ee(210,!1)}var If=new Re("",{providedIn:"root",factory:()=>jL}),jL="ng",Ky=new Re(""),Bn=new Re("",{providedIn:"platform",factory:()=>"unknown"});var Jy=new Re("",{providedIn:"root",factory:()=>Df().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function WL(){let n=new xs;return Q(Bn)==="browser"&&(n.store=$L(Df(),Q(If))),n}var xs=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:WL});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function $L(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var cM="h",lM="b",ty=function(n){return n.FirstChild="f",n.NextSibling="n",n}(ty||{}),qL="e",XL="t",Qy="c",uM="x",lf="r",YL="i",ZL="n",dM="d";var KL="di";var Ud=new Re(""),fM=!1,hM=new Re("",{providedIn:"root",factory:()=>fM});var ev=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ev||{}),Rf=new Re(""),wS=new Set;function ao(n){wS.has(n)||(wS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ya=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ya||{}),pM=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n})}return n})(),JL=[ya.EarlyRead,ya.Write,ya.MixedReadWrite,ya.Read],QL=(()=>{class n{ngZone=Q(Ut);scheduler=Q(Ma);errorHandler=Q(Oi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Q(Rf,{optional:!0})}execute(){this.executing=!0;for(let t of JL)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[t]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[t](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ev.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n})}return n})(),ny=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s=null){this.impl=e,this.hooks=t,this.once=r,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function tv(n,e){!e?.injector&&kO(tv);let t=e?.injector??Q(Lr);return ao("NgAfterNextRender"),tF(n,t,e,!0)}function eF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tF(n,e,t,r){let i=e.get(pM);i.impl??=e.get(QL);let s=e.get(Rf,null,{optional:!0}),o=t?.phase??ya.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Xy):null,c=new ny(i.impl,eF(n,o),r,a,s?.snapshot(null));return i.impl.register(c),c}var nF="__nghData__",mM=nF,rF="__nghDeferData__",iF=rF,Cg="ngh",sF="nghm",gM=()=>null;function oF(n,e,t=!1){let r=n.getAttribute(Cg);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={},l;if(r!==""){let d=e.get(xs,null,{optional:!0});if(d!==null){let f=d.get(mM,[]);l=d.get(iF,{}),c=f[Number(r)]}}let u={data:c,firstChild:n.firstChild??null};return t&&(u.firstChild=n,Nf(u,0,n.nextSibling)),a?n.setAttribute(Cg,a):n.removeAttribute(Cg),u}function aF(){gM=oF}function nv(n,e,t=!1){return gM(n,e,t)}function cF(n){let e=n._lView;return e[Ye].type===2?null:(tf(e)&&(e=e[kn]),e)}function lF(n){return n.textContent?.replace(/\s/gm,"")}function uF(n){let e=Df(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=lF(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Nf(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function ry(n,e){return n.segmentHeads?.[e]??null}function dF(n,e){let t=n.data,r=t[qL]?.[e]??null;return r===null&&t[Qy]?.[e]&&(r=rv(n,e)),r}function yM(n,e){return n.data[Qy]?.[e]??null}function rv(n,e){let t=yM(n,e)??[],r=0;for(let i of t)r+=i[lf]*(i[uM]??1);return r}function fF(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[dM];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function hl(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[dM];n.disconnectedNodes=t?new Set(t):null}return!!fF(n)?.has(e)}var ni=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ni||{});var Bd;function hF(){if(Bd===void 0&&(Bd=null,Ng.trustedTypes))try{Bd=Ng.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bd}function SS(n){return hF()?.createScriptURL(n)||n}var uf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HS})`}};function Pf(n){return n instanceof uf?n.changingThisBreaksApplicationSecurity:n}function iv(n,e){let t=pF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${HS})`)}return t===e}function pF(n){return n instanceof uf&&n.getTypeName()||null}var mF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vM(n){return n=String(n),n.match(mF)?n:"unsafe:"+n}var Of=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Of||{});function pl(n){let e=xM();return e?e.sanitize(Of.URL,n)||"":iv(n,"URL")?Pf(n):vM(bf(n))}function gF(n){let e=xM();if(e)return SS(e.sanitize(Of.RESOURCE_URL,n)||"");if(iv(n,"ResourceURL"))return SS(Pf(n));throw new Ee(904,!1)}function yF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?gF:pl}function _M(n,e,t){return yF(e,t)(n)}function xM(){let n=Nt();return n&&n[Ri].sanitizer}var vF=/^>|^->|<!--|-->|--!>|<!-$/g,_F=/(<|>)/g,xF="\u200B$1\u200B";function bF(n){return n.replace(vF,e=>e.replace(_F,xF))}function wF(n){return n.ownerDocument.body}function bM(n){return n instanceof Function?n():n}var gs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gs||{}),co=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(co||{}),SF;function sv(n,e){return SF(n,e)}function va(n,e,t,r,i){if(r!=null){let s,o=!1;ri(r)?s=r:Pr(r)&&(o=!0,r=r[Kn]);let a=Or(r);n===0&&t!==null?i==null?AM(e,t,a):df(e,t,a,i||null,!0):n===1&&t!==null?df(e,t,a,i||null,!0):n===2?lv(e,a,o):n===3&&e.destroyNode(a),s!=null&&UF(e,n,s,t,i)}}function wM(n,e){return n.createText(e)}function EF(n,e,t){n.setValue(e,t)}function SM(n,e){return n.createComment(bF(e))}function ov(n,e,t){return n.createElement(e,t)}function MF(n,e){EM(n,e),e[Kn]=null,e[Fr]=null}function TF(n,e,t,r,i,s){r[Kn]=i,r[Fr]=e,Lf(n,r,t,1,i,s)}function EM(n,e){e[Ri].changeDetectionScheduler?.notify(10),Lf(n,e,e[zt],2,null,null)}function AF(n){let e=n[nl];if(!e)return Dg(n[Ye],n);for(;e;){let t=null;if(Pr(e))t=e[nl];else{let r=e[Fn];r&&(t=r)}if(!t){for(;e&&!e[Nr]&&e!==n;)Pr(e)&&Dg(e[Ye],e),e=e[gn];e===null&&(e=n),Pr(e)&&Dg(e[Ye],e),t=e&&e[Nr]}e=t}}function CF(n,e,t,r){let i=Fn+r,s=t.length;r>0&&(t[i-1][Nr]=e),r<s-Fn?(e[Nr]=t[i],tE(t,Fn+r,e)):(t.push(e),e[Nr]=null),e[gn]=t;let o=e[Qs];o!==null&&t!==o&&MM(o,e);let a=e[Ni];a!==null&&a.insertView(n),zg(e),e[ke]|=128}function MM(n,e){let t=n[Sa],r=e[gn];if(Pr(r))n[ke]|=ef.HasTransplantedViews;else{let i=r[gn][_r];e[_r]!==i&&(n[ke]|=ef.HasTransplantedViews)}t===null?n[Sa]=[e]:t.push(e)}function av(n,e){let t=n[Sa],r=t.indexOf(e);t.splice(r,1)}function iy(n,e){if(n.length<=Fn)return;let t=Fn+e,r=n[t];if(r){let i=r[Qs];i!==null&&i!==n&&av(i,r),e>0&&(n[t-1][Nr]=r[Nr]);let s=Yd(n,Fn+e);MF(r[Ye],r);let o=s[Ni];o!==null&&o.detachView(s[Ye]),r[gn]=null,r[Nr]=null,r[ke]&=-129}return r}function TM(n,e){if(!(e[ke]&256)){let t=e[zt];t.destroyNode&&Lf(n,e,t,3,null,null),AF(e)}}function Dg(n,e){if(e[ke]&256)return;let t=xt(null);try{e[ke]&=-129,e[ke]|=256,e[Yn]&&ag(e[Yn]),IF(n,e),DF(n,e),e[Ye].type===1&&e[zt].destroy();let r=e[Qs];if(r!==null&&ri(e[gn])){r!==e[gn]&&av(r,e);let i=e[Ni];i!==null&&i.detachView(n)}Qg(e)}finally{xt(t)}}function DF(n,e){let t=n.cleanup,r=e[Kd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Kd]=null);let i=e[ps];if(i!==null){e[ps]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Jd];if(s!==null){e[Jd]=null;for(let o of s)o.destroy()}}function IF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof il)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Jr(4,a,c);try{c.call(a)}finally{Jr(5,a,c)}}else{Jr(4,i,s);try{s.call(i)}finally{Jr(5,i,s)}}}}}function RF(n,e,t){return NF(n,e.parent,t)}function NF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===ni.None||s===ni.Emulated)return null}return Qn(r,t)}}function df(n,e,t,r,i){n.insertBefore(e,t,r,i)}function AM(n,e,t){n.appendChild(e,t)}function ES(n,e,t,r,i){r!==null?df(n,e,t,r,i):AM(n,e,t)}function CM(n,e){return n.parentNode(e)}function PF(n,e){return n.nextSibling(e)}function OF(n,e,t){return FF(n,e,t)}function LF(n,e,t){return n.type&40?Qn(n,t):null}var FF=LF,MS;function cv(n,e,t,r){let i=RF(n,r,e),s=e[zt],o=r.parent||e[Fr],a=OF(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ES(s,i,t[c],a,!1);else ES(s,i,t,a,!1);MS!==void 0&&MS(s,r,e,t,i)}function Kc(n,e){if(e!==null){let t=e.type;if(t&3)return Qn(e,n);if(t&4)return sy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Kc(n,r);{let i=n[e.index];return ri(i)?sy(-1,i):Or(i)}}else{if(t&128)return Kc(n,e.next);if(t&32)return sv(e,n)()||Or(n[e.index]);{let r=DM(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=eo(n[_r]);return Kc(i,r)}else return Kc(n,e.next)}}}return null}function DM(n,e){if(e!==null){let r=n[_r][Fr],i=e.projection;return r.projection[i]}return null}function sy(n,e){let t=Fn+n+1;if(t<e.length){let r=e[t],i=r[Ye].firstChild;if(i!==null)return Kc(r,i)}return e[Pi]}function lv(n,e,t){n.removeChild(null,e,t)}function IM(n){n.textContent=""}function uv(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&no(Or(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)uv(n,e,t.child,r,i,s,!1),va(e,n,i,a,s);else if(c&32){let l=sv(t,r),u;for(;u=l();)va(e,n,i,u,s);va(e,n,i,a,s)}else c&16?kF(n,e,r,t,i,s):va(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Lf(n,e,t,r,i,s){uv(t,r,n.firstChild,e,i,s,!1)}function kF(n,e,t,r,i,s){let o=t[_r],c=o[Fr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];va(e,n,i,u,s)}else{let l=c,u=o[gn];cf(r)&&(l.flags|=128),uv(n,e,l,u,i,s,!0)}}function UF(n,e,t,r,i){let s=t[Pi],o=Or(t);s!==o&&va(e,n,r,s,i);for(let a=Fn;a<t.length;a++){let c=t[a];Lf(c[Ye],c,n,e,r,s)}}function BF(n,e,t){n.setAttribute(e,"style",t)}function RM(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NM(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&jg(n,e,r),i!==null&&RM(n,e,i),s!==null&&BF(n,e,s)}function VF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var PM="ng-template";function zF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(dv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function dv(n){return n.type===4&&n.value!==PM}function HF(n,e,t){let r=n.type===4&&!t?PM:n.value;return e===r}function GF(n,e,t){let r=4,i=n.attrs,s=i!==null?$F(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Rr(r)&&!Rr(c))return!1;if(o&&Rr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!HF(n,c,t)||c===""&&e.length===1){if(Rr(r))return!1;o=!0}}else if(r&8){if(i===null||!zF(n,i,c,t)){if(Rr(r))return!1;o=!0}}else{let l=e[++a],u=jF(c,i,dv(n),t);if(u===-1){if(Rr(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Rr(r))return!1;o=!0}}}}return Rr(r)||o}function Rr(n){return(n&1)===0}function jF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return qF(e,n)}function WF(n,e,t=!1){for(let r=0;r<e.length;r++)if(GF(n,e[r],t))return!0;return!1}function $F(n){for(let e=0;e<n.length;e++){let t=n[e];if(FE(t))return e}return n.length}function qF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function TS(n,e){return n?":not("+e.trim()+")":e}function XF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Rr(o)&&(e+=TS(s,i),i=""),r=o,s=s||!Rr(r);t++}return i!==""&&(e+=TS(s,i)),e}function YF(n){return n.map(XF).join(",")}function ZF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Rr(i))break;i=s}r++}return{attrs:e,classes:t}}var lo={};function yn(n=1){OM(kr(),Nt(),Vy()+n,!1)}function OM(n,e,t,r){if(!r)if((e[ke]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Hd(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Gd(e,s,0,t)}to(t)}function vt(n,e=nt.Default){let t=Nt();if(t===null)return Ve(n,e);let r=Un();return jE(r,t,vr(n),e)}function LM(){let n="invalid";throw new Error(n)}function FM(n,e,t,r,i,s){let o=xt(null);try{let a=null;i&gs.SignalBased&&(a=e[r][ra]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gs.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):mE(e,a,r,s)}finally{xt(o)}}function KF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)to(~i);else{let s=i,o=t[++r],a=t[++r];sL(o,s);let c=e[s];a(2,c)}}}finally{to(-1)}}function Ff(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Kn]=i,d[ke]=r|4|128|8|64|1024,(l!==null||n&&n[ke]&2048)&&(d[ke]|=2048),xE(d),d[gn]=d[Da]=n,d[ti]=t,d[Ri]=o||n&&n[Ri],d[zt]=a||n&&n[zt],d[wa]=c||n&&n[wa]||null,d[Fr]=s,d[Mf]=HL(),d[ei]=u,d[fE]=l,d[_r]=e.type==2?n[_r]:d,d}function kf(n,e,t,r,i){let s=n.data[e];if(s===null)s=JF(n,e,t,r,i),iL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=tL();s.injectorIndex=o===null?-1:o.injectorIndex}return fl(s,!0),s}function JF(n,e,t,r,i){let s=SE(),o=EE(),a=o?s:s&&s.parent,c=n.data[e]=sk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function kM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function UM(n,e,t,r,i){let s=Vy(),o=r&2;try{to(-1),o&&e.length>kn&&OM(n,e,kn,!1),Jr(o?2:0,i),t(r,i)}finally{to(s),Jr(o?3:1,i)}}function BM(n,e,t){if(pE(e)){let r=xt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{xt(r)}}}function VM(n,e,t){wE()&&(dk(n,e,t,Qn(t,e)),(t.flags&64)===64&&qM(n,e,t))}function zM(n,e,t=Qn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function HM(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function fv(n,e,t,r,i,s,o,a,c,l,u){let d=kn+r,f=d+i,h=QF(d,f),g=typeof l=="function"?l():l;return h[Ye]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function QF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:lo);return t}function ek(n,e,t,r){let s=r.get(hM,fM)||t===ni.ShadowDom,o=n.selectRootElement(e,s);return tk(o),o}function tk(n){GM(n)}var GM=()=>null;function nk(n){tM(n)?IM(n):uF(n)}function rk(){GM=nk}function ik(n,e,t,r){let i=KM(e);i.push(t),n.firstCreatePass&&JM(n).push(r,i.length-1)}function sk(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return dl()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function AS(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=gs.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?CS(r,t,l,a,c):CS(r,t,l,a)}return r}function CS(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function ok(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=t?t.get(d):null,h=f?f.inputs:null,g=f?f.outputs:null;c=AS(0,d.inputs,u,c,h),l=AS(1,d.outputs,u,l,g);let y=c!==null&&o!==null&&!dv(e)?wk(c,u,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function ak(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function jM(n,e,t,r,i,s,o,a){let c=Qn(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(hv(n,t,u,r,i),cl(e)&&ck(t,e.index)):e.type&3?(r=ak(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ck(n,e){let t=vs(e,n);t[ke]&16||(t[ke]|=64)}function WM(n,e,t,r){if(wE()){let i=r===null?null:{"":-1},s=hk(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&$M(n,e,t,o,i,a),i&&pk(t,r,i)}t.mergedAttrs=jy(t.mergedAttrs,t.attrs)}function $M(n,e,t,r,i,s){for(let l=0;l<r.length;l++)_L(VE(t,e),n,r[l].type);gk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=kM(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=jy(t.mergedAttrs,u.hostAttrs),yk(n,t,e,c,u),mk(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}ok(n,t,s)}function lk(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;uk(o)!=a&&o.push(a),o.push(t,r,s)}}function uk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function dk(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;cl(t)&&vk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||VE(t,e),no(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Ea(e,n,a,t);if(no(l,e),o!==null&&bk(e,a-i,l,c,t,o),ll(c)){let u=vs(t.index,e);u[ti]=Ea(e,n,a,t)}}}function qM(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=oL();try{to(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Gg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&fk(c,l)}}finally{to(-1),Gg(o)}}function fk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(WF(e,o.selectors,!1))if(r||(r=[]),ll(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;oy(n,e,c)}else r.unshift(o),oy(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function oy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function pk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Ee(-301,!1);r.push(e[i],s)}}}function mk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ll(e)&&(t[""]=n)}}function gk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yk(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ba(i.type,!0)),o=new il(s,ll(i),vt);n.blueprint[r]=o,t[r]=o,lk(n,e,r,kM(n,t,i.hostVars,lo),i)}function XM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vk(n,e,t){let r=Qn(e,n),i=HM(t),s=n[Ri].rendererFactory,o=Uf(n,Ff(n,i,null,XM(t),r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=o}function _k(n,e,t,r,i,s){let o=Qn(n,e);xk(e[zt],o,s,n.value,t,r,i)}function xk(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?bf(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function bk(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];FM(r,t,c,l,u,d)}}function wk(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function YM(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ZM(n,e){let t=n.contentQueries;if(t!==null){let r=xt(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ky(s),a.contentQueries(2,e[o],o)}}}finally{xt(r)}}}function Uf(n,e){return n[nl]?n[cS][Nr]=e:n[nl]=e,n[cS]=e,e}function ay(n,e,t){ky(0);let r=xt(null);try{e(n,t)}finally{xt(r)}}function KM(n){return n[Kd]??=[]}function JM(n){return n.cleanup??=[]}function QM(n,e){let t=n[wa],r=t?t.get(Oi,null):null;r&&r.handleError(e)}function hv(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];FM(u,l,r,a,c,i)}}function Sk(n,e,t){let r=jO(e,n);EF(n[zt],r,t)}function Ek(n,e){let t=vs(e,n),r=t[Ye];Mk(r,t);let i=t[Kn];i!==null&&t[ei]===null&&(t[ei]=nv(i,t[wa])),pv(r,t,t[ti])}function Mk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pv(n,e,t){Uy(e);try{let r=n.viewQuery;r!==null&&ay(1,r,t);let i=n.template;i!==null&&UM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ni]?.finishViewCreation(n),n.staticContentQueries&&ZM(n,e),n.staticViewQueries&&ay(2,n.viewQuery,t);let s=n.components;s!==null&&Tk(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ke]&=-5,By()}}function Tk(n,e){for(let t=0;t<e.length;t++)Ek(n,e[t])}function Ak(n,e,t,r){let i=xt(null);try{let s=e.tView,a=n[ke]&4096?4096:16,c=Ff(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Qs]=l;let u=n[Ni];return u!==null&&(c[Ni]=u.createEmbeddedView(s)),pv(s,c,t),c}finally{xt(i)}}function DS(n,e){return!e||e.firstChild===null||cf(n)}function Ck(n,e,t,r=!0){let i=e[Ye];if(CF(i,e,n,t),r){let o=sy(t,n),a=e[zt],c=CM(a,n[Pi]);c!==null&&TF(i,n[Fr],a,e,c,o)}let s=e[ei];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ff(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Or(s)),ri(s)&&Dk(s,r);let o=t.type;if(o&8)ff(n,e,t.child,r);else if(o&32){let a=sv(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=DM(e,t);if(Array.isArray(a))r.push(...a);else{let c=eo(e[_r]);ff(c[Ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Dk(n,e){for(let t=Fn;t<n.length;t++){let r=n[t],i=r[Ye].firstChild;i!==null&&ff(r[Ye],r,i,e)}n[Pi]!==n[Kn]&&e.push(n[Pi])}var eT=[];function Ik(n){return n[Yn]??Rk(n)}function Rk(n){let e=eT.pop()??Object.create(Pk);return e.lView=n,e}function Nk(n){n.lView[Yn]!==n&&(n.lView=null,eT.push(n))}var Pk=Dt(ae({},md),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Af(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function Ok(n){let e=n[Yn]??Object.create(Lk);return e.lView=n,e}var Lk=Dt(ae({},md),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=eo(n.lView);for(;e&&!tT(e[Ye]);)e=eo(e);e&&Ly(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function tT(n){return n.type!==2}function nT(n){if(n[Jd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Jd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ke]&8192)}}var Fk=100;function rT(n,e=!0,t=0){let i=n[Ri].rendererFactory,s=!1;s||i.begin?.();try{kk(n,t)}catch(o){throw e&&QM(n,o),o}finally{s||i.end?.()}}function kk(n,e){let t=ME();try{uS(!0),cy(n,e);let r=0;for(;Tf(n);){if(r===Fk)throw new Ee(103,!1);r++,cy(n,1)}}finally{uS(t)}}function Uk(n,e,t,r){let i=e[ke];if((i&256)===256)return;let s=!1,o=!1;Uy(e);let a=!0,c=null,l=null;s||(tT(n)?(l=Ik(e),c=sg(l)):gw()===null?(a=!1,l=Ok(e),c=sg(l)):e[Yn]&&(ag(e[Yn]),e[Yn]=null));try{xE(e),rL(n.bindingStartIndex),t!==null&&UM(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&Hd(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Gd(e,h,0,null),Mg(e,0)}if(o||Bk(e),nT(e),iT(e,0),n.contentQueries!==null&&ZM(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&Hd(e,h)}else{let h=n.contentHooks;h!==null&&Gd(e,h,1),Mg(e,1)}KF(n,e);let d=n.components;d!==null&&oT(e,d,0);let f=n.viewQuery;if(f!==null&&ay(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&Hd(e,h)}else{let h=n.viewHooks;h!==null&&Gd(e,h,2),Mg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Eg]){for(let h of e[Eg])h();e[Eg]=null}s||(e[ke]&=-73)}catch(u){throw s||Af(e),u}finally{l!==null&&(xw(l,c),a&&Nk(l)),By()}}function iT(n,e){for(let t=iM(n);t!==null;t=sM(t))for(let r=Fn;r<t.length;r++){let i=t[r];sT(i,e)}}function Bk(n){for(let e=iM(n);e!==null;e=sM(e)){if(!(e[ke]&ef.HasTransplantedViews))continue;let t=e[Sa];for(let r=0;r<t.length;r++){let i=t[r];Ly(i)}}}function Vk(n,e,t){let r=vs(e,n);sT(r,t)}function sT(n,e){Oy(n)&&cy(n,e)}function cy(n,e){let r=n[Ye],i=n[ke],s=n[Yn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&og(s)),o||=!1,s&&(s.dirty=!1),n[ke]&=-9217,o)Uk(r,n,r.template,n[ti]);else if(i&8192){nT(n),iT(n,1);let a=r.components;a!==null&&oT(n,a,1)}}function oT(n,e,t){for(let r=0;r<e.length;r++)Vk(n,e[r],t)}function mv(n,e){let t=ME()?64:1088;for(n[Ri].changeDetectionScheduler?.notify(e);n;){n[ke]|=t;let r=eo(n);if(tf(n)&&!r)return n;n=r}return null}var ro=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ye];return ff(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ti]}get dirty(){return!!(this._lView[ke]&9280)||!!this._lView[Yn]?.dirty}set context(e){this._lView[ti]=e}get destroyed(){return(this._lView[ke]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(ri(e)){let t=e[Qd],r=t?t.indexOf(this):-1;r>-1&&(iy(e,r),Yd(t,r))}this._attachedToViewContainer=!1}TM(this._lView[Ye],this._lView)}onDestroy(e){bE(this._lView,e)}markForCheck(){mv(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Ly(this._cdRefInjectingView||this._lView)}detach(){this._lView[ke]&=-129}reattach(){zg(this._lView),this._lView[ke]|=128}detectChanges(){this._lView[ke]|=1024,rT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=tf(this._lView),t=this._lView[Qs];t!==null&&!e&&av(t,this._lView),EM(this._lView[Ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=e;let t=tf(this._lView),r=this._lView[Qs];r!==null&&!t&&MM(r,this._lView),zg(this._lView)}},io=(()=>{class n{static __NG_ELEMENT_ID__=Gk}return n})(),zk=io,Hk=class extends zk{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ak(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ro(i)}};function Gk(){return gv(Un(),Nt())}function gv(n,e){return n.type&4?new Hk(e,n,Ia(n,e)):null}var jk=new RegExp(`^(\\d+)*(${lM}|${cM})*(.*)`);function Wk(n){let e=n.match(jk),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function $k(n){return!n.prev&&n.parent?.type===8}function Ig(n){return n.index-kn}function qk(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Bf(n,e,t,r){let i=Ig(r),s=qk(n,i);if(s===void 0){let o=n.data[ZL];if(o?.[i])s=Yk(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if($k(r)){let l=Ig(r.parent);s=ry(n,l)}else{let l=Qn(c,t);if(a)s=l.firstChild;else{let u=Ig(c),d=ry(n,u);if(c.type===2&&d){let h=rv(n,u)+1;s=Vf(h,d)}else s=l.nextSibling}}}}return s}function Vf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function Xk(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case ty.FirstChild:t=t.firstChild;break;case ty.NextSibling:t=t.nextSibling;break}}return t}function Yk(n,e){let[t,...r]=Wk(n),i;if(t===cM)i=e[_r][Kn];else if(t===lM)i=wF(e[_r][Kn]);else{let s=Number(t);i=Or(e[s+kn])}return Xk(i,r)}var Zk=!1;function Kk(n){Zk=n}function Jk(n){let e=n[ei];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[zt];for(let s of r.values())Qk(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Qk(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-kn);i&&lv(n,i,!1)}}function aT(n){let e=n[rl]??[],r=n[gn][zt],i=[];for(let s of e)s.data[KL]!==void 0?i.push(s):e2(s,r);n[rl]=i}function e2(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[lf];for(;t<i;){let s=r.nextSibling;lv(e,r,!1),r=s,t++}}}function cT(n){aT(n);let e=n[Kn];Pr(e)&&hf(e);for(let t=Fn;t<n.length;t++)hf(n[t])}function hf(n){Jk(n);let e=n[Ye];for(let t=kn;t<e.bindingStartIndex;t++)if(ri(n[t])){let r=n[t];cT(r)}else Pr(n[t])&&hf(n[t])}function t2(n){let e=n._views;for(let t of e){let r=cF(t);r!==null&&r[Kn]!==null&&(Pr(r)?hf(r):cT(r))}}function n2(n,e){let t=[];for(let r of e)for(let i=0;i<(r[uM]??1);i++){let s={data:r,firstChild:null};r[lf]>0&&(s.firstChild=n,n=Vf(r[lf],n)),t.push(s)}return[n,t]}var lT=()=>null;function r2(n,e){let t=n[rl];return!e||t===null||t.length===0?null:t[0].data[YL]===e?t.shift():(aT(n),null)}function i2(){lT=r2}function IS(n,e){return lT(n,e)}var ly=class{},pf=class{},uy=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Ln(e)}.`)}},Ta=class{static NULL=new uy},Aa=class{},ml=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>s2()}return n})();function s2(){let n=Nt(),e=Un(),t=vs(e.index,n);return(Pr(t)?t:n)[zt]}var o2=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>null})}return n})();function dy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=nS(i,a);else if(s==2){let c=a,l=e[++o];r=nS(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var mf=class extends Ta{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ms(e);return new Ca(t,this.ngModule)}};function RS(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gs.None;e?t.push({propName:o,templateName:r,isSignal:(a&gs.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function a2(n){let e=n.toLowerCase();return e==="svg"?HO:e==="math"?GO:null}var Ca=class extends pf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=RS(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return RS(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=xt(null);try{i=i||this.ngModule;let o=i instanceof Zn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Wg(e,o):e,c=a.get(Aa,null);if(c===null)throw new Ee(407,!1);let l=a.get(o2,null),u=a.get(Ma,null),d={rendererFactory:c,sanitizer:l,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?ek(f,r,this.componentDef.encapsulation,a):ov(f,h,a2(h)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let m=null;g!==null&&(m=nv(g,a,!0));let p=fv(0,null,null,1,0,null,null,null,null,null,null),E=Ff(null,p,null,y,null,null,d,f,a,null,m);Uy(E);let _,x,C=null;try{let T=this.componentDef,D,I=null;T.findHostDirectiveDefs?(D=[],I=new Map,T.findHostDirectiveDefs(T,D,I),D.push(T)):D=[T];let S=c2(E,g);C=l2(S,g,T,D,E,d,f),x=_E(p,kn),g&&f2(f,T,g,r),t!==void 0&&h2(x,this.ngContentSelectors,t),_=d2(C,T,D,I,E,[p2]),pv(p,E,null)}catch(T){throw C!==null&&Qg(C),Qg(E),T}finally{By()}return new fy(this.componentType,_,Ia(x,E),E,x)}finally{xt(s)}}},fy=class extends ly{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new ro(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;hv(s[Ye],s,i,e,t),this.previousInputValues.set(e,t);let o=vs(this._tNode.index,s);mv(o,1)}}get injector(){return new Ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function c2(n,e){let t=n[Ye],r=kn;return n[r]=e,kf(t,r,2,"#host",null)}function l2(n,e,t,r,i,s,o){let a=i[Ye];u2(r,n,e,o);let c=null;e!==null&&(c=nv(e,i[wa]));let l=s.rendererFactory.createRenderer(e,t),u=Ff(i,HM(t),null,XM(t),i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&oy(a,n,r.length-1),Uf(i,u),i[n.index]=u}function u2(n,e,t,r){for(let i of n)e.mergedAttrs=jy(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(dy(e,e.mergedAttrs,!0),t!==null&&NM(r,t,e))}function d2(n,e,t,r,i,s){let o=Un(),a=i[Ye],c=Qn(o,i);$M(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,f=Ea(i,a,d,o);no(f,i)}qM(a,i,o),c&&no(c,i);let l=Ea(i,a,o.directiveStart+o.componentOffset,o);if(n[ti]=i[ti]=l,s!==null)for(let u of s)u(l,e);return BM(a,o,i),l}function f2(n,e,t,r){if(r)jg(n,t,["ng-version","19.0.4"]);else{let{attrs:i,classes:s}=ZF(e.selectors[0]);i&&jg(n,t,i),s&&s.length>0&&RM(n,t,s.join(" "))}}function h2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}function p2(){let n=Un();Gy(Nt()[Ye],n)}var bs=(()=>{class n{static __NG_ELEMENT_ID__=m2}return n})();function m2(){let n=Un();return dT(n,Nt())}var g2=bs,uT=class extends g2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ia(this._hostTNode,this._hostLView)}get injector(){return new Ks(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wy(this._hostTNode,this._hostLView);if(kE(e)){let t=sf(e,this._hostLView),r=rf(e),i=t[Ye].data[r+8];return new Ks(i,t)}else return new Ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=NS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=IS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,DS(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!UO(e),a;if(o)a=t;else{let g=t||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new Ca(ms(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?l:this.parentInjector).get(Zn,null);y&&(s=y)}let u=ms(c.componentType??{}),d=IS(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,DS(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($O(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[gn],l=new uT(c,c[Fr],c[gn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Ck(o,i,s,r),e.attachToViewContainerRef(),tE(Rg(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=NS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=iy(this._lContainer,t);r&&(Yd(Rg(this._lContainer),t),TM(r[Ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=iy(this._lContainer,t);return r&&Yd(Rg(this._lContainer),t)!=null?new ro(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function NS(n){return n[Qd]}function Rg(n){return n[Qd]||(n[Qd]=[])}function dT(n,e){let t,r=e[n.index];return ri(r)?t=r:(t=YM(r,e,null,n),e[n.index]=t,Uf(e,t)),fT(t,e,n,r),new uT(t,n,e)}function y2(n,e){let t=n[zt],r=t.createComment(""),i=Qn(e,n),s=CM(t,i);return df(t,s,r,PF(t,i),!1),r}var fT=hT,yv=()=>!1;function v2(n,e,t){return yv(n,e,t)}function hT(n,e,t,r){if(n[Pi])return;let i;t.type&8?i=Or(r):i=y2(e,t),n[Pi]=i}function _2(n,e,t){if(n[Pi]&&n[rl])return!0;let r=t[ei],i=e.index-kn;if(!r||VL(e)||hl(r,i))return!1;let o=ry(r,i),a=r.data[Qy]?.[i],[c,l]=n2(o,a);return n[Pi]=c,n[rl]=l,!0}function x2(n,e,t,r){yv(n,t,e)||hT(n,e,t,r)}function b2(){fT=x2,yv=_2}var hy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},py=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)vv(e,t).matches!==null&&this.queries[t].setDirty()}},my=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=D2(e):this.predicate=e}},gy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,w2(t,s)),this.matchTNodeWithReadOption(e,t,jd(t,e,s,!1,!1))}else r===io?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Li||i===bs||i===io&&t.type&4)this.addMatch(t.index,-2);else{let s=jd(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function w2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function S2(n,e){return n.type&11?Ia(n,e):n.type&4?gv(n,e):null}function E2(n,e,t,r){return t===-1?S2(e,n):t===-2?M2(n,e,r):Ea(n,n[Ye],t,e)}function M2(n,e,t){if(t===Li)return Ia(e,n);if(t===io)return gv(e,n);if(t===bs)return dT(e,n)}function pT(n,e,t,r){let i=e[Ni].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(E2(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function vy(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=pT(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Fn;d<u.length;d++){let f=u[d];f[Qs]===f[gn]&&vy(f[Ye],f,l,r)}if(u[Sa]!==null){let d=u[Sa];for(let f=0;f<d.length;f++){let h=d[f];vy(h[Ye],h,l,r)}}}}}return r}function T2(n,e){return n[Ni].queries[e].queryList}function A2(n,e,t){let r=new Jg((t&4)===4);return ik(n,e,r,r.destroy),(e[Ni]??=new py).queries.push(new hy(r))-1}function C2(n,e,t,r){let i=kr();if(i.firstCreatePass){let s=Un();I2(i,new my(e,t,r),s.index),R2(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return A2(i,Nt(),t)}function D2(n){return n.split(",").map(e=>e.trim())}function I2(n,e,t){n.queries===null&&(n.queries=new gy),n.queries.track(new yy(e,t))}function R2(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function vv(n,e){return n.queries.getByIndex(e)}function N2(n,e){let t=n[Ye],r=vv(t,e);return r.crossesNgTemplate?vy(t,n,e,[]):pT(t,n,r,e)}var ys=class{},sl=class{};var _y=class extends ys{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new mf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=iE(e);this._bootstrapComponents=bM(s.bootstrap),this._r3Injector=qE(e,t,[{provide:ys,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver},...r],Ln(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xy=class extends sl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _y(this.moduleType,e,[])}};var gf=class extends ys{injector;componentFactoryResolver=new mf(this);instance=null;constructor(e){super();let t=new tl([...e.providers,{provide:ys,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver}],e.parent||Ny(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zf(n,e,t=null){return new gf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var P2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cE(!1,t.type),i=r.length>0?zf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ae({token:n,providedIn:"environment",factory:()=>new n(Ve(Zn))})}return n})();function ln(n){return ol(()=>{let e=mT(n),t=Dt(ae({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(P2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ni.Emulated,styles:n.styles||Kr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ao("NgStandalone"),gT(t);let r=n.dependencies;return t.directiveDefs=OS(r,!1),t.pipeDefs=OS(r,!0),t.id=F2(t),t})}function O2(n){return ms(n)||sE(n)}function L2(n){return n!==null}function gl(n){return ol(()=>({type:n.type,bootstrap:n.bootstrap||Kr,declarations:n.declarations||Kr,imports:n.imports||Kr,exports:n.exports||Kr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PS(n,e){if(n==null)return el;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=gs.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==gs.None?[r,a]:r,e[s]=o):t[s]=r}return t}function uo(n){return ol(()=>{let e=mT(n);return gT(e),e})}function mT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||el,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PS(n.inputs,e),outputs:PS(n.outputs),debugInfo:null}}function gT(n){n.features?.forEach(e=>e(n))}function OS(n,e){if(!n)return null;let t=e?oE:O2;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(L2)}function F2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _v(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}function yT(n){return U2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function k2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function U2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vT(n,e,t){return n[e]=t}function B2(n,e){return n[e]}function Hf(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function yl(n){return(n.flags&32)===32}function V2(n,e,t,r,i,s,o,a,c){let l=e.consts,u=kf(e,n,4,o||null,a||null);WM(e,t,u,nf(l,c)),Gy(e,u);let d=u.tView=fv(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function z2(n,e,t,r,i,s,o,a,c,l){let u=t+kn,d=e.firstCreatePass?V2(u,e,n,r,i,s,o,a,c):e.data[u];fl(d,!1);let f=_T(e,n,d,t);Hy()&&cv(e,n,f,d),no(f,n);let h=YM(f,n,f,d);return n[u]=h,Uf(n,h),v2(h,d,n),Py(d)&&VM(e,n,d),c!=null&&zM(n,d,l),d}function ws(n,e,t,r,i,s,o,a){let c=Nt(),l=kr(),u=nf(l.consts,s);return z2(c,l,n,e,t,r,i,u,o,a),ws}var _T=xT;function xT(n,e,t,r){return _s(!0),e[zt].createComment("")}function H2(n,e,t,r){let i=e[ei],s=!i||dl()||yl(t)||hl(i,r);if(_s(s),s)return xT(n,e,t,r);let o=i.data[XL]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=Bf(i,n,e,t);Nf(i,r,a);let c=rv(i,r);return Vf(c,a)}function G2(){_T=H2}var Gf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var bT=new Re("");function vl(n){return!!n&&typeof n.then=="function"}function wT(n){return!!n&&typeof n.subscribe=="function"}var Ra=new Re("");var ST=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Q(Ra,{optional:!0})??[];injector=Q(Lr);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Jn(this.injector,i);if(vl(s))t.push(s);else if(wT(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j2=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>new by})}return n})(),by=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},fo=new Re("");function W2(){Mw(()=>{throw new Ee(600,!1)})}function $2(n){return n.isBoundToModule}var q2=10;function X2(n,e,t){try{let r=t();return vl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Q(PL);afterRenderManager=Q(pM);zonelessEnabled=Q(Cf);rootEffectScheduler=Q(j2);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new an;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Q(oo).hasPendingTasks.pipe(ot(t=>!t));constructor(){Q(Rf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Q(Zn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof pf;if(!this._injector.get(ST).done){let f=!i&&aE(t),h=!1;throw new Ee(405,h)}let o;i?o=t:o=this._injector.get(Ta).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=$2(o)?void 0:this._injector.get(ys),c=r||o.selector,l=o.create(Lr.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(bT,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Wd(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(ev.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new Ee(101,!1);let t=xt(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,xt(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Aa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<q2;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Y2(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Tf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Wd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fo,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Y2(n,e,t,r){if(!t&&!Tf(n))return;rT(n,e,t&&!r?0:1)}function xv(n,e,t,r){let i=Nt(),s=Fy();if(Hf(i,s,e)){let o=kr(),a=zy();_k(a,i,n,e,t,r)}return xv}function ET(n,e,t,r){return Hf(n,Fy(),t)?e+bf(t)+r:lo}function er(n,e,t){let r=Nt(),i=Fy();if(Hf(r,i,e)){let s=kr(),o=zy();jM(s,o,r,n,e,r[zt],t,!1)}return er}function LS(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";hv(n,t,s[o],o,r)}function Z2(n,e,t,r,i,s){let o=e.consts,a=nf(o,i),c=kf(e,n,2,r,a);return WM(e,t,c,nf(o,s)),c.attrs!==null&&dy(c,c.attrs,!1),c.mergedAttrs!==null&&dy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ne(n,e,t,r){let i=Nt(),s=kr(),o=kn+n,a=i[zt],c=s.firstCreatePass?Z2(o,s,i,e,t,r):s.data[o],l=MT(s,i,c,a,e,n);i[o]=l;let u=Py(c);return fl(c,!0),NM(a,l,c),!yl(c)&&Hy()&&cv(s,i,l,c),YO()===0&&no(l,i),ZO(),u&&(VM(s,i,c),BM(s,c,i)),r!==null&&zM(i,c),Ne}function Ce(){let n=Un();EE()?nL():(n=n.parent,fl(n,!1));let e=n;JO(e)&&eL(),KO();let t=kr();return t.firstCreatePass&&(Gy(t,n),pE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fL(e)&&LS(t,e,Nt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hL(e)&&LS(t,e,Nt(),e.stylesWithoutHost,!1),Ce}function Vn(n,e,t,r){return Ne(n,e,t,r),Ce(),Vn}var MT=(n,e,t,r,i,s)=>(_s(!0),ov(r,i,PE()));function K2(n,e,t,r,i,s){let o=e[ei],a=!o||dl()||yl(t)||hl(o,s);if(_s(a),a)return ov(r,i,PE());let c=Bf(o,n,e,t);return yM(o,s)&&Nf(o,s,c.nextSibling),o&&(eM(t)||tM(c))&&cl(t)&&(QO(t),IM(c)),c}function J2(){MT=K2}var Q2=(n,e,t,r)=>(_s(!0),SM(e[zt],""));function eU(n,e,t,r){let i,s=e[ei],o=!s||dl()||hl(s,r)||yl(t);if(_s(o),o)return SM(e[zt],"");let a=Bf(s,n,e,t),c=dF(s,r);return Nf(s,r,a),i=Vf(c,a),i}function tU(){Q2=eU}var yf="en-US";var nU=yf;function rU(n){typeof n=="string"&&(nU=n.toLowerCase().replace(/_/g,"-"))}var iU=(n,e,t)=>{};function bv(n,e,t,r){let i=Nt(),s=kr(),o=Un();return oU(s,i,i[zt],o,n,e,r),bv}function sU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Kd],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function oU(n,e,t,r,i,s,o){let a=Py(r),l=n.firstCreatePass&&JM(n),u=e[ti],d=KM(e),f=!0;if(r.type&3||o){let y=Qn(r,e),m=o?o(y):y,p=d.length,E=o?x=>o(Or(x[r.index])):r.index,_=null;if(!o&&a&&(_=sU(n,e,i,r.index)),_!==null){let x=_.__ngLastListenerFn__||_;x.__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,f=!1}else{s=kS(r,e,u,s),iU(y,i,s);let x=t.listen(m,i,s);d.push(s,x),l&&l.push(i,E,p,p+1)}}else s=kS(r,e,u,s);let h=r.outputs,g;if(f&&h!==null&&(g=h[i])){let y=g.length;if(y)for(let m=0;m<y;m+=2){let p=g[m],E=g[m+1],C=e[p][E].subscribe(s),T=d.length;d.push(s,C),l&&l.push(i,r.index,T,-(T+1))}}}function FS(n,e,t,r){let i=xt(null);try{return Jr(6,e,t),t(r)!==!1}catch(s){return QM(n,s),!1}finally{Jr(7,e,t),xt(i)}}function kS(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?vs(n.index,e):e;mv(o,5);let a=FS(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=FS(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function jf(n=1){return cL(n)}function wv(n,e,t){return TT(n,"",e,"",t),wv}function TT(n,e,t,r,i){let s=Nt(),o=ET(s,e,t,r);if(o!==lo){let a=kr(),c=zy();jM(a,c,s,n,o,s[zt],i,!1)}return TT}function AT(n,e,t,r){C2(n,e,t,r)}function CT(n){let e=Nt(),t=kr(),r=AE();ky(r+1);let i=vv(t,r);if(n.dirty&&WO(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=N2(e,r);n.reset(s,FL),n.notifyOnChanges()}return!0}return!1}function DT(){return T2(Nt(),AE())}function Fe(n,e=""){let t=Nt(),r=kr(),i=n+kn,s=r.firstCreatePass?kf(r,i,1,e,null):r.data[i],o=IT(r,t,s,e,n);t[i]=o,Hy()&&cv(r,t,o,s),fl(s,!1)}var IT=(n,e,t,r,i)=>(_s(!0),wM(e[zt],r));function aU(n,e,t,r,i){let s=e[ei],o=!s||dl()||yl(t)||hl(s,i);return _s(o),o?wM(e[zt],r):Bf(s,n,e,t)}function cU(){IT=aU}function _l(n){return si("",n,""),_l}function si(n,e,t){let r=Nt(),i=ET(r,n,e,t);return i!==lo&&Sk(r,Vy(),i),si}function RT(n,e,t){let r=TE()+n,i=Nt();return i[r]===lo?vT(i,r,t?e.call(t):e()):B2(i,r)}function NT(n,e,t,r){return uU(Nt(),TE(),n,e,t,r)}function lU(n,e){let t=n[e];return t===lo?void 0:t}function uU(n,e,t,r,i,s){let o=e+t;return Hf(n,o,i)?vT(n,o+1,s?r.call(s,i):r(i)):lU(n,o+1)}var wy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wf=(()=>{class n{compileModuleSync(t){return new xy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=iE(t),s=bM(i.declarations).reduce((o,a)=>{let c=ms(a);return c&&o.push(new Ca(c)),o},[]);return new wy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dU=(()=>{class n{zone=Q(Ut);changeDetectionScheduler=Q(Ma);applicationRef=Q(ii);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fU=new Re("",{factory:()=>!1});function PT({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ut(Dt(ae({},LT()),{scheduleInRootZone:t})),[{provide:Ut,useFactory:n},{provide:Js,multi:!0,useFactory:()=>{let r=Q(dU,{optional:!0});return()=>r.initialize()}},{provide:Js,multi:!0,useFactory:()=>{let r=Q(hU);return()=>{r.initialize()}}},e===!0?{provide:YE,useValue:!0}:[],{provide:ZE,useValue:t??XE}]}function OT(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=PT({ngZoneFactory:()=>{let i=LT(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ao("NgZone_CoalesceEvent"),new Ut(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return so([{provide:fU,useValue:!0},{provide:Cf,useValue:!1},r])}function LT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hU=(()=>{class n{subscription=new $t;initialized=!1;zone=Q(Ut);pendingTasks=Q(oo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pU=(()=>{class n{appRef=Q(ii);taskService=Q(oo);ngZone=Q(Ut);zonelessEnabled=Q(Cf);tracing=Q(Rf,{optional:!0});disableScheduling=Q(YE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $t;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(af):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(ZE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yS:KE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(af+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mU(){return typeof $localize<"u"&&$localize.locale||yf}var Sv=new Re("",{providedIn:"root",factory:()=>Q(Sv,nt.Optional|nt.SkipSelf)||mU()});var Sy=new Re("");function Vd(n){return!n.moduleRef}function gU(n){let e=Vd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ut);return t.run(()=>{Vd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Oi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Vd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Sy);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Sy);o.add(s),n.moduleRef.onDestroy(()=>{Wd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return X2(r,t,()=>{let s=e.get(ST);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Sv,yf);if(rU(o||yf),Vd(n)){let a=e.get(ii);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return yU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function yU(n,e){let t=n.injector.get(ii);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ee(-403,!1);e.push(n)}var $d=null;function vU(n=[],e){return Lr.create({name:e,providers:[{provide:Ef,useValue:"platform"},{provide:Sy,useValue:new Set([()=>$d=null])},...n]})}function _U(n=[]){if($d)return $d;let e=vU(n);return $d=e,W2(),xU(e),e}function xU(n){let e=n.get(Ky,null);Jn(n,()=>{e?.forEach(t=>t())})}var Na=(()=>{class n{static __NG_ELEMENT_ID__=bU}return n})();function bU(n){return wU(Un(),Nt(),(n&16)===16)}function wU(n,e,t){if(cl(n)&&!t){let r=vs(n.index,e);return new ro(r,r)}else if(n.type&175){let r=e[_r];return new ro(r,e)}return null}var Ey=class{constructor(){}supports(e){return yT(e)}create(e){return new My(e)}},SU=(n,e)=>e,My=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||SU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<US(r,i,s)?t:r,a=US(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<s.length?s[f]:s[f]=0,g=h+f;u<=g&&g<l&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yT(e))throw new Ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,k2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Ty(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ty=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Ay=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ay,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function US(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function BS(){return new Ev([new Ey])}var Ev=(()=>{class n{factories;static \u0275prov=Ae({token:n,providedIn:"root",factory:BS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||BS()),deps:[[n,new Dy,new Sf]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Ee(901,!1)}}return n})();function FT(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=_U(r),s=[PT({}),{provide:Ma,useExisting:pU},...t||[]],o=new gf({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return gU({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var VS=!1;function EU(){VS||(VS=!0,aF(),J2(),cU(),tU(),G2(),b2(),i2(),rk())}function MU(n,e){return n.whenStable()}function kT(){let n=[{provide:Ud,useFactory:()=>{let e=!0;return e=!!Q(xs,{optional:!0})?.get(mM,null),e&&ao("NgHydration"),e}},{provide:Js,useValue:()=>{Kk(!1),Q(Ud)&&(TU(),EU())},multi:!0}];return n.push({provide:hM,useFactory:()=>Q(Ud)},{provide:fo,useFactory:()=>{if(Q(Ud)){let e=Q(ii),t=Q(Lr);return()=>{MU(e,t).then(()=>{t2(e)})}}return()=>{}},multi:!0}),so(n)}function TU(){let n=Df(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===sF){e=t;break}if(!e)throw new Ee(-507,!1)}function xl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var zS=class{[ra];constructor(e){this[ra]=e}destroy(){this[ra].destroy()}};function UT(n){let e=ms(n);if(!e)return null;let t=new Ca(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jT=null;function Pa(){return jT}function WT(n){jT??=n}var $f=class{};var An=new Re(""),Dv=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(AU),providedIn:"platform"})}return n})(),$T=new Re(""),AU=(()=>{class n extends Dv{_location;_history;_doc=Q(An);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pa().getBaseHref(this._doc)}onPopState(t){let r=Pa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Iv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function BT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Fi(n){return n&&n[0]!=="?"?"?"+n:n}var ki=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(Rv),providedIn:"root"})}return n})(),qT=new Re(""),Rv=(()=>{class n extends ki{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(An).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Iv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Fi(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Fi(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Dv),Ve(qT,8))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XT=(()=>{class n extends ki{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Iv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Fi(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Fi(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ve(Dv),Ve(qT,8))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),Oa=(()=>{class n{_subject=new an;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=IU(BT(VT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fi(r))}normalize(t){return n.stripTrailingSlash(DU(this._basePath,VT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Fi;static joinWithSlash=Iv;static stripTrailingSlash=BT;static \u0275fac=function(r){return new(r||n)(Ve(ki))};static \u0275prov=Ae({token:n,factory:()=>CU(),providedIn:"root"})}return n})();function CU(){return new Oa(Ve(ki))}function DU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VT(n){return n.replace(/\/index.html$/,"")}function IU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Nv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Mv=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xf=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mv(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),zT(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);zT(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(vt(bs),vt(io),vt(Ev))};static \u0275dir=uo({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function zT(n,e){n.context.$implicit=e.item}var YT=(()=>{class n{_viewContainer;_context=new Tv;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){HT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){HT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(vt(bs),vt(io))};static \u0275dir=uo({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Tv=class{$implicit=null;ngIf=null};function HT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ln(e)}'.`)}var bl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=gl({type:n});static \u0275inj=al({})}return n})(),Pv="browser",RU="server";function NU(n){return n===Pv}function Ui(n){return n===RU}var ZT=(()=>{class n{static \u0275prov=Ae({token:n,providedIn:"root",factory:()=>NU(Q(Bn))?new Av(Q(An),window):new Cv})}return n})(),Av=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=PU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function PU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Cv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},qf=class{};var Zf=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var iA=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(iA||{}),Lv=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Zf,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Kf=class n extends Lv{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=iA.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var LU=new Re("");var FU=new Re(""),KT="b",JT="h",QT="s",eA="st",tA="u",nA="rt",Yf=new Re(""),kU=["GET","HEAD"];function UU(n,e){let h=Q(Yf),{isCacheActive:t}=h,r=hw(h,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!kU.includes(s)||!r.includeRequestsWithAuthHeaders&&BU(n)||r.filter?.(n)===!1)return e(n);let o=Q(xs),a=Q(FU,{optional:!0}),c=Ui(Q(Bn));if(a&&!c)throw new Ee(2803,!1);let l=c&&a?GU(n.url,a):n.url,u=zU(n,l),d=o.get(u,null),f=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(f=i.includeHeaders),d){let{[KT]:g,[nA]:y,[JT]:m,[QT]:p,[eA]:E,[tA]:_}=d,x=g;switch(y){case"arraybuffer":x=new TextEncoder().encode(g).buffer;break;case"blob":x=new Blob([g]);break}let C=new Zf(m);return Pe(new Kf({body:x,headers:C,status:p,statusText:E,url:_}))}return e(n).pipe(en(g=>{g instanceof Kf&&c&&o.set(u,{[KT]:g.body,[JT]:VU(g.headers,f),[QT]:g.status,[eA]:g.statusText,[tA]:l,[nA]:n.responseType})}))}function BU(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function VU(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function rA(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function zU(n,e){let{params:t,method:r,responseType:i}=n,s=rA(t),o=n.serializeBody();o instanceof URLSearchParams?o=rA(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=HU(a);return c}function HU(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Fv(n){return[{provide:Yf,useFactory:()=>(ao("NgHttpTransferCache"),ae({isCacheActive:!0},n))},{provide:LU,useValue:UU,multi:!0,deps:[xs,Yf]},{provide:fo,multi:!0,useFactory:()=>{let e=Q(ii),t=Q(Yf);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}function GU(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var Uv=class extends $f{supportsDOMEvents=!0},Bv=class n extends Uv{static makeCurrent(){WT(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=jU();return t==null?null:WU(t)}resetBaseElement(){wl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Nv(document.cookie,e)}},wl=null;function jU(){return wl=wl||document.querySelector("base"),wl?wl.getAttribute("href"):null}function WU(n){return new URL(n,document.baseURI).pathname}var $U=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),Vv=new Re(""),uA=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ve(Vv),Ve(Ut))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),Qf=class{_doc;constructor(e){this._doc=e}manager},Jf="ng-app-id";function sA(n){for(let e of n)e.remove()}function oA(n,e){let t=e.createElement("style");return t.textContent=n,t}function qU(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jf}="${e}"],link[${Jf}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Jf),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function zv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var dA=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Ui(s),qU(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,oA);r?.forEach(i=>this.addUsage(i,this.external,zv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(sA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])sA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,oA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,zv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Jf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ve(An),Ve(If),Ve(Jy,8),Ve(Bn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),kv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gv=/%COMP%/g,fA="%COMP%",XU=`_nghost-${fA}`,YU=`_ngcontent-${fA}`,ZU=!0,KU=new Re("",{providedIn:"root",factory:()=>ZU});function JU(n){return YU.replace(Gv,n)}function QU(n){return XU.replace(Gv,n)}function hA(n,e){return e.map(t=>t.replace(Gv,n))}var aA=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.platformIsServer=Ui(a),this.defaultRenderer=new Sl(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ni.ShadowDom&&(r=Dt(ae({},r),{encapsulation:ni.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof eh?i.applyToHost(t):i instanceof El&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case ni.Emulated:s=new eh(c,l,r,this.appId,u,o,a,d);break;case ni.ShadowDom:return new Hv(c,l,t,r,o,a,this.nonce,d);default:s=new El(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||n)(Ve(uA),Ve(dA),Ve(If),Ve(KU),Ve(An),Ve(Bn),Ve(Ut),Ve(Jy))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),Sl=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(kv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=kv[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(co.DashCase|co.Important)?e.style.setProperty(t,r,i&co.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&co.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Pa().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Hv=class extends Sl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}let u=i.getExternalStyles?.();if(u)for(let d of u){let f=zv(d,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},El=class extends Sl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?hA(c,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},eh=class extends El{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=JU(l),this.hostAttr=QU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},eB=(()=>{class n extends Qf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||n)(Ve(An))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})(),lA=["alt","control","meta","shift"],tB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rB=(()=>{class n extends Qf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pa().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),lA.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=tB[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lA.forEach(o=>{if(o!==i){let a=nB[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ve(An))};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function pA(n,e){return FT(ae({rootComponent:n},iB(e)))}function iB(n){return{appProviders:[...lB,...n?.providers??[]],platformProviders:cB}}function sB(){Bv.makeCurrent()}function oB(){return new Oi}function aB(){return aM(document),document}var cB=[{provide:Bn,useValue:Pv},{provide:Ky,useValue:sB,multi:!0},{provide:An,useFactory:aB,deps:[]}];var lB=[{provide:Ef,useValue:"root"},{provide:Oi,useFactory:oB,deps:[]},{provide:Vv,useClass:eB,multi:!0,deps:[An,Ut,Bn]},{provide:Vv,useClass:rB,multi:!0,deps:[An]},aA,dA,uA,{provide:Aa,useExisting:aA},{provide:qf,useClass:$U,deps:[]},[]];var oi=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ve(An))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var th=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(th||{});function uB(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function mA(n){return uB(th.HttpTransferCacheOptions,Fv(n))}function gA(...n){let e=[],t=new Set,r=t.has(th.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return so([[],kT(),t.has(th.NoHttpTransferCache)||r?[]:Fv({}),e])}var Ze="primary",Vl=Symbol("RouteTitle"),Xv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Va(n){return new Xv(n)}function dB(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ai(n[t],e[t]))return!1;return!0}function ai(n,e){let t=n?Yv(n):void 0,r=e?Yv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!AA(n[i],e[i]))return!1;return!0}function Yv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function AA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function CA(n){return n.length>0?n[n.length-1]:null}function Ms(n){return yg(n)?n:vl(n)?kt(Promise.resolve(n)):Pe(n)}var hB={exact:IA,subset:RA},DA={exact:pB,subset:mB,ignored:()=>!0};function yA(n,e,t){return hB[t.paths](n.root,e.root,t.matrixParams)&&DA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function pB(n,e){return ai(n,e)}function IA(n,e,t){if(!po(n.segments,e.segments)||!ih(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!IA(n.children[r],e.children[r],t))return!1;return!0}function mB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AA(n[t],e[t]))}function RA(n,e,t){return NA(n,e,e.segments,t)}function NA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!po(i,t)||e.hasChildren()||!ih(i,t,r))}else if(n.segments.length===t.length){if(!po(n.segments,t)||!ih(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!RA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!po(n.segments,i)||!ih(n.segments,i,r)||!n.children[Ze]?!1:NA(n.children[Ze],e,s,r)}}function ih(n,e,t){return e.every((r,i)=>DA[t](n[i].parameters,r.parameters))}var Vi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new St([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){return vB.serialize(this)}},St=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sh(this)}},ho=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Va(this.parameters),this._parameterMap}toString(){return OA(this)}};function gB(n,e){return po(n,e)&&n.every((t,r)=>ai(t.parameters,e[r].parameters))}function po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function yB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ze&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ze&&(t=t.concat(e(i,r)))}),t}var zl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>new za,providedIn:"root"})}return n})(),za=class{parse(e){let t=new Kv(e);return new Vi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Tl(e.root,!0)}`,r=bB(e.queryParams),i=typeof e.fragment=="string"?`#${_B(e.fragment)}`:"";return`${t}${r}${i}`}},vB=new za;function sh(n){return n.segments.map(e=>OA(e)).join("/")}function Tl(n,e){if(!n.hasChildren())return sh(n);if(e){let t=n.children[Ze]?Tl(n.children[Ze],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ze&&r.push(`${i}:${Tl(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=yB(n,(r,i)=>i===Ze?[Tl(n.children[Ze],!1)]:[`${i}:${Tl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ze]!=null?`${sh(n)}/${t[0]}`:`${sh(n)}/(${t.join("//")})`}}function PA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nh(n){return PA(n).replace(/%3B/gi,";")}function _B(n){return encodeURI(n)}function Zv(n){return PA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oh(n){return decodeURIComponent(n)}function vA(n){return oh(n.replace(/\+/g,"%20"))}function OA(n){return`${Zv(n.path)}${xB(n.parameters)}`}function xB(n){return Object.entries(n).map(([e,t])=>`;${Zv(e)}=${Zv(t)}`).join("")}function bB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nh(t)}=${nh(i)}`).join("&"):`${nh(t)}=${nh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var wB=/^[^\/()?;#]+/;function jv(n){let e=n.match(wB);return e?e[0]:""}var SB=/^[^\/()?;=#]+/;function EB(n){let e=n.match(SB);return e?e[0]:""}var MB=/^[^=?&#]+/;function TB(n){let e=n.match(MB);return e?e[0]:""}var AB=/^[^&#]+/;function CB(n){let e=n.match(AB);return e?e[0]:""}var Kv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ze]=new St(e,t)),r}parseSegment(){let e=jv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(e),new ho(oh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=EB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=jv(this.remaining);i&&(r=i,this.capture(r))}e[oh(t)]=oh(r)}parseQueryParam(e){let t=TB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=CB(this.remaining);o&&(r=o,this.capture(r))}let i=vA(t),s=vA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ee(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ze);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Ze]:new St([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ee(4011,!1)}};function LA(n){return n.segments.length>0?new St([],{[Ze]:n}):n}function FA(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=FA(i);if(r===Ze&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new St(n.segments,e);return DB(t)}function DB(n){if(n.numberOfChildren===1&&n.children[Ze]){let e=n.children[Ze];return new St(n.segments.concat(e.segments),e.children)}return n}function mo(n){return n instanceof Vi}function IB(n,e,t=null,r=null){let i=kA(n);return UA(i,e,t,r)}function kA(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new St(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=LA(r);return e??i}function UA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Wv(i,i,i,t,r);let s=RB(e);if(s.toRoot())return Wv(i,i,new St([],{}),t,r);let o=NB(s,i,n),a=o.processChildren?Dl(o.segmentGroup,o.index,s.commands):VA(o.segmentGroup,o.index,s.commands);return Wv(i,o.segmentGroup,a,t,r)}function ah(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Nl(n){return typeof n=="object"&&n!=null&&n.outlets}function Wv(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=BA(n,e,t);let a=LA(FA(o));return new Vi(a,s,i)}function BA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=BA(s,e,t)}),new St(n.segments,r)}var ch=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ah(r[0]))throw new Ee(4003,!1);let i=r.find(Nl);if(i&&i!==CA(r))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function RB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ch(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ch(t,e,r)}var ka=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function NB(n,e,t){if(n.isAbsolute)return new ka(e,!0,0);if(!t)return new ka(e,!1,NaN);if(t.parent===null)return new ka(t,!0,0);let r=ah(n.commands[0])?0:1,i=t.segments.length-1+r;return PB(t,i,n.numberOfDoubleDots)}function PB(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Ee(4005,!1);i=r.segments.length}return new ka(r,!1,i-s)}function OB(n){return Nl(n[0])?n[0].outlets:{[Ze]:n}}function VA(n,e,t){if(n??=new St([],{}),n.segments.length===0&&n.hasChildren())return Dl(n,e,t);let r=LB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new St(n.segments.slice(0,r.pathIndex),{});return s.children[Ze]=new St(n.segments.slice(r.pathIndex),n.children),Dl(s,0,i)}else return r.match&&i.length===0?new St(n.segments,{}):r.match&&!n.hasChildren()?Jv(n,e,t):r.match?Dl(n,0,i):Jv(n,e,t)}function Dl(n,e,t){if(t.length===0)return new St(n.segments,{});{let r=OB(t),i={};if(Object.keys(r).some(s=>s!==Ze)&&n.children[Ze]&&n.numberOfChildren===1&&n.children[Ze].segments.length===0){let s=Dl(n.children[Ze],e,t);return new St(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=VA(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new St(n.segments,i)}}function LB(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Nl(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!xA(c,l,o))return s;r+=2}else{if(!xA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Nl(s)){let c=FB(s.outlets);return new St(r,c)}if(i===0&&ah(t[0])){let c=n.segments[e];r.push(new ho(c.path,_A(t[0]))),i++;continue}let o=Nl(s)?s.outlets[Ze]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ah(a)?(r.push(new ho(o,_A(a))),i+=2):(r.push(new ho(o,{})),i++)}return new St(r,{})}function FB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Jv(new St([],{}),0,r))}),e}function _A(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function xA(n,e,t){return n==t.path&&ai(e,t.parameters)}var Il="imperative",un=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(un||{}),br=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ha=class extends br{type=un.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Br=class extends br{urlAfterRedirects;type=un.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nr||{}),lh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lh||{}),Bi=class extends br{reason;code;type=un.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ss=class extends br{reason;code;type=un.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Pl=class extends br{error;target;type=un.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uh=class extends br{urlAfterRedirects;state;type=un.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qv=class extends br{urlAfterRedirects;state;type=un.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},e_=class extends br{urlAfterRedirects;state;shouldActivate;type=un.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},t_=class extends br{urlAfterRedirects;state;type=un.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},n_=class extends br{urlAfterRedirects;state;type=un.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},r_=class{route;type=un.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},i_=class{route;type=un.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},s_=class{snapshot;type=un.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},o_=class{snapshot;type=un.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a_=class{snapshot;type=un.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},c_=class{snapshot;type=un.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dh=class{routerEvent;position;anchor;type=un.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ol=class{},Ga=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function kB(n,e){return n.providers&&!n._injector&&(n._injector=zf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ur(n){return n.outlet||Ze}function UB(n,e){let t=n.filter(r=>Ur(r)===e);return t.push(...n.filter(r=>Ur(r)!==e)),t}function Hl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var l_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Gl(this.rootInjector)}},Gl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new l_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ve(Zn))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=u_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=u_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=d_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return d_(e,this._root).map(t=>t.value)}};function u_(n,e){if(n===e.value)return e;for(let t of e.children){let r=u_(n,t);if(r)return r}return null}function d_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=d_(n,t);if(r.length)return r.unshift(e),r}return[]}var tr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var hh=class extends fh{snapshot;constructor(e,t){super(e),this.snapshot=t,x_(this,e)}toString(){return this.snapshot.toString()}};function zA(n){let e=BB(n),t=new mn([new ho("",{})]),r=new mn({}),i=new mn({}),s=new mn({}),o=new mn(""),a=new wr(t,r,s,o,i,Ze,n,e.root);return a.snapshot=e.root,new hh(new tr(a,[]),e)}function BB(n){let e={},t={},r={},i="",s=new Ua([],e,r,i,t,Ze,n,null,{});return new mh("",new tr(s,[]))}var wr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ot(l=>l[Vl]))??Pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ot(e=>Va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ot(e=>Va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ph(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ae(ae({},e.params),n.params),data:ae(ae({},e.data),n.data),resolve:ae(ae(ae(ae({},n.data),e.data),i?.data),n._resolvedData)}:r={params:ae({},n.params),data:ae({},n.data),resolve:ae(ae({},n.data),n._resolvedData??{})},i&&GA(i)&&(r.resolve[Vl]=i.title),r}var Ua=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Vl]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mh=class extends fh{url;constructor(e,t){super(t),this.url=e,x_(this,t)}toString(){return HA(this._root)}};function x_(n,e){e.value._routerState=n,e.children.forEach(t=>x_(n,t))}function HA(n){let e=n.children.length>0?` { ${n.children.map(HA).join(", ")} } `:"";return`${n.value}${e}`}function $v(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ai(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ai(e.params,t.params)||n.paramsSubject.next(t.params),fB(e.url,t.url)||n.urlSubject.next(t.url),ai(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function f_(n,e){let t=ai(n.params,e.params)&&gB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||f_(n.parent,e.parent))}function GA(n){return typeof n.title=="string"||n.title===null}var VB=new Re(""),b_=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ze;activateEvents=new On;deactivateEvents=new On;attachEvents=new On;detachEvents=new On;routerOutletData=QE(void 0);parentContexts=Q(Gl);location=Q(bs);changeDetector=Q(Na);inputBinder=Q(_h,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new h_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=uo({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ul]})}return n})(),h_=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===wr?this.route:e===Gl?this.childContexts:e===VB?this.outletData:this.parent.get(e,t)}},_h=new Re(""),bA=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Yc([r.queryParams,r.params,r.data]).pipe(Xn(([s,o,a],c)=>(a=ae(ae(ae({},s),o),a),c===0?Pe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=UT(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function zB(n,e,t){let r=Ll(n,e._root,t?t._root:void 0);return new hh(r,e)}function Ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=HB(n,e,t);return new tr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ll(n,a)),o}}let r=GB(e.value),i=e.children.map(s=>Ll(n,s));return new tr(r,i)}}function HB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ll(n,r,i);return Ll(n,r)})}function GB(n){return new wr(new mn(n.url),new mn(n.params),new mn(n.queryParams),new mn(n.fragment),new mn(n.data),n.outlet,n.component,n)}var Fl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jA="ngNavigationCancelingError";function gh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=mo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WA(!1,nr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function WA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jA]=!0,t.cancellationCode=e,t}function jB(n){return $A(n)&&mo(n.url)}function $A(n){return!!n&&n[jA]}var WB=(n,e,t,r)=>ot(i=>(new p_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),p_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$v(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new c_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new o_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if($v(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$v(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},yh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ba=class{component;route;constructor(e,t){this.component=e,this.route=t}};function $B(n,e,t){let r=n._root,i=e?e._root:null;return Al(r,i,t,[r.value])}function qB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!XS(n)?n:e.get(n):r}function Al(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fa(e);return n.children.forEach(o=>{XB(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Rl(a,t.getContext(o),i)),i}function XB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=YB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Al(n,e,a?a.children:null,r,i):Al(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ba(a.outlet.component,o))}else o&&Rl(e,a,i),i.canActivateChecks.push(new yh(r)),s.component?Al(n,null,a?a.children:null,r,i):Al(n,null,t,r,i);return i}function YB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!po(n.url,e.url)||!ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!f_(n,e)||!ai(n.queryParams,e.queryParams);case"paramsChange":default:return!f_(n,e)}}function Rl(n,e,t){let r=Fa(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Rl(o,e.children.getContext(s),t):Rl(o,null,t):Rl(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ba(e.outlet.component,i)):t.canDeactivateChecks.push(new Ba(null,i)):t.canDeactivateChecks.push(new Ba(null,i))}function jl(n){return typeof n=="function"}function ZB(n){return typeof n=="boolean"}function KB(n){return n&&jl(n.canLoad)}function JB(n){return n&&jl(n.canActivate)}function QB(n){return n&&jl(n.canActivateChild)}function e3(n){return n&&jl(n.canDeactivate)}function t3(n){return n&&jl(n.canMatch)}function qA(n){return n instanceof Ci||n?.name==="EmptyError"}var rh=Symbol("INITIAL_VALUE");function ja(){return Xn(n=>Yc(n.map(e=>e.pipe(Di(1),bg(rh)))).pipe(ot(e=>{for(let t of e)if(t!==!0){if(t===rh)return rh;if(t===!1||n3(t))return t}return!0}),qn(e=>e!==rh),Di(1)))}function n3(n){return mo(n)||n instanceof Fl}function r3(n,e){return qt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Pe(Dt(ae({},t),{guardsResult:!0})):i3(o,r,i,n).pipe(qt(a=>a&&ZB(a)?s3(r,s,n,e):Pe(a)),ot(a=>Dt(ae({},t),{guardsResult:a})))})}function i3(n,e,t,r){return kt(n).pipe(qt(i=>u3(i.component,i.route,t,e,r)),Ii(i=>i!==!0,!0))}function s3(n,e,t,r){return kt(e).pipe(ds(i=>fa(a3(i.route.parent,r),o3(i.route,r),l3(n,i.path,t),c3(n,i.route,t))),Ii(i=>i!==!0,!0))}function o3(n,e){return n!==null&&e&&e(new a_(n)),Pe(!0)}function a3(n,e){return n!==null&&e&&e(new s_(n)),Pe(!0)}function c3(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Pe(!0);let i=r.map(s=>Ld(()=>{let o=Hl(e)??t,a=Wa(s,o),c=JB(a)?a.canActivate(e,n):Jn(o,()=>a(e,n));return Ms(c).pipe(Ii())}));return Pe(i).pipe(ja())}function l3(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>qB(o)).filter(o=>o!==null).map(o=>Ld(()=>{let a=o.guards.map(c=>{let l=Hl(o.node)??t,u=Wa(c,l),d=QB(u)?u.canActivateChild(r,n):Jn(l,()=>u(r,n));return Ms(d).pipe(Ii())});return Pe(a).pipe(ja())}));return Pe(s).pipe(ja())}function u3(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Pe(!0);let o=s.map(a=>{let c=Hl(e)??i,l=Wa(a,c),u=e3(l)?l.canDeactivate(n,e,t,r):Jn(c,()=>l(n,e,t,r));return Ms(u).pipe(Ii())});return Pe(o).pipe(ja())}function d3(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Pe(!0);let s=i.map(o=>{let a=Wa(o,n),c=KB(a)?a.canLoad(e,t):Jn(n,()=>a(e,t));return Ms(c)});return Pe(s).pipe(ja(),XA(r))}function XA(n){return hg(en(e=>{if(typeof e!="boolean")throw gh(n,e)}),ot(e=>e===!0))}function f3(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Pe(!0);let s=i.map(o=>{let a=Wa(o,n),c=t3(a)?a.canMatch(e,t):Jn(n,()=>a(e,t));return Ms(c)});return Pe(s).pipe(ja(),XA(r))}var kl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ul=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function La(n){return da(new kl(n))}function h3(n){return da(new Ee(4e3,!1))}function p3(n){return da(WA(!1,nr.GuardRejected))}var m_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Pe(r);if(i.numberOfChildren>1||!i.children[Ze])return h3(`${e.redirectTo}`);i=i.children[Ze]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:g,title:y}=i,m=Jn(s,()=>a({params:h,data:g,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:y}));if(m instanceof Vi)throw new Ul(m);t=m}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ul(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Vi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new St(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},g_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m3(n,e,t,r,i){let s=YA(n,e,t);return s.matched?(r=kB(e,r),f3(r,e,t,i).pipe(ot(o=>o===!0?s:ae({},g_)))):Pe(s)}function YA(n,e,t){if(e.path==="**")return g3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ae({},g_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dB)(t,n,e);if(!i)return ae({},g_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?ae(ae({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function g3(n){return{matched:!0,parameters:n.length>0?CA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wA(n,e,t,r){return t.length>0&&_3(n,t,r)?{segmentGroup:new St(e,v3(r,new St(t,n.children))),slicedSegments:[]}:t.length===0&&x3(n,t,r)?{segmentGroup:new St(n.segments,y3(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new St(n.segments,n.children),slicedSegments:t}}function y3(n,e,t,r){let i={};for(let s of t)if(xh(n,e,s)&&!r[Ur(s)]){let o=new St([],{});i[Ur(s)]=o}return ae(ae({},r),i)}function v3(n,e){let t={};t[Ze]=e;for(let r of n)if(r.path===""&&Ur(r)!==Ze){let i=new St([],{});t[Ur(r)]=i}return t}function _3(n,e,t){return t.some(r=>xh(n,e,r)&&Ur(r)!==Ze)}function x3(n,e,t){return t.some(r=>xh(n,e,r))}function xh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function b3(n,e,t){return e.length===0&&!n.children[t]}var y_=class{};function w3(n,e,t,r,i,s,o="emptyOnly"){return new v_(n,e,t,r,i,o,s).recognize()}var S3=31,v_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new m_(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=wA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ot(({children:t,rootSnapshot:r})=>{let i=new tr(r,t),s=new mh("",i),o=IB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ua([],Object.freeze({}),Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ze,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ze,t).pipe(ot(r=>({children:r,rootSnapshot:t})),us(r=>{if(r instanceof Ul)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ot(o=>o instanceof tr?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return kt(s).pipe(ds(o=>{let a=r.children[o],c=UB(t,o);return this.processSegmentGroup(e,c,a,o,i)}),xg((o,a)=>(o.push(...a),o)),fs(null),_g(),qt(o=>{if(o===null)return La(r);let a=ZA(o);return E3(a),Pe(a)}))}processSegment(e,t,r,i,s,o,a){return kt(t).pipe(ds(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(us(l=>{if(l instanceof kl)return Pe(null);throw l}))),Ii(c=>!!c),us(c=>{if(qA(c))return b3(r,i,s)?Pe(new y_):La(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Ur(r)!==o&&(o===Ze||!xh(i,s,r))?La(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):La(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=YA(t,i,s);if(!c)return La(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>S3&&(this.allowRedirects=!1));let h=new Ua(s,l,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,SA(i),Ur(i),i.component??i._loadedComponent??null,i,EA(i)),g=ph(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(g.params),h.data=Object.freeze(g.data);let y=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(qt(m=>this.processSegment(e,r,t,m.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=m3(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Xn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new Ua(f,d,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,SA(r),Ur(r),r.component??r._loadedComponent??null,r,EA(r)),y=ph(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let{segmentGroup:m,slicedSegments:p}=wA(t,f,h,l);if(p.length===0&&m.hasChildren())return this.processChildren(u,l,m,g).pipe(ot(_=>new tr(g,_)));if(l.length===0&&p.length===0)return Pe(new tr(g,[]));let E=Ur(r)===s;return this.processSegment(u,l,m,p,E?Ze:s,!0,g).pipe(ot(_=>new tr(g,_ instanceof tr?[_]:[])))}))):La(t)))}getChildConfig(e,t,r){return t.children?Pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Pe({routes:t._loadedRoutes,injector:t._loadedInjector}):d3(e,t,r,this.urlSerializer).pipe(qt(i=>i?this.configLoader.loadChildren(e,t).pipe(en(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):p3(t))):Pe({routes:[],injector:e})}};function E3(n){n.sort((e,t)=>e.value.outlet===Ze?-1:t.value.outlet===Ze?1:e.value.outlet.localeCompare(t.value.outlet))}function M3(n){let e=n.value.routeConfig;return e&&e.path===""}function ZA(n){let e=[],t=new Set;for(let r of n){if(!M3(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ZA(r.children);e.push(new tr(r.value,i))}return e.filter(r=>!t.has(r))}function SA(n){return n.data||{}}function EA(n){return n.resolve||{}}function T3(n,e,t,r,i,s){return qt(o=>w3(n,e,t,r,o.extractedUrl,i,s).pipe(ot(({state:a,tree:c})=>Dt(ae({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function A3(n,e){return qt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Pe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of KA(c))o.add(l);let a=0;return kt(o).pipe(ds(c=>s.has(c)?C3(c,r,n,e):(c.data=ph(c,c.parent,n).resolve,Pe(void 0))),en(()=>a++),pa(1),qt(c=>a===o.size?Pe(t):$n))})}function KA(n){let e=n.children.map(t=>KA(t)).flat();return[n,...e]}function C3(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!GA(i)&&(s[Vl]=i.title),D3(s,n,e,r).pipe(ot(o=>(n._resolvedData=o,n.data=ph(n,n.parent,t).resolve,null)))}function D3(n,e,t,r){let i=Yv(n);if(i.length===0)return Pe({});let s={};return kt(i).pipe(qt(o=>I3(n[o],e,t,r).pipe(Ii(),en(a=>{if(a instanceof Fl)throw gh(new za,a);s[o]=a}))),pa(1),vg(s),us(o=>qA(o)?$n:da(o)))}function I3(n,e,t,r){let i=Hl(e)??r,s=Wa(n,i),o=s.resolve?s.resolve(e,t):Jn(i,()=>s(e,t));return Ms(o)}function qv(n){return Xn(e=>{let t=n(e);return t?kt(t).pipe(ot(()=>e)):Pe(e)})}var JA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ze);return r}getResolvedTitleForRoute(t){return t.data[Vl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(R3),providedIn:"root"})}return n})(),R3=(()=>{class n extends JA{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ve(oi))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wl=new Re("",{providedIn:"root",factory:()=>({})}),N3=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ln({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&Vn(0,"router-outlet")},dependencies:[b_],encapsulation:2})}return n})();function w_(n){let e=n.children&&n.children.map(w_),t=e?Dt(ae({},n),{children:e}):ae({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ze&&(t.component=N3),t}var Bl=new Re(""),S_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Q(Wf);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ms(t.loadComponent()).pipe(ot(QA),en(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ha(()=>{this.componentLoaders.delete(t)})),i=new ua(r,()=>new an).pipe(la());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=P3(r,this.compiler,t,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(r)})),o=new ua(s,()=>new an).pipe(la());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P3(n,e,t,r){return Ms(n.loadChildren()).pipe(ot(QA),qt(i=>i instanceof sl||Array.isArray(i)?Pe(i):kt(e.compileModuleAsync(i))),ot(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Bl,[],{optional:!0,self:!0}).flat()),{routes:o.map(w_),injector:s}}))}function O3(n){return n&&typeof n=="object"&&"default"in n}function QA(n){return O3(n)?n.default:n}var E_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(L3),providedIn:"root"})}return n})(),L3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eC=new Re(""),tC=new Re("");function F3(n,e,t){let r=n.get(tC),i=n.get(An);return n.get(Ut).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),k3(n))),{onViewTransitionCreated:c}=r;return c&&Jn(n,()=>c({transition:a,from:e,to:t})),o})}function k3(n){return new Promise(e=>{tv({read:()=>setTimeout(e)},{injector:n})})}var nC=new Re(""),M_=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new an;transitionAbortSubject=new an;configLoader=Q(S_);environmentInjector=Q(Zn);urlSerializer=Q(zl);rootContexts=Q(Gl);location=Q(Oa);inputBindingEnabled=Q(_h,{optional:!0})!==null;titleStrategy=Q(JA);options=Q(Wl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Q(E_);createViewTransition=Q(eC,{optional:!0});navigationErrorHandler=Q(nC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Pe(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new r_(i)),r=i=>this.events.next(new i_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Dt(ae(ae({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new mn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Il,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qn(s=>s.id!==0),ot(s=>Dt(ae({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xn(s=>{let o=!1,a=!1;return Pe(s).pipe(Xn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",nr.SupersededByNewNavigation),$n;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Dt(ae({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Ss(c.id,this.urlSerializer.serialize(c.rawUrl),d,lh.IgnoredSameUrlNavigation)),c.resolve(!1),$n}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Pe(c).pipe(Xn(d=>{let f=this.transitions?.getValue();return this.events.next(new Ha(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?$n:Promise.resolve(d)}),T3(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),en(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Dt(ae({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new uh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:g,extras:y}=c,m=new Ha(d,this.urlSerializer.serialize(f),h,g);this.events.next(m);let p=zA(this.rootComponentType).snapshot;return this.currentTransition=s=Dt(ae({},c),{targetSnapshot:p,urlAfterRedirects:f,extras:Dt(ae({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Pe(s)}else{let d="";return this.events.next(new Ss(c.id,this.urlSerializer.serialize(c.extractedUrl),d,lh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),$n}}),en(c=>{let l=new Qv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ot(c=>(this.currentTransition=s=Dt(ae({},c),{guards:$B(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),r3(this.environmentInjector,c=>this.events.next(c)),en(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw gh(this.urlSerializer,c.guardsResult);let l=new e_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),qn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",nr.GuardRejected),!1)),qv(c=>{if(c.guards.canActivateChecks.length)return Pe(c).pipe(en(l=>{let u=new t_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Xn(l=>{let u=!1;return Pe(l).pipe(A3(this.paramsInheritanceStrategy,this.environmentInjector),en({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",nr.NoDataFromResolver)}}))}),en(l=>{let u=new n_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),qv(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(en(f=>{u.component=f}),ot(()=>{})));for(let f of u.children)d.push(...l(f));return d};return Yc(l(c.targetSnapshot.root)).pipe(fs(null),Di(1))}),qv(()=>this.afterPreactivation()),Xn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?kt(u).pipe(ot(()=>s)):Pe(s)}),ot(c=>{let l=zB(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Dt(ae({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),en(()=>{this.events.next(new Ol)}),WB(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Di(1),en({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Br(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),wg(this.transitionAbortSubject.pipe(en(c=>{throw c}))),ha(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",nr.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),us(c=>{if(a=!0,$A(c))this.events.next(new Bi(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),jB(c)?this.events.next(new Ga(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Pl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=Jn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof Fl){let{message:d,cancellationCode:f}=gh(this.urlSerializer,u);this.events.next(new Bi(s.id,this.urlSerializer.serialize(s.extractedUrl),d,f)),this.events.next(new Ga(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return $n}))}))}cancelNavigationTransition(t,r,i){let s=new Bi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U3(n){return n!==Il}var B3=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(V3),providedIn:"root"})}return n})(),__=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},V3=(()=>{class n extends __{static \u0275fac=(()=>{let t;return function(i){return(t||(t=$y(n)))(i||n)}})();static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:()=>Q(z3),providedIn:"root"})}return n})(),z3=(()=>{class n extends rC{location=Q(Oa);urlSerializer=Q(zl);options=Q(Wl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=Q(E_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Vi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=zA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ha)this.stateMemento=this.createStateMemento();else if(t instanceof Ss)this.rawUrlTree=r.initialUrl;else if(t instanceof uh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ol?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Bi&&(t.code===nr.GuardRejected||t.code===nr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Pl?this.restoreHistory(r,!0):t instanceof Br&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Vi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=ae(ae({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=ae(ae({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$y(n)))(i||n)}})();static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Cl||{});function iC(n,e){n.events.pipe(qn(t=>t instanceof Br||t instanceof Bi||t instanceof Pl||t instanceof Ss),ot(t=>t instanceof Br||t instanceof Ss?Cl.COMPLETE:(t instanceof Bi?t.code===nr.Redirect||t.code===nr.SupersededByNewNavigation:!1)?Cl.REDIRECTING:Cl.FAILED),qn(t=>t!==Cl.REDIRECTING),Di(1)).subscribe(()=>{e()})}var H3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ci=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Q(Gf);stateManager=Q(rC);options=Q(Wl,{optional:!0})||{};pendingTasks=Q(oo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Q(M_);urlSerializer=Q(zl);location=Q(Oa);urlHandlingStrategy=Q(E_);_events=new an;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Q(B3);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Q(Bl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Q(_h,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new $t;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Bi&&r.code!==nr.Redirect&&r.code!==nr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Br)this.navigated=!0;else if(r instanceof Ga){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=ae({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||U3(i.source)},o);this.scheduleNavigation(a,Il,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}W3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=ae({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(w_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ae(ae({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=kA(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return UA(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=mo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Il,null,r)}navigate(t,r={skipLocationChange:!1}){return j3(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=ae({},H3):r===!1?i=ae({},G3):i=r,mo(t))return yA(this.currentUrlTree,t,i);let s=this.parseUrl(t);return yA(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return iC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ee(4008,!1)}function W3(n){return!(n instanceof Ol)&&!(n instanceof Ga)}var Es=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new an;constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Br&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(mo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:_M(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:mo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(vt(ci),vt(wr),qy("tabindex"),vt(ml),vt(Li),vt(ki))};static \u0275dir=uo({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&bv("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&xv("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xl],replaceUrl:[2,"replaceUrl","replaceUrl",xl],routerLink:"routerLink"},features:[_v,ul]})}return n})(),sC=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new On;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Br&&this.update()})}ngAfterContentInit(){Pe(this.links.changes,Pe(null)).pipe(ls()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=kt(t).pipe(ls()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=$3(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(vt(ci),vt(Li),vt(ml),vt(Na),vt(Es,8))};static \u0275dir=uo({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&AT(s,Es,5),r&2){let o;CT(o=DT())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ul]})}return n})();function $3(n){return!!n.paths}var vh=class{};var q3=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(qn(t=>t instanceof Br),ds(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=zf(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return kt(i).pipe(ls())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Pe(null);let s=i.pipe(qt(o=>o===null?Pe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return kt([s,o]).pipe(ls())}else return s})}static \u0275fac=function(r){return new(r||n)(Ve(ci),Ve(Wf),Ve(Zn),Ve(vh),Ve(S_))};static \u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oC=new Re(""),X3=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ha?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Br?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ss&&t.code===lh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){LM()};static \u0275prov=Ae({token:n,factory:n.\u0275fac})}return n})();function aC(n,...e){return so([{provide:Bl,multi:!0,useValue:n},[],{provide:wr,useFactory:cC,deps:[ci]},{provide:fo,multi:!0,useFactory:lC},e.map(t=>t.\u0275providers)])}function cC(n){return n.routerState.root}function $l(n,e){return{\u0275kind:n,\u0275providers:e}}function lC(){let n=Q(Lr);return e=>{let t=n.get(ii);if(e!==t.components[0])return;let r=n.get(ci),i=n.get(uC);n.get(T_)===1&&r.initialNavigation(),n.get(dC,null,nt.Optional)?.setUpPreloading(),n.get(oC,null,nt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var uC=new Re("",{factory:()=>new an}),T_=new Re("",{providedIn:"root",factory:()=>1});function Y3(){return $l(2,[{provide:T_,useValue:0},{provide:Ra,multi:!0,deps:[Lr],useFactory:e=>{let t=e.get($T,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ci),s=e.get(uC);iC(i,()=>{r(!0)}),e.get(M_).afterPreactivation=()=>(r(!0),s.closed?Pe(void 0):s),i.initialNavigation()}))}}])}function Z3(){return $l(3,[{provide:Ra,multi:!0,useFactory:()=>{let e=Q(ci);return()=>{e.setUpLocationChangeListener()}}},{provide:T_,useValue:2}])}var dC=new Re("");function K3(n){return $l(0,[{provide:dC,useExisting:q3},{provide:vh,useExisting:n}])}function J3(){return $l(8,[bA,{provide:_h,useExisting:bA}])}function Q3(n){let e=[{provide:eC,useValue:F3},{provide:tC,useValue:ae({skipNextTransition:!!n?.skipInitialTransition},n)}];return $l(9,e)}var MA=new Re("ROUTER_FORROOT_GUARD"),eV=[Oa,{provide:zl,useClass:za},ci,Gl,{provide:wr,useFactory:cC,deps:[ci]},S_,[]],$a=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eV,[],{provide:Bl,multi:!0,useValue:t},{provide:MA,useFactory:iV,deps:[[ci,new Sf,new Dy]]},r?.errorHandler?{provide:nC,useValue:r.errorHandler}:[],{provide:Wl,useValue:r||{}},r?.useHash?nV():rV(),tV(),r?.preloadingStrategy?K3(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?sV(r):[],r?.bindToComponentInputs?J3().\u0275providers:[],r?.enableViewTransitions?Q3().\u0275providers:[],oV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Bl,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)(Ve(MA,8))};static \u0275mod=gl({type:n});static \u0275inj=al({})}return n})();function tV(){return{provide:oC,useFactory:()=>{let n=Q(ZT),e=Q(Ut),t=Q(Wl),r=Q(M_),i=Q(zl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new X3(i,r,n,e,t)}}}function nV(){return{provide:ki,useClass:XT}}function rV(){return{provide:ki,useClass:Rv}}function iV(n){return"guarded"}function sV(n){return[n.initialNavigation==="disabled"?Z3().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Y3().\u0275providers:[]]}var TA=new Re("");function oV(){return[{provide:TA,useFactory:lC},{provide:fo,multi:!0,useExisting:TA}]}var fC=(()=>{class n{constructor(t){this._titleService=t}ngOnInit(){return xe(this,null,function*(){this._titleService.setTitle("Stanislav Romanov")})}static{this.\u0275fac=function(r){return new(r||n)(vt(oi))}}static{this.\u0275cmp=ln({type:n,selectors:[["app-home"]],decls:47,vars:0,consts:[[1,"font-sans","font-semibold","border-b-stan-orange","border-b-2","inline-block"],[1,"pt-2","indent-8"],[1,"text-stan-orange"],[1,"pt-6"],[1,"pt-2","space-y-1"],[1,"grid","grid-cols-[4rem_1fr]","items-start","gap-1"],[1,"font-bold"]],template:function(r,i){r&1&&(Ne(0,"div")(1,"h2",0),Fe(2," About "),Ce(),Ne(3,"p",1),Fe(4," Hello, I'm "),Ne(5,"span",2),Fe(6,"Stanislav Romanov"),Ce(),Fe(7,", a seasoned full-stack developer with over 15 years of experience. I specialize in backend, frontend, and mobile technologies, creating fast, secure, and scalable systems. My expertise spans modern frameworks, databases, and advanced development methods. I've worked on high-impact projects, mentored teams, and built solutions for global companies across various industries. "),Ce()(),Ne(8,"div",3)(9,"h2",0),Fe(10," Bio "),Ce(),Ne(11,"ul",4)(12,"li",5)(13,"span",6),Fe(14,"2005"),Ce(),Ne(15,"p"),Fe(16,"Started coding and gained lots of passion for it."),Ce()(),Ne(17,"li",5)(18,"span",6),Fe(19,"2009"),Ce(),Ne(20,"p"),Fe(21,"Landed first job as a Web Developer."),Ce()(),Ne(22,"li",5)(23,"span",6),Fe(24,"2012"),Ce(),Ne(25,"p"),Fe(26," Got Computer Science degree from Technical College of Riga with high honors. "),Ce()(),Ne(27,"li",5)(28,"span",6),Fe(29,"2013"),Ce(),Ne(30,"p"),Fe(31,"Went to Toronto, Canada to work as a Sr. Back-End Developer."),Ce()(),Ne(32,"li",5)(33,"span",6),Fe(34,"2014"),Ce(),Ne(35,"p"),Fe(36," Went to Berlin, Germany to work as a Full-Stack Developer at startups. "),Ce()(),Ne(37,"li",5)(38,"span",6),Fe(39,"2016"),Ce(),Ne(40,"p"),Fe(41,"Worked at a company as a Head of Engineering."),Ce()(),Ne(42,"li",5)(43,"span",6),Fe(44,"2020"),Ce(),Ne(45,"p"),Fe(46,"Started working as a Freelancer/Contractor."),Ce()()()())},encapsulation:2})}}return n})();function ql(n,e){return function(){return n.apply(e,arguments)}}var{toString:aV}=Object.prototype,{getPrototypeOf:D_}=Object,Sh=(n=>e=>{let t=aV.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Vr=n=>(n=n.toLowerCase(),e=>Sh(e)===n),Eh=n=>e=>typeof e===n,{isArray:qa}=Array,Xl=Eh("undefined");function cV(n){return n!==null&&!Xl(n)&&n.constructor!==null&&!Xl(n.constructor)&&rr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}var mC=Vr("ArrayBuffer");function lV(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&mC(n.buffer),e}var uV=Eh("string"),rr=Eh("function"),gC=Eh("number"),Mh=n=>n!==null&&typeof n=="object",dV=n=>n===!0||n===!1,wh=n=>{if(Sh(n)!=="object")return!1;let e=D_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},fV=Vr("Date"),hV=Vr("File"),pV=Vr("Blob"),mV=Vr("FileList"),gV=n=>Mh(n)&&rr(n.pipe),yV=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||rr(n.append)&&((e=Sh(n))==="formdata"||e==="object"&&rr(n.toString)&&n.toString()==="[object FormData]"))},vV=Vr("URLSearchParams"),[_V,xV,bV,wV]=["ReadableStream","Request","Response","Headers"].map(Vr),SV=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),qa(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{let s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length,a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function yC(n,e){e=e.toLowerCase();let t=Object.keys(n),r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}var go=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vC=n=>!Xl(n)&&n!==go;function C_(){let{caseless:n}=vC(this)&&this||{},e={},t=(r,i)=>{let s=n&&yC(e,i)||i;wh(e[s])&&wh(r)?e[s]=C_(e[s],r):wh(r)?e[s]=C_({},r):qa(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Yl(arguments[r],t);return e}var EV=(n,e,t,{allOwnKeys:r}={})=>(Yl(e,(i,s)=>{t&&rr(i)?n[s]=ql(i,t):n[s]=i},{allOwnKeys:r}),n),MV=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),TV=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},AV=(n,e,t,r)=>{let i,s,o,a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&D_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},CV=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;let r=n.indexOf(e,t);return r!==-1&&r===t},DV=n=>{if(!n)return null;if(qa(n))return n;let e=n.length;if(!gC(e))return null;let t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},IV=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&D_(Uint8Array)),RV=(n,e)=>{let r=(n&&n[Symbol.iterator]).call(n),i;for(;(i=r.next())&&!i.done;){let s=i.value;e.call(n,s[0],s[1])}},NV=(n,e)=>{let t,r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},PV=Vr("HTMLFormElement"),OV=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),hC=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),LV=Vr("RegExp"),_C=(n,e)=>{let t=Object.getOwnPropertyDescriptors(n),r={};Yl(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},FV=n=>{_C(n,(e,t)=>{if(rr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let r=n[t];if(rr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},kV=(n,e)=>{let t={},r=i=>{i.forEach(s=>{t[s]=!0})};return qa(n)?r(n):r(String(n).split(e)),t},UV=()=>{},BV=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,A_="abcdefghijklmnopqrstuvwxyz",pC="0123456789",xC={DIGIT:pC,ALPHA:A_,ALPHA_DIGIT:A_+A_.toUpperCase()+pC},VV=(n=16,e=xC.ALPHA_DIGIT)=>{let t="",{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function zV(n){return!!(n&&rr(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}var HV=n=>{let e=new Array(10),t=(r,i)=>{if(Mh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;let s=qa(r)?[]:{};return Yl(r,(o,a)=>{let c=t(o,i+1);!Xl(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return t(n,0)},GV=Vr("AsyncFunction"),jV=n=>n&&(Mh(n)||rr(n))&&rr(n.then)&&rr(n.catch),bC=((n,e)=>n?setImmediate:e?((t,r)=>(go.addEventListener("message",({source:i,data:s})=>{i===go&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),go.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",rr(go.postMessage)),WV=typeof queueMicrotask<"u"?queueMicrotask.bind(go):typeof process<"u"&&process.nextTick||bC,k={isArray:qa,isArrayBuffer:mC,isBuffer:cV,isFormData:yV,isArrayBufferView:lV,isString:uV,isNumber:gC,isBoolean:dV,isObject:Mh,isPlainObject:wh,isReadableStream:_V,isRequest:xV,isResponse:bV,isHeaders:wV,isUndefined:Xl,isDate:fV,isFile:hV,isBlob:pV,isRegExp:LV,isFunction:rr,isStream:gV,isURLSearchParams:vV,isTypedArray:IV,isFileList:mV,forEach:Yl,merge:C_,extend:EV,trim:SV,stripBOM:MV,inherits:TV,toFlatObject:AV,kindOf:Sh,kindOfTest:Vr,endsWith:CV,toArray:DV,forEachEntry:RV,matchAll:NV,isHTMLForm:PV,hasOwnProperty:hC,hasOwnProp:hC,reduceDescriptors:_C,freezeMethods:FV,toObjectSet:kV,toCamelCase:OV,noop:UV,toFiniteNumber:BV,findKey:yC,global:go,isContextDefined:vC,ALPHABET:xC,generateString:VV,isSpecCompliantForm:zV,toJSONObject:HV,isAsyncFn:GV,isThenable:jV,setImmediate:bC,asap:WV};function Xa(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}k.inherits(Xa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});var wC=Xa.prototype,SC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{SC[n]={value:n}});Object.defineProperties(Xa,SC);Object.defineProperty(wC,"isAxiosError",{value:!0});Xa.from=(n,e,t,r,i,s)=>{let o=Object.create(wC);return k.toFlatObject(n,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Xa.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};var Be=Xa;var Th=null;function I_(n){return k.isPlainObject(n)||k.isArray(n)}function MC(n){return k.endsWith(n,"[]")?n.slice(0,-2):n}function EC(n,e,t){return n?n.concat(e).map(function(i,s){return i=MC(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function $V(n){return k.isArray(n)&&!n.some(I_)}var qV=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function XV(n,e,t){if(!k.isObject(n))throw new TypeError("target must be an object");e=e||new(Th||FormData),t=k.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!k.isUndefined(m[y])});let r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!c&&k.isBlob(g))throw new Be("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,y,m){let p=g;if(g&&!m&&typeof g=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&$V(g)||(k.isFileList(g)||k.endsWith(y,"[]"))&&(p=k.toArray(g)))return y=MC(y),p.forEach(function(_,x){!(k.isUndefined(_)||_===null)&&e.append(o===!0?EC([y],x,s):o===null?y:y+"[]",l(_))}),!1}return I_(g)?!0:(e.append(EC(m,y,s),l(g)),!1)}let d=[],f=Object.assign(qV,{defaultVisitor:u,convertValue:l,isVisitable:I_});function h(g,y){if(!k.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(g),k.forEach(g,function(p,E){(!(k.isUndefined(p)||p===null)&&i.call(e,p,k.isString(E)?E.trim():E,y,f))===!0&&h(p,y?y.concat(E):[E])}),d.pop()}}if(!k.isObject(n))throw new TypeError("data must be an object");return h(n),e}var Ts=XV;function TC(n){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function AC(n,e){this._pairs=[],n&&Ts(n,this,e)}var CC=AC.prototype;CC.append=function(e,t){this._pairs.push([e,t])};CC.toString=function(e){let t=e?function(r){return e.call(this,r,TC)}:TC;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};var Ah=AC;function YV(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zl(n,e,t){if(!e)return n;let r=t&&t.encode||YV,i=t&&t.serialize,s;if(i?s=i(e,t):s=k.isURLSearchParams(e)?e.toString():new Ah(e,t).toString(r),s){let o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}var R_=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}},N_=R_;var Ch={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var DC=typeof URLSearchParams<"u"?URLSearchParams:Ah;var IC=typeof FormData<"u"?FormData:null;var RC=typeof Blob<"u"?Blob:null;var NC={isBrowser:!0,classes:{URLSearchParams:DC,FormData:IC,Blob:RC},protocols:["http","https","file","blob","url","data"]};var L_={};CP(L_,{hasBrowserEnv:()=>O_,hasStandardBrowserEnv:()=>ZV,hasStandardBrowserWebWorkerEnv:()=>KV,navigator:()=>P_,origin:()=>JV});var O_=typeof window<"u"&&typeof document<"u",P_=typeof navigator=="object"&&navigator||void 0,ZV=O_&&(!P_||["ReactNative","NativeScript","NS"].indexOf(P_.product)<0),KV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",JV=O_&&window.location.href||"http://localhost";var Gt=ae(ae({},L_),NC);function F_(n,e){return Ts(n,new Gt.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Gt.isNode&&k.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function QV(n){return k.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ez(n){let e={},t=Object.keys(n),r,i=t.length,s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function tz(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;let a=Number.isFinite(+o),c=s>=t.length;return o=!o&&k.isArray(i)?i.length:o,c?(k.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&k.isArray(i[o])&&(i[o]=ez(i[o])),!a)}if(k.isFormData(n)&&k.isFunction(n.entries)){let t={};return k.forEachEntry(n,(r,i)=>{e(QV(r),i,t,0)}),t}return null}var Dh=tz;function nz(n,e,t){if(k.isString(n))try{return(e||JSON.parse)(n),k.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}var k_={transitional:Ch,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=k.isObject(e);if(s&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return i?JSON.stringify(Dh(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)||k.isReadableStream(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return F_(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return Ts(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),nz(e)):e}],transformResponse:[function(e){let t=this.transitional||k_.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(k.isResponse(e)||k.isReadableStream(e))return e;if(e&&k.isString(e)&&(r&&!this.responseType||i)){let o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Be.from(a,Be.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],n=>{k_.headers[n]={}});var Ya=k_;var rz=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PC=n=>{let e={},t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&rz[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e};var OC=Symbol("internals");function Kl(n){return n&&String(n).trim().toLowerCase()}function Ih(n){return n===!1||n==null?n:k.isArray(n)?n.map(Ih):String(n)}function iz(n){let e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}var sz=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function U_(n,e,t,r,i){if(k.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function oz(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function az(n,e){let t=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}var Za=class{constructor(e){e&&this.set(e)}set(e,t,r){let i=this;function s(a,c,l){let u=Kl(c);if(!u)throw new Error("header name must be a non-empty string");let d=k.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=Ih(a))}let o=(a,c)=>k.forEach(a,(l,u)=>s(l,u,c));if(k.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(k.isString(e)&&(e=e.trim())&&!sz(e))o(PC(e),t);else if(k.isHeaders(e))for(let[a,c]of e.entries())s(c,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Kl(e),e){let r=k.findKey(this,e);if(r){let i=this[r];if(!t)return i;if(t===!0)return iz(i);if(k.isFunction(t))return t.call(this,i,r);if(k.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Kl(e),e){let r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||U_(this,this[r],r,t)))}return!1}delete(e,t){let r=this,i=!1;function s(o){if(o=Kl(o),o){let a=k.findKey(r,o);a&&(!t||U_(r,r[a],a,t))&&(delete r[a],i=!0)}}return k.isArray(e)?e.forEach(s):s(e),i}clear(e){let t=Object.keys(this),r=t.length,i=!1;for(;r--;){let s=t[r];(!e||U_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){let t=this,r={};return k.forEach(this,(i,s)=>{let o=k.findKey(r,s);if(o){t[o]=Ih(i),delete t[s];return}let a=e?oz(s):String(s).trim();a!==s&&delete t[s],t[a]=Ih(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return k.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&k.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){let r=(this[OC]=this[OC]={accessors:{}}).accessors,i=this.prototype;function s(o){let a=Kl(o);r[a]||(az(i,o),r[a]=!0)}return k.isArray(e)?e.forEach(s):s(e),this}};Za.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(Za.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});k.freezeMethods(Za);var tn=Za;function Jl(n,e){let t=this||Ya,r=e||t,i=tn.from(r.headers),s=r.data;return k.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ql(n){return!!(n&&n.__CANCEL__)}function LC(n,e,t){Be.call(this,n??"canceled",Be.ERR_CANCELED,e,t),this.name="CanceledError"}k.inherits(LC,Be,{__CANCEL__:!0});var li=LC;function eu(n,e,t){let r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Be("Request failed with status code "+t.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function B_(n){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function cz(n,e){n=n||10;let t=new Array(n),r=new Array(n),i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){let l=Date.now(),u=r[s];o||(o=l),t[i]=c,r[i]=l;let d=s,f=0;for(;d!==i;)f+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),l-o<e)return;let h=u&&l-u;return h?Math.round(f*1e3/h):void 0}}var FC=cz;function lz(n,e){let t=0,r=1e3/e,i,s,o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,l)};return[(...l)=>{let u=Date.now(),d=u-t;d>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}var kC=lz;var Ka=(n,e,t=3)=>{let r=0,i=FC(50,250);return kC(s=>{let o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;let d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},V_=(n,e)=>{let t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},z_=n=>(...e)=>k.asap(()=>n(...e));var UC=Gt.hasStandardBrowserEnv?function(){let e=Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent),t=document.createElement("a"),r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){let a=k.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();var BC=Gt.hasStandardBrowserEnv?{write(n,e,t,r,i,s){let o=[n+"="+encodeURIComponent(e)];k.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),k.isString(r)&&o.push("path="+r),k.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){let e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function H_(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function G_(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function tu(n,e){return n&&!H_(e)?G_(n,e):e}var VC=n=>n instanceof tn?ae({},n):n;function zr(n,e){e=e||{};let t={};function r(l,u,d){return k.isPlainObject(l)&&k.isPlainObject(u)?k.merge.call({caseless:d},l,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function i(l,u,d){if(k.isUndefined(u)){if(!k.isUndefined(l))return r(void 0,l,d)}else return r(l,u,d)}function s(l,u){if(!k.isUndefined(u))return r(void 0,u)}function o(l,u){if(k.isUndefined(u)){if(!k.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in e)return r(l,u);if(d in n)return r(void 0,l)}let c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(VC(l),VC(u),!0)};return k.forEach(Object.keys(Object.assign({},n,e)),function(u){let d=c[u]||i,f=d(n[u],e[u],u);k.isUndefined(f)&&d!==a||(t[u]=f)}),t}var Rh=n=>{let e=zr({},n),{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=tn.from(o),e.url=Zl(tu(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(k.isFormData(t)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){let[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(Gt.hasStandardBrowserEnv&&(r&&k.isFunction(r)&&(r=r(e)),r||r!==!1&&UC(e.url))){let l=i&&s&&BC.read(s);l&&o.set(i,l)}return e};var uz=typeof XMLHttpRequest<"u",zC=uz&&function(n){return new Promise(function(t,r){let i=Rh(n),s=i.data,o=tn.from(i.headers).normalize(),{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,f,h,g;function y(){h&&h(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function p(){if(!m)return;let _=tn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:_,config:n,request:m};eu(function(D){t(D),y()},function(D){r(D),y()},C),m=null}"onloadend"in m?m.onloadend=p:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(p)},m.onabort=function(){m&&(r(new Be("Request aborted",Be.ECONNABORTED,n,m)),m=null)},m.onerror=function(){r(new Be("Network Error",Be.ERR_NETWORK,n,m)),m=null},m.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",C=i.transitional||Ch;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new Be(x,C.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,n,m)),m=null},s===void 0&&o.setContentType(null),"setRequestHeader"in m&&k.forEach(o.toJSON(),function(x,C){m.setRequestHeader(C,x)}),k.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),a&&a!=="json"&&(m.responseType=i.responseType),l&&([f,g]=Ka(l,!0),m.addEventListener("progress",f)),c&&m.upload&&([d,h]=Ka(c),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=_=>{m&&(r(!_||_.type?new li(null,n,m):_),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));let E=B_(i.url);if(E&&Gt.protocols.indexOf(E)===-1){r(new Be("Unsupported protocol "+E+":",Be.ERR_BAD_REQUEST,n));return}m.send(s||null)})};var dz=(n,e)=>{let{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i,s=function(l){if(!i){i=!0,a();let u=l instanceof Error?l:this.reason;r.abort(u instanceof Be?u:new li(u instanceof Error?u.message:u))}},o=e&&setTimeout(()=>{o=null,s(new Be(`timeout ${e} of ms exceeded`,Be.ETIMEDOUT))},e),a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),n=null)};n.forEach(l=>l.addEventListener("abort",s));let{signal:c}=r;return c.unsubscribe=()=>k.asap(a),c}},HC=dz;var fz=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},hz=function(n,e){return tg(this,null,function*(){try{for(var t=pw(pz(n)),r,i,s;r=!(i=yield new qs(t.next())).done;r=!1){let o=i.value;yield*ng(fz(o,e))}}catch{s=[i]}finally{try{r&&(i=t.return)&&(yield new qs(i.call(t)))}finally{if(s)throw s[0]}}})},pz=function(n){return tg(this,null,function*(){if(n[Symbol.asyncIterator]){yield*ng(n);return}let e=n.getReader();try{for(;;){let{done:t,value:r}=yield new qs(e.read());if(t)break;yield r}}finally{yield new qs(e.cancel())}})},j_=(n,e,t,r)=>{let i=hz(n,e),s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({pull(l){return xe(this,null,function*(){try{let{done:u,value:d}=yield i.next();if(u){a(),l.close();return}let f=d.byteLength;if(t){let h=s+=f;t(h)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}})},cancel(l){return a(l),i.return()}},{highWaterMark:2})};var Ph=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jC=Ph&&typeof ReadableStream=="function",mz=Ph&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):n=>xe(void 0,null,function*(){return new Uint8Array(yield new Response(n).arrayBuffer())})),WC=(n,...e)=>{try{return!!n(...e)}catch{return!1}},gz=jC&&WC(()=>{let n=!1,e=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),GC=64*1024,W_=jC&&WC(()=>k.isReadableStream(new Response("").body)),Nh={stream:W_&&(n=>n.body)};Ph&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Nh[e]&&(Nh[e]=k.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Be(`Response type '${e}' is not supported`,Be.ERR_NOT_SUPPORT,r)})})})(new Response);var yz=n=>xe(void 0,null,function*(){if(n==null)return 0;if(k.isBlob(n))return n.size;if(k.isSpecCompliantForm(n))return(yield new Request(Gt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(k.isArrayBufferView(n)||k.isArrayBuffer(n))return n.byteLength;if(k.isURLSearchParams(n)&&(n=n+""),k.isString(n))return(yield mz(n)).byteLength}),vz=(n,e)=>xe(void 0,null,function*(){let t=k.toFiniteNumber(n.getContentLength());return t??yz(e)}),$C=Ph&&(n=>xe(void 0,null,function*(){let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:f}=Rh(n);l=l?(l+"").toLowerCase():"text";let h=HC([i,s&&s.toAbortSignal()],o),g,y=h&&h.unsubscribe&&(()=>{h.unsubscribe()}),m;try{if(c&&gz&&t!=="get"&&t!=="head"&&(m=yield vz(u,r))!==0){let C=new Request(e,{method:"POST",body:r,duplex:"half"}),T;if(k.isFormData(r)&&(T=C.headers.get("content-type"))&&u.setContentType(T),C.body){let[D,I]=V_(m,Ka(z_(c)));r=j_(C.body,GC,D,I)}}k.isString(d)||(d=d?"include":"omit");let p="credentials"in Request.prototype;g=new Request(e,Dt(ae({},f),{signal:h,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:p?d:void 0}));let E=yield fetch(g),_=W_&&(l==="stream"||l==="response");if(W_&&(a||_&&y)){let C={};["status","statusText","headers"].forEach(S=>{C[S]=E[S]});let T=k.toFiniteNumber(E.headers.get("content-length")),[D,I]=a&&V_(T,Ka(z_(a),!0))||[];E=new Response(j_(E.body,GC,D,()=>{I&&I(),y&&y()}),C)}l=l||"text";let x=yield Nh[k.findKey(Nh,l)||"text"](E,n);return!_&&y&&y(),yield new Promise((C,T)=>{eu(C,T,{data:x,headers:tn.from(E.headers),status:E.status,statusText:E.statusText,config:n,request:g})})}catch(p){throw y&&y(),p&&p.name==="TypeError"&&/fetch/i.test(p.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,n,g),{cause:p.cause||p}):Be.from(p,p&&p.code,n,g)}}));var $_={http:Th,xhr:zC,fetch:$C};k.forEach($_,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});var qC=n=>`- ${n}`,_z=n=>k.isFunction(n)||n===null||n===!1,Oh={getAdapter:n=>{n=k.isArray(n)?n:[n];let{length:e}=n,t,r,i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!_z(t)&&(r=$_[(o=String(t)).toLowerCase()],r===void 0))throw new Be(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){let s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build")),o=e?s.length>1?`since :
`+s.map(qC).join(`
`):" "+qC(s[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:$_};function q_(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new li(null,n)}function Lh(n){return q_(n),n.headers=tn.from(n.headers),n.data=Jl.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Oh.getAdapter(n.adapter||Ya.adapter)(n).then(function(r){return q_(n),r.data=Jl.call(n,n.transformResponse,r),r.headers=tn.from(r.headers),r},function(r){return Ql(r)||(q_(n),r&&r.response&&(r.response.data=Jl.call(n,n.transformResponse,r.response),r.response.headers=tn.from(r.response.headers))),Promise.reject(r)})}var Fh="1.7.7";var X_={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{X_[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});var XC={};X_.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Fh+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Be(i(o," has been removed"+(t?" in "+t:"")),Be.ERR_DEPRECATED);return t&&!XC[o]&&(XC[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function xz(n,e,t){if(typeof n!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);let r=Object.keys(n),i=r.length;for(;i-- >0;){let s=r[i],o=e[s];if(o){let a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new Be("option "+s+" must be "+c,Be.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Be("Unknown option "+s,Be.ERR_BAD_OPTION)}}var kh={assertOptions:xz,validators:X_};var As=kh.validators,Ja=class{constructor(e){this.defaults=e,this.interceptors={request:new N_,response:new N_}}request(e,t){return xe(this,null,function*(){try{return yield this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}})}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=zr(this.defaults,t);let{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&kh.assertOptions(r,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),i!=null&&(k.isFunction(i)?t.paramsSerializer={serialize:i}:kh.assertOptions(i,{encode:As.function,serialize:As.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&k.merge(s.common,s[t.method]);s&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=tn.concat(o,s);let a=[],c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});let l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,d=0,f;if(!c){let g=[Lh.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),f=g.length,u=Promise.resolve(t);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let h=t;for(d=0;d<f;){let g=a[d++],y=a[d++];try{h=g(h)}catch(m){y.call(this,m);break}}try{u=Lh.call(this,h)}catch(g){return Promise.reject(g)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=zr(this.defaults,e);let t=tu(e.baseURL,e.url);return Zl(t,e.params,e.paramsSerializer)}};k.forEach(["delete","get","head","options"],function(e){Ja.prototype[e]=function(t,r){return this.request(zr(r||{},{method:e,url:t,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(zr(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ja.prototype[e]=t(),Ja.prototype[e+"Form"]=t(!0)});var nu=Ja;var Y_=class n{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});let r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s,o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new li(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new n(function(i){e=i}),cancel:e}}},YC=Y_;function Z_(n){return function(t){return n.apply(null,t)}}function K_(n){return k.isObject(n)&&n.isAxiosError===!0}var J_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(J_).forEach(([n,e])=>{J_[e]=n});var ZC=J_;function KC(n){let e=new nu(n),t=ql(nu.prototype.request,e);return k.extend(t,nu.prototype,e,{allOwnKeys:!0}),k.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return KC(zr(n,i))},t}var Xt=KC(Ya);Xt.Axios=nu;Xt.CanceledError=li;Xt.CancelToken=YC;Xt.isCancel=Ql;Xt.VERSION=Fh;Xt.toFormData=Ts;Xt.AxiosError=Be;Xt.Cancel=Xt.CanceledError;Xt.all=function(e){return Promise.all(e)};Xt.spread=Z_;Xt.isAxiosError=K_;Xt.mergeConfig=zr;Xt.AxiosHeaders=tn;Xt.formToJSON=n=>Dh(k.isHTMLForm(n)?new FormData(n):n);Xt.getAdapter=Oh.getAdapter;Xt.HttpStatusCode=ZC;Xt.default=Xt;var Uh=Xt;var{Axios:Ite,AxiosError:Rte,CanceledError:Nte,isCancel:Pte,CancelToken:Ote,VERSION:Lte,all:Fte,Cancel:kte,isAxiosError:Ute,spread:Bte,toFormData:Vte,AxiosHeaders:zte,HttpStatusCode:Hte,formToJSON:Gte,getAdapter:jte,mergeConfig:Wte}=Uh;var bz=Function.prototype.toString,Q_=Object.create,wz=Object.prototype.toString,Sz=function(){function n(){this._keys=[],this._values=[]}return n.prototype.has=function(e){return!!~this._keys.indexOf(e)},n.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},n.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},n}();function Ez(){return new Sz}function Mz(){return new WeakMap}var Tz=typeof WeakMap<"u"?Mz:Ez;function t0(n){if(!n)return Q_(null);var e=n.constructor;if(e===Object)return n===Object.prototype?{}:Q_(n);if(e&&~bz.call(e).indexOf("[native code]"))try{return new e}catch{}return Q_(n)}function Az(n){var e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}function Cz(n){return n.flags}var Dz=/test/g.flags==="g"?Cz:Az;function JC(n){var e=wz.call(n);return e.substring(8,e.length-1)}function Iz(n){return n[Symbol.toStringTag]||JC(n)}var Rz=typeof Symbol<"u"?Iz:JC,Nz=Object.defineProperty,Pz=Object.getOwnPropertyDescriptor,QC=Object.getOwnPropertyNames,n0=Object.getOwnPropertySymbols,eD=Object.prototype,tD=eD.hasOwnProperty,Oz=eD.propertyIsEnumerable,nD=typeof n0=="function";function Lz(n){return QC(n).concat(n0(n))}var Fz=nD?Lz:QC;function Vh(n,e,t){for(var r=Fz(n),i=0,s=r.length,o=void 0,a=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(a=Pz(n,o),!a){e[o]=t.copier(n[o],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{Nz(e,o,a)}catch{e[o]=a.value}}return e}function kz(n,e){var t=new e.Constructor;e.cache.set(n,t);for(var r=0,i=n.length;r<i;++r)t[r]=e.copier(n[r],e);return t}function Uz(n,e){var t=new e.Constructor;return e.cache.set(n,t),Vh(n,t,e)}function rD(n,e){return n.slice(0)}function Bz(n,e){return n.slice(0,n.size,n.type)}function Vz(n,e){return new e.Constructor(rD(n.buffer))}function zz(n,e){return new e.Constructor(n.getTime())}function iD(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r,i){t.set(i,e.copier(r,e))}),t}function Hz(n,e){return Vh(n,iD(n,e),e)}function Gz(n,e){var t=t0(e.prototype);e.cache.set(n,t);for(var r in n)tD.call(n,r)&&(t[r]=e.copier(n[r],e));return t}function jz(n,e){var t=t0(e.prototype);e.cache.set(n,t);for(var r in n)tD.call(n,r)&&(t[r]=e.copier(n[r],e));for(var i=n0(n),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],Oz.call(n,a)&&(t[a]=e.copier(n[a],e));return t}var Wz=nD?jz:Gz;function $z(n,e){var t=t0(e.prototype);return e.cache.set(n,t),Vh(n,t,e)}function e0(n,e){return new e.Constructor(n.valueOf())}function qz(n,e){var t=new e.Constructor(n.source,Dz(n));return t.lastIndex=n.lastIndex,t}function Bh(n,e){return n}function sD(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r){t.add(e.copier(r,e))}),t}function Xz(n,e){return Vh(n,sD(n,e),e)}var Yz=Array.isArray,r0=Object.assign,Zz=Object.getPrototypeOf||function(n){return n.__proto__},oD={array:kz,arrayBuffer:rD,blob:Bz,dataView:Vz,date:zz,error:Bh,map:iD,object:Wz,regExp:qz,set:sD},Kz=r0({},oD,{array:Uz,map:Hz,object:$z,set:Xz});function Jz(n){return{Arguments:n.object,Array:n.array,ArrayBuffer:n.arrayBuffer,Blob:n.blob,Boolean:e0,DataView:n.dataView,Date:n.date,Error:n.error,Float32Array:n.arrayBuffer,Float64Array:n.arrayBuffer,Int8Array:n.arrayBuffer,Int16Array:n.arrayBuffer,Int32Array:n.arrayBuffer,Map:n.map,Number:e0,Object:n.object,Promise:Bh,RegExp:n.regExp,Set:n.set,String:e0,WeakMap:Bh,WeakSet:Bh,Uint8Array:n.arrayBuffer,Uint8ClampedArray:n.arrayBuffer,Uint16Array:n.arrayBuffer,Uint32Array:n.arrayBuffer,Uint64Array:n.arrayBuffer}}function aD(n){var e=r0({},oD,n),t=Jz(e),r=t.Array,i=t.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=Zz(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return i(o,a);if(Yz(o))return r(o,a);var c=t[Rz(o)];return c?c(o,a):typeof o.then=="function"?o:i(o,a)}return function(a){return s(a,{Constructor:void 0,cache:Tz(),copier:s,prototype:void 0})}}function Qz(n){return aD(r0({},Kz,n))}var qte=Qz({}),Qa=aD({});var bR=as(WI(),1);function I0(n,e){n.interceptors.request.use(function(t){return e().then(r=>(t.headers.set("Authorization",`Bearer ${r}`),t))})}var wo=as(P0(),1);function ZI(){return typeof wo.default<"u"&&!wo.default.browser}function KI(){return typeof window<"u"&&"navigator"in window&&"product"in window.navigator&&window.navigator.product==="ReactNative"}function JI(){return wo.default.versions&&wo.default.versions.node?`v${wo.default.versions.node}`:wo.default.version}function QI(){return window}function cu(){}var eG=n=>new Promise(e=>{setTimeout(e,n)}),tG=n=>Math.pow(Math.SQRT2,n);function O0(n,e=5){let{responseLogger:t=cu,requestLogger:r=cu}=n.defaults;n.interceptors.request.use(function(i){return r(i),i},function(i){return r(i),Promise.reject(i)}),n.interceptors.response.use(function(i){return t(i),i},function(i){return xe(this,null,function*(){let{response:s}=i,{config:o}=i;if(t(i),!o||!n.defaults.retryOnError)return Promise.reject(i);let a=o.attempts||1;if(a>e)return i.attempts=o.attempts,Promise.reject(i);let c=null,l=tG(a);return s?s.status>=500&&s.status<600?c=`Server ${s.status}`:s.status===429&&(c="Rate limit",s.headers&&i.response.headers["x-contentful-ratelimit-reset"]&&(l=s.headers["x-contentful-ratelimit-reset"])):c="Connection",c?(l=Math.floor(l*1e3+Math.random()*200+500),n.defaults.logHandler("warning",`${c} error occurred. Waiting for ${l} ms before retrying...`),o.attempts=a+1,delete o.httpAgent,delete o.httpsAgent,eG(l).then(()=>n(o))):Promise.reject(i)})})}var z0=as(vR(),1);var U0=class extends Error{constructor(){super("Throttled function aborted"),this.name="AbortError"}};function B0({limit:n,interval:e,strict:t,onDelay:r}){if(!Number.isFinite(n))throw new TypeError("Expected `limit` to be a finite number");if(!Number.isFinite(e))throw new TypeError("Expected `interval` to be a finite number");let i=new Map,s=0,o=0;function a(){let d=Date.now();return d-s>e?(o=1,s=d,0):(o<n?o++:(s+=e,o=1),s-d)}let c=[];function l(){let d=Date.now();if(c.length>0&&d-c.at(-1)>e&&(c.length=0),c.length<n)return c.push(d),0;let f=c[0]+e;return c.shift(),c.push(f),Math.max(0,f-d)}let u=t?l:a;return d=>{let f=function(...h){if(!f.isEnabled)return xe(this,null,function*(){return d.apply(this,h)});let g;return new Promise((y,m)=>{let p=()=>{y(d.apply(this,h)),i.delete(g)},E=u();E>0?(g=setTimeout(p,E),i.set(g,m),r?.(...h)):p()})};return f.abort=()=>{for(let h of i.keys())clearTimeout(h),i.get(h)(new U0);i.clear(),c.splice(0,c.length)},f.isEnabled=!0,Object.defineProperty(f,"queueSize",{get(){return i.size}}),f}}var H0=/(?<value>\d+)(%)/;function V0(n,e=7){let t=e;if(H0.test(n)){let r=n.match(H0)?.groups;if(r&&r.value){let i=parseInt(r.value)/100;t=Math.round(e*i)}}return Math.min(30,Math.max(1,t))}function _R(n,e){return e("info",`Throttle request to ${n}/s`),B0({limit:n,interval:1e3,strict:!1})}var xR=(n,e="auto")=>{let{logHandler:t=cu}=n.defaults,r=(0,z0.default)(e)?V0(e):V0("auto",e),i=_R(r,t),s=!1,o=n.interceptors.request.use(c=>i(()=>c)(),function(c){return Promise.reject(c)}),a=n.interceptors.response.use(c=>{if(!s&&(0,z0.default)(e)&&(e==="auto"||H0.test(e))&&c.headers&&c.headers["x-contentful-ratelimit-second-limit"]){let l=parseInt(c.headers["x-contentful-ratelimit-second-limit"]),u=V0(e,l);u!==r&&(o&&n.interceptors.request.eject(o),r=u,i=_R(u,t),o=n.interceptors.request.use(d=>i(()=>d)(),function(d){return Promise.reject(d)})),s=!0}return c},function(c){return Promise.reject(c)});return()=>{n.interceptors.request.eject(o),n.interceptors.response.eject(a)}};var TG=/^(?!\w+:\/\/)([^\s:]+\.?[^\s:]+)(?::(\d+))?(?!:)$/;function AG(n){let e=Qa(n);return e.httpAgent=n.httpAgent,e.httpsAgent=n.httpsAgent,e}function uu(n,e){let r=ae(ae({},{insecure:!1,retryOnError:!0,logHandler:(d,f)=>{if(d==="error"&&f){let h=[f.name,f.message].filter(g=>g).join(" - ");console.error(`[error] ${h}`),console.error(f);return}console.log(`[${d}] ${f}`)},headers:{},httpAgent:!1,httpsAgent:!1,timeout:3e4,throttle:0,basePath:"",adapter:void 0,maxContentLength:1073741824,maxBodyLength:1073741824}),e);if(!r.accessToken){let d=new TypeError("Expected parameter accessToken");throw r.logHandler("error",d),d}let i=r.insecure?"http":"https",s=r.space?`${r.space}/`:"",o=r.defaultHostname,a=r.insecure?80:443;if(r.host&&TG.test(r.host)){let d=r.host.split(":");d.length===2?[o,a]=d:o=d[0]}r.basePath&&(r.basePath=`/${r.basePath.split("/").filter(Boolean).join("/")}`);let c=e.baseURL||`${i}://${o}:${a}${r.basePath}/spaces/${s}`;!r.headers.Authorization&&typeof r.accessToken!="function"&&(r.headers.Authorization="Bearer "+r.accessToken);let l={baseURL:c,headers:r.headers,httpAgent:r.httpAgent,httpsAgent:r.httpsAgent,proxy:r.proxy,timeout:r.timeout,adapter:r.adapter,maxContentLength:r.maxContentLength,maxBodyLength:r.maxBodyLength,paramsSerializer:{serialize:d=>bR.default.stringify(d)},logHandler:r.logHandler,responseLogger:r.responseLogger,requestLogger:r.requestLogger,retryOnError:r.retryOnError},u=n.create(l);return u.httpClientParams=e,u.cloneWithNewParams=function(d){return uu(n,ae(ae({},AG(e)),d))},r.onBeforeRequest&&u.interceptors.request.use(r.onBeforeRequest),typeof r.accessToken=="function"&&I0(u,r.accessToken),r.throttle&&xR(u,r.throttle),O0(u,r.retryLimit),r.onError&&u.interceptors.response.use(d=>d,r.onError),u}function Cn({query:n}){let e={};return delete n.resolveLinks,e.params=Qa(n),e}function wR(n){let e=Object.getOwnPropertyNames(n);for(let t of e){let r=n[t];r&&typeof r=="object"&&wR(r)}return Object.freeze(n)}function rp(n){return wR(n.sys||{}),n}var G0=as(P0(),1);function SR(){let n=QI();if(!n)return null;let e=n.navigator.userAgent,t=n.navigator.platform,r=["Macintosh","MacIntel","MacPPC","Mac68K"],i=["Win32","Win64","Windows","WinCE"],s=["iPhone","iPad","iPod"];return r.indexOf(t)!==-1?"macOS":s.indexOf(t)!==-1?"iOS":i.indexOf(t)!==-1?"Windows":/Android/.test(e)?"Android":/Linux/.test(t)?"Linux":null}function CG(){let n=G0.default.platform||"linux",e=G0.default.version||"0.0.0",t={android:"Android",aix:"Linux",darwin:"macOS",freebsd:"Linux",linux:"Linux",openbsd:"Linux",sunos:"Linux",win32:"Windows"};return n in t?`${t[n]||"Linux"}/${e}`:null}function ip(n,e,t,r){let i=[];e&&i.push(`app ${e}`),t&&i.push(`integration ${t}`),r&&i.push("feature "+r),i.push(`sdk ${n}`);let s=null;try{KI()?(s=SR(),i.push("platform ReactNative")):ZI()?(s=CG(),i.push(`platform node.js/${JI()}`)):(s=SR(),i.push("platform browser"))}catch{s=null}return s&&i.push(`os ${s}`),`${i.filter(o=>o!=="").join("; ")};`}function du(n){return Object.defineProperty(n,"toPlainObject",{enumerable:!1,configurable:!1,writable:!1,value:function(){return Qa(this)}})}var sp=as(IR(),1);function zn(n){let{config:e,response:t}=n,r;if(e&&e.headers&&e.headers.Authorization){let a=`...${e.headers.Authorization.toString().substr(-5)}`;e.headers.Authorization=`Bearer ${a}`}if(!(0,sp.default)(t)||!(0,sp.default)(e))throw n;let i=t?.data,s={status:t?.status,statusText:t?.statusText,message:"",details:{}};e&&(0,sp.default)(e)&&(s.request={url:e.url,headers:e.headers,method:e.method,payloadData:e.data}),i&&typeof i=="object"&&("requestId"in i&&(s.requestId=i.requestId||"UNKNOWN"),"message"in i&&(s.message=i.message||""),"details"in i&&(s.details=i.details||{}),r=i.sys?.id);let o=new Error;o.name=r&&r!=="Unknown"?r:`${t?.status} ${t?.statusText}`;try{o.message=JSON.stringify(s,null,"  ")}catch{o.message=s?.message??""}throw o}function j0(n){return function(t){return Object.assign({},n,t)}}var LR={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},X0={0:8203,1:8204,2:8205,3:65279},zG=new Array(4).fill(String.fromCodePoint(X0[0])).join("");function HG(n){let e=JSON.stringify(n);return`${zG}${Array.from(e).map(t=>{let r=t.charCodeAt(0);if(r>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${t} (${r})`);return Array.from(r.toString(4).padStart(4,"0")).map(i=>String.fromCodePoint(X0[i])).join("")}).join("")}`}function GG(n){return!Number.isNaN(Number(n))||/[a-z]/i.test(n)&&!/\d+(?:[-:\/]\d+){2}(?:T\d+(?:[-:\/]\d+){1,2}(\.\d+)?Z?)?/.test(n)?!1:!!Date.parse(n)}function jG(n){try{new URL(n,n.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}function WG(n,e,t="auto"){return t===!0||t==="auto"&&(GG(n)||jG(n))?n:`${n}${HG(e)}`}var _re=Object.fromEntries(Object.entries(X0).map(n=>n.reverse())),xre=Object.fromEntries(Object.entries(LR).map(n=>n.reverse())),$G=`${Object.values(LR).map(n=>`\\u{${n.toString(16)}}`).join("")}`,bre=new RegExp(`[${$G}]{4,}`,"gu");function fu(n,e){return WG(n,e)}var W0,RR;function qG(){if(RR)return W0;RR=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString;return W0=function(t,r,i){if(e.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var s=t.length;if(s===+s)for(var o=0;o<s;o++)r.call(i,t[o],o,t);else for(var a in t)n.call(t,a)&&r.call(i,t[a],a,t)},W0}var $0,NR;function XG(){if(NR)return $0;NR=1;var n=qG();$0=e;function e(t,r,i){if(arguments.length===3)return e.set(t,r,i);if(arguments.length===2)return e.get(t,r);var s=e.bind(e,t);for(var o in e)e.hasOwnProperty(o)&&(s[o]=e[o].bind(s,t));return s}return e.get=function(t,r){for(var i=Array.isArray(r)?r:e.parse(r),s=0;s<i.length;++s){var o=i[s];if(!(typeof t=="object"&&o in t))throw new Error("Invalid reference token: "+o);t=t[o]}return t},e.set=function(t,r,i){var s=Array.isArray(r)?r:e.parse(r),o=s[0];if(s.length===0)throw Error("Can not set the root object");for(var a=0;a<s.length-1;++a){var c=s[a];typeof c!="string"&&typeof c!="number"&&(c=String(c)),!(c==="__proto__"||c==="constructor"||c==="prototype")&&(c==="-"&&Array.isArray(t)&&(c=t.length),o=s[a+1],c in t||(o.match(/^(\d+|-)$/)?t[c]=[]:t[c]={}),t=t[c])}return o==="-"&&Array.isArray(t)&&(o=t.length),t[o]=i,this},e.remove=function(t,r){var i=Array.isArray(r)?r:e.parse(r),s=i[i.length-1];if(s===void 0)throw new Error('Invalid JSON pointer for remove: "'+r+'"');var o=e.get(t,i.slice(0,-1));if(Array.isArray(o)){var a=+s;if(s===""&&isNaN(a))throw new Error('Invalid array index: "'+s+'"');Array.prototype.splice.call(o,a,1)}else delete o[s]},e.dict=function(t,r){var i={};return e.walk(t,function(s,o){i[o]=s},r),i},e.walk=function(t,r,i){var s=[];i=i||function(o){var a=Object.prototype.toString.call(o);return a==="[object Object]"||a==="[object Array]"},function o(a){n(a,function(c,l){s.push(String(l)),i(c)?o(c):r(c,e.compile(s)),s.pop()})}(t)},e.has=function(t,r){try{e.get(t,r)}catch{return!1}return!0},e.escape=function(t){return t.toString().replace(/~/g,"~0").replace(/\//g,"~1")},e.unescape=function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")},e.parse=function(t){if(t==="")return[];if(t.charAt(0)!=="/")throw new Error("Invalid JSON pointer: "+t);return t.substring(1).split(/\//).map(e.unescape)},e.compile=function(t){return t.length===0?"":"/"+t.map(e.escape).join("/")},$0}var mi=XG(),YG=({pointer:n,mappings:e,data:t,hiddenStrings:r})=>{let i=e[n];if(i){delete e[n];let s=q0(t,n);for(let o of s){e[o]=i;let a=mi.get(t,o),c=fu(a,r);mi.set(t,o,c)}}else{let s=q0(t,n);for(let o of s){let a=mi.get(t,o),c=fu(a,r);mi.set(t,o,c)}}},q0=(n,e="")=>{let t=[],r=mi.get(n,e);if(r.content)for(let i=0;i<r.content.length;i++)r.content[i].nodeType==="text"?t.push(`${e}/content/${i}/value`):t.push(...q0(n,`${e}/content/${i}`));return t},PR=({entityId:n,entityType:e,space:t,environment:r,field:i,locale:s,editorInterface:o,fieldType:a,targetOrigin:c,platform:l})=>{let u={origin:"contentful.com",href:`${`${c||"https://app.contentful.com"}/spaces/${t}/environments/${r}`}/${e==="Entry"?"entries":"assets"}/${n}/?focusedField=${i}&focusedLocale=${s}&source=vercel-content-link`,contentful:{editorInterface:o,fieldType:a}};return l==="vercel"&&delete u.contentful,u},ZG=n=>["builtin","sidebar-builtin","editor-builtin"].includes(n),KG=n=>QG.includes(n);function JG(n){if(typeof structuredClone=="function")return structuredClone(n);try{return JSON.parse(JSON.stringify(n))}catch(e){return console.warn("Failed to clone data:",n,e),n}}var QG=["singleLine","tagEditor","listInput","checkbox","richTextEditor","multipleLine"];function OR(n,e,t,r,i,s,o){let a=o?e[o]:e;switch(n){case"Symbol":{let c=fu(a,t);mi.set(r,i,c);break}case"Text":{let c=fu(a,t);mi.set(r,i,c);break}case"RichText":{YG({pointer:"",mappings:s,data:a,hiddenStrings:t});break}case"Array":{let c=a.map(l=>typeof l=="string"?fu(l,t):l);mi.set(r,i,c);break}}}var op=(n,e,t,r,i)=>{if(!n.fields)return;let{contentSourceMaps:s}=n.sys;if(!s){console.error("Content source maps data is missing");return}let{mappings:o}=s;for(let a in o){let{source:c}=o[a],l=n.sys.space.sys.id,u=n.sys.environment.sys.id,d=n.sys.id,f=n.sys.type,h=e[c.fieldType],g=t[c.editorInterface];if(ZG(g.widgetNamespace)&&!KG(g.widgetId))continue;let y=a.startsWith("/")?a:`/${a}`;if(mi.has(n,y)){let m=mi.get(n,y);if(m===null)return;let p=y.split("/").pop();if(!p){console.error("Field name could not be extracted from the pointer",y);return}let E=n.sys.locale;if(E){let _=PR({entityId:d,entityType:f,space:l,environment:u,field:p,locale:E,editorInterface:g,fieldType:h,targetOrigin:r,platform:i});OR(h,m,_,n,y,o)}else Object.keys(m).forEach(_=>{let x=PR({entityId:d,entityType:f,space:l,environment:u,field:p,locale:_,editorInterface:g,fieldType:h,targetOrigin:r,platform:i});OR(h,m,x,n,`${y}/${_}`,o,_)})}}},FR=(n,e,t)=>{var r;let i=JG(n);if(i.sys&&"items"in i){let s=i;if(!((r=s.sys)!=null&&r.contentSourceMapsLookup))return console.error("Content source maps lookup data is missing"),s;let{contentSourceMapsLookup:{fieldTypes:o,editorInterfaces:a}}=s.sys,{items:c,includes:l}=s;c.forEach(u=>op(u,o,a,e,t)),l&&l.Entry&&l.Entry.forEach(u=>op(u,o,a,e,t)),l&&l.Asset&&l.Asset.forEach(u=>op(u,o,a,e,t))}else{let s=i;if(!s.sys.contentSourceMapsLookup)return console.error("Content source maps lookup data is missing"),s;op(s,s.sys.contentSourceMapsLookup.fieldTypes,s.sys.contentSourceMapsLookup.editorInterfaces,e,t)}return i};var BR=as(kR()),ej=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tj=function(){function n(e,t){var r=[],i=!0,s=!1,o=void 0;try{for(var a=e[Symbol.iterator](),c;!(i=(c=a.next()).done)&&(r.push(c.value),!(t&&r.length===t));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function hu(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}else return Array.from(n)}var pu={},nj=function(e){return e&&e.sys&&e.sys.type==="Link"},rj=function(e){return e&&e.sys&&e.sys.type==="ResourceLink"},ij=function(e){return e.space&&e.environment?[e.type+"!"+e.id,e.space.sys.id+"!"+e.environment.sys.id+"!"+e.type+"!"+e.id]:[e.type+"!"+e.id]},UR=function(e,t){var r=t.entryId,i=t.linkType,s=t.spaceId,o=t.environmentId;return s&&o?e.get(s+"!"+o+"!"+i+"!"+r):e.get(i+"!"+r)},sj=function(e){var t=/.*:spaces\/([^/]+)(?:\/environments\/([^/]+))?\/entries\/([^/]+)$/;if(t.test(e)){var r=e.match(t),i=tj(r,4),s=i[0],o=i[1],a=i[2],c=a===void 0?"master":a,l=i[3];return{spaceId:o,environmentId:c,entryId:l}}},oj=function(e,t){var r=t.sys,i=r.type,s=r.linkType;if(i==="ResourceLink"){if(!s.startsWith("Contentful:"))return t;var o=t.sys.urn,a=sj(o),c=a.spaceId,l=a.environmentId,u=a.entryId,d=s.split(":")[1];return UR(e,{linkType:d,entryId:u,spaceId:c,environmentId:l})||pu}var f=t.sys.id;return UR(e,{linkType:s,entryId:f})||pu},aj=function(e){if(Array.isArray(e))return e.filter(function(r){return r!==pu});for(var t in e)e[t]===pu&&delete e[t];return e},cj=function n(e,t,r,i){if(t(e))return r(e);if(e&&(typeof e>"u"?"undefined":ej(e))==="object"){for(var s in e)e.hasOwnProperty(s)&&(e[s]=n(e[s],t,r,i));i&&(e=aj(e))}return e},lj=function(e,t,r){var i=oj(e,t);return i===pu?r?i:t:i},uj=function(e,t){if(!Array.isArray(t))return e;var r=Object.keys(e).filter(function(i){return t.indexOf(i)!==-1});return r.reduce(function(i,s){return i[s]=e[s],i},{})},dj=function(e,t){if(t=t||{},!e.items)return[];var r=(0,BR.default)(e),i=Object.keys(r.includes||{}).reduce(function(a,c){return[].concat(hu(a),hu(e.includes[c]))},[]),s=[].concat(hu(r.items),hu(i)).filter(function(a){return!!a.sys}),o=new Map(s.reduce(function(a,c){var l=ij(c.sys).map(function(u){return[u,c]});return a.push.apply(a,hu(l)),a},[]));return s.forEach(function(a){var c=uj(a,t.itemEntryPoints);Object.assign(a,cj(c,function(l){return nj(l)||rj(l)},function(l){return lj(o,l,t.removeUnresolved)},t.removeUnresolved))}),r.items},ap=dj;var HR=as(J0(),1);function cp(n){return Object.defineProperty(n,"stringifySafe",{enumerable:!1,configurable:!1,writable:!1,value:function(e=null,t=""){return(0,HR.default)(this,e,t,(r,i)=>({sys:{type:"Link",linkType:"Entry",id:i.sys.id,circular:!0}}))}})}function GR(n,e,t){return xe(this,null,function*(){if(!e||!e.initial&&!e.nextSyncToken&&!e.nextPageToken)throw new Error("Please provide one of `initial`, `nextSyncToken` or `nextPageToken` parameters for syncing");if(e.content_type&&!e.type)e.type="Entry";else if(e.content_type&&e.type&&e.type!=="Entry")throw new Error("When using the `content_type` filter your `type` parameter cannot be different from `Entry`.");let r={withoutLinkResolution:!1,withoutUnresolvableLinks:!1,paginate:!0},{withoutLinkResolution:i,withoutUnresolvableLinks:s,paginate:o}=Object.assign(Object.assign({},r),t),a=yield jR(n,[],e,{paginate:o});i||(a.items=ap(a,{removeUnresolved:s,itemEntryPoints:["fields"]}));let c=hj(a.items);return a.nextSyncToken&&(c.nextSyncToken=a.nextSyncToken),a.nextPageToken&&(c.nextPageToken=a.nextPageToken),rp(cp(du(c)))})}function hj(n){let e=t=>(r,i)=>(i.sys.type===t&&r.push(du(i)),r);return{entries:n.reduce(e("Entry"),[]),assets:n.reduce(e("Asset"),[]),deletedEntries:n.reduce(e("DeletedEntry"),[]),deletedAssets:n.reduce(e("DeletedAsset"),[])}}function pj(n){return n.nextPageToken?{sync_token:n.nextPageToken}:n.nextSyncToken?{sync_token:n.nextSyncToken}:n.sync_token?{sync_token:n.sync_token}:n}function jR(i,s,o,a){return xe(this,arguments,function*(n,e,t,{paginate:r}){let c=pj(t),u=(yield n.get("sync",Cn({query:c}))).data||{};return e=e.concat(u.items||[]),u.nextPageUrl?r?(delete c.initial,c.sync_token=Q0(u.nextPageUrl),jR(n,e,c,{paginate:r})):{items:e,nextPageToken:Q0(u.nextPageUrl)}:u.nextSyncUrl?{items:e,nextSyncToken:Q0(u.nextSyncUrl)}:{items:[]}})}function Q0(n){let e=n.split("?");return e.length>0?e[1].replace("sync_token=",""):""}function Rs(n){let e={},t=!1;for(let r in n)Array.isArray(n[r])&&(e[r]=n[r].join(","),t=!0);return t?Object.assign(Object.assign({},n),e):n}function lp(n){if(!n.select)return new Set;let e=Array.isArray(n.select)?n.select:n.select.split(",").map(t=>t.trim());return new Set(e)}function gi(n){if(!n.select)return n;let e=lp(n);return e.has("sys")?n:(e.add("sys.id"),e.add("sys.type"),Object.assign(Object.assign({},n),{select:[...e].join(",")}))}function ex(n,{resolveLinks:e,removeUnresolved:t}){let r=cp(n);return e&&(r.items=ap(r,{removeUnresolved:t,itemEntryPoints:["fields"]})),r}var ir=class extends Error{constructor(e,t){super(`Invalid "${e}" provided, `+t),this.name="ValidationError"}};function WR(n,e,t){if(t=t||{},typeof e!="number")throw new ir(n,`only numeric values are allowed for timestamps, provided type was "${typeof e}"`);if(t.maximum&&e>t.maximum)throw new ir(n,`value (${e}) cannot be further in the future than expected maximum (${t.maximum})`);if(t.now&&e<t.now)throw new ir(n,`value (${e}) cannot be in the past, current time was ${t.now}`)}function mj(n){if(n.locale==="*")throw new ir("locale",`The use of locale='*' is no longer supported.To fetch an entry in all existing locales,
      use client.withAllLocales instead of the locale='*' parameter.`)}function gj(n){if(n.locale)throw new ir("locale","The `locale` parameter is not allowed")}function mu(n,e){e?gj(n):mj(n)}function uc(n){if("resolveLinks"in n)throw new ir("resolveLinks",`The use of the 'resolveLinks' parameter is no longer supported. By default, links are resolved.
      If you do not want to resolve links, use client.withoutLinkResolution.`)}function dc(n){if("removeUnresolved"in n)throw new ir("removeUnresolved",`The use of the 'removeUnresolved' parameter is no longer supported. By default, unresolved links are kept as link objects.
      If you do not want to include unresolved links, use client.withoutUnresolvableLinks.`)}function $R(n,e){if(e===void 0)return!1;if(typeof e!="boolean")throw new ir("includeContentSourceMaps","The 'includeContentSourceMaps' parameter must be a boolean.");if(e&&!(n==="preview.contentful.com"))throw new ir("includeContentSourceMaps",`The 'includeContentSourceMaps' parameter can only be used with the CPA. Please set host to 'preview.contentful.com' to include Content Source Maps.
      `);return e}function So(n){for(let e in n){let t=n[e];if(typeof t=="object"&&t!==null&&!Array.isArray(t))throw new Error(`Objects are not supported as value for the "${e}" query parameter.`)}}var yj=48*60*60,tx=class extends Error{constructor(e,t,r){super("The resource could not be found."),this.sys={type:"Error",id:"NotFound"},this.details={type:"Entry",id:e,environment:t,space:r}}};function nx({http:n,getGlobalOptions:e},t){let r=(U="unknown")=>new tx(U,e().environment,e().space),i=U=>{let z=U==="space"?e().spaceBaseUrl:e().environmentBaseUrl;if(!z)throw new Error("Please define baseUrl for "+U);return z.endsWith("/")||(z+="/"),z};function s(U={}){var z,ce;let oe=n.httpClientParams,Ue=(z=oe?.includeContentSourceMaps)!==null&&z!==void 0?z:(ce=oe?.alphaFeatures)===null||ce===void 0?void 0:ce.includeContentSourceMaps,et=oe?.host;if($R(et,Ue)&&(U.includeContentSourceMaps=!0,U.select)){let Ot=lp(U);Ot.add("sys"),U.select=Array.from(Ot).join(",")}return U}function o(U,z){var ce;return((ce=z?.params)===null||ce===void 0?void 0:ce.includeContentSourceMaps)?FR(U):U}function a(oe){return xe(this,arguments,function*({context:U,path:z,config:ce}){let Ue=i(U);try{let et=yield n.get(Ue+z,ce);return o(et.data,ce)}catch(et){zn(et)}})}function c(Ue){return xe(this,arguments,function*({context:U,path:z,data:ce,config:oe}){let et=i(U);try{return(yield n.post(et+z,ce,oe)).data}catch(tt){zn(tt)}})}function l(){return xe(this,null,function*(){return a({context:"space",path:""})})}function u(U){return xe(this,null,function*(){return a({context:"environment",path:`content_types/${U}`})})}function d(){return xe(this,arguments,function*(U={}){return a({context:"environment",path:"content_types",config:Cn({query:U})})})}function f(ce){return xe(this,arguments,function*(U,z={}){return g(U,z,t)})}function h(){return xe(this,arguments,function*(U={}){return m(U,t)})}function g(oe,Ue){return xe(this,arguments,function*(U,z,ce={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){let{withAllLocales:et}=ce;return mu(z,et),uc(z),dc(z),So(z),y(U,et?Object.assign(Object.assign({},z),{locale:"*"}):z,ce)})}function y(U,z,ce){return xe(this,null,function*(){if(!U)throw r(U);try{let oe=yield p(Object.assign({"sys.id":U},s(z)),ce);if(oe.items.length>0)return oe.items[0];throw r(U)}catch(oe){zn(oe)}})}function m(ce){return xe(this,arguments,function*(U,z={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){let{withAllLocales:oe}=z;return mu(U,oe),uc(U),dc(U),So(U),p(oe?Object.assign(Object.assign({},U),{locale:"*"}):U,z)})}function p(U,z){return xe(this,null,function*(){let{withoutLinkResolution:ce,withoutUnresolvableLinks:oe}=z;try{let Ue=yield a({context:"environment",path:"entries",config:Cn({query:s(Rs(gi(U)))})});return ex(Ue,{resolveLinks:!ce,removeUnresolved:oe??!1})}catch(Ue){zn(Ue)}})}function E(ce){return xe(this,arguments,function*(U,z={}){return T(U,z,t)})}function _(){return xe(this,arguments,function*(U={}){return x(U,t)})}function x(ce){return xe(this,arguments,function*(U,z={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){let{withAllLocales:oe}=z;mu(U,oe),So(U);let Ue=oe?Object.assign(Object.assign({},U),{locale:"*"}):U;return D(Ue)})}function C(U,z){return xe(this,null,function*(){try{return a({context:"environment",path:`assets/${U}`,config:Cn({query:s(gi(z))})})}catch(ce){zn(ce)}})}function T(oe,Ue){return xe(this,arguments,function*(U,z,ce={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){let{withAllLocales:et}=ce;mu(z,et),So(z);let tt=et?Object.assign(Object.assign({},z),{locale:"*"}):z;return C(U,tt)})}function D(U){return xe(this,null,function*(){try{return a({context:"environment",path:"assets",config:Cn({query:s(Rs(gi(U)))})})}catch(z){zn(z)}})}function I(U){return xe(this,null,function*(){return a({context:"environment",path:`tags/${U}`})})}function S(){return xe(this,arguments,function*(U={}){return So(U),a({context:"environment",path:"tags",config:Cn({query:Rs(gi(U))})})})}function b(U){return xe(this,null,function*(){try{let z=Math.floor(Date.now()/1e3),ce=z+yj;WR("expiresAt",U,{maximum:ce,now:z})}catch(z){zn(z)}return c({context:"environment",path:"asset_keys",data:{expiresAt:U}})})}function A(){return xe(this,arguments,function*(U={}){return So(U),a({context:"environment",path:"locales",config:Cn({query:gi(U)})})})}function j(ce){return xe(this,arguments,function*(U,z={paginate:!0}){return F(U,z,t)})}function F(oe,Ue){return xe(this,arguments,function*(U,z,ce={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){uc(U),dc(U);let et=Object.assign(Object.assign({},z),ce);return ie(n),GR(n,U,et)})}function V(U){return $(U,t)}function $(U,z={withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!1}){return q(U,z)}function q(U,z){let{withoutLinkResolution:ce,withoutUnresolvableLinks:oe}=z;return ex(U,{resolveLinks:!ce,removeUnresolved:oe??!1})}function te(U,z={}){return W(U,z)}function W(ce){return xe(this,arguments,function*(U,z={}){try{return a({context:"environment",path:`taxonomy/concept-schemes/${U}`,config:Cn({query:Rs(gi(z))})})}catch(oe){zn(oe)}})}function se(U={}){return he(U)}function he(){return xe(this,arguments,function*(U={}){try{return a({context:"environment",path:"taxonomy/concept-schemes",config:Cn({query:Rs(gi(U))})})}catch(z){zn(z)}})}function Se(U,z={}){return Qe(U,z)}function Qe(ce){return xe(this,arguments,function*(U,z={}){try{return a({context:"environment",path:`taxonomy/concepts/${U}`,config:Cn({query:Rs(gi(z))})})}catch(oe){zn(oe)}})}function Et(U={}){return Y(U)}function Y(){return xe(this,arguments,function*(U={}){try{return a({context:"environment",path:"taxonomy/concepts",config:Cn({query:Rs(gi(U))})})}catch(z){zn(z)}})}function ie(U){U.defaults.baseURL=e().environmentBaseUrl}return{version:"11.3.2",getSpace:l,getContentType:u,getContentTypes:d,getAsset:E,getAssets:_,getTag:I,getTags:S,getLocales:A,parseEntries:V,sync:j,getEntry:f,getEntries:h,getConceptScheme:te,getConceptSchemes:se,getConcept:Se,getConcepts:Et,createAssetKey:b}}function vj({http:n,getGlobalOptions:e},t,r){let i=nx({http:n,getGlobalOptions:e},t),s=i||{};return Object.defineProperty(s,"withAllLocales",{get:()=>r(Object.assign(Object.assign({},t),{withAllLocales:!0}))}),Object.defineProperty(s,"withoutLinkResolution",{get:()=>r(Object.assign(Object.assign({},t),{withoutLinkResolution:!0}))}),Object.defineProperty(s,"withoutUnresolvableLinks",{get:()=>r(Object.assign(Object.assign({},t),{withoutUnresolvableLinks:!0}))}),Object.create(s)}var qR=({http:n,getGlobalOptions:e})=>{function t(i){return vj({http:n,getGlobalOptions:e},i,t)}let r=nx({http:n,getGlobalOptions:e},{withoutLinkResolution:!1,withAllLocales:!1,withoutUnresolvableLinks:!1});return Object.assign(Object.assign({},r),{get withAllLocales(){return t({withAllLocales:!0,withoutLinkResolution:!1,withoutUnresolvableLinks:!1})},get withoutLinkResolution(){return t({withAllLocales:!1,withoutLinkResolution:!0,withoutUnresolvableLinks:!1})},get withoutUnresolvableLinks(){return t({withAllLocales:!1,withoutLinkResolution:!1,withoutUnresolvableLinks:!0})}})};function rx(n){if(!n.accessToken)throw new TypeError("Expected parameter accessToken");if(!n.space)throw new TypeError("Expected parameter space");uc(n),dc(n);let t=Object.assign(Object.assign({},{resolveLinks:!0,removeUnresolved:!1,defaultHostname:"cdn.contentful.com",environment:"master"}),n),r=ip("contentful.js/11.3.2",t.application,t.integration);t.headers=Object.assign(Object.assign({},t.headers),{"Content-Type":"application/vnd.contentful.delivery.v1+json","X-Contentful-User-Agent":r});let i=uu(Uh,t);if(!i.defaults.baseURL)throw new Error("Please define a baseURL");let s=j0({space:t.space,environment:t.environment,spaceBaseUrl:i.defaults.baseURL,environmentBaseUrl:`${i.defaults.baseURL}environments/${t.environment}`});return i.defaults.baseURL=s({}).environmentBaseUrl,qR({http:i,getGlobalOptions:s})}var lie=as(J0(),1);var Eo=(()=>{class n{constructor(t,r){this._transferState=t,this._platformId=r,this.WORKS_KEY="works",this._contentful=rx({space:"ilu70l39cwki",accessToken:"0ZeYh7zf5WIKvKOUBlC1w6tlaE7hvtBSJL1NsFXUiiA"}),this._works=[]}getWorks(){return xe(this,null,function*(){if(this._works.length===0)if(this._transferState.hasKey(this.WORKS_KEY))this._works=this._transferState.get(this.WORKS_KEY,null);else{let t=yield this._contentful.getEntries({content_type:"works"});this._works=t.items.map(r=>({id:r.sys.id,slug:r.fields.slug,title:r.fields.title,year:r.fields.year,tech:r.fields.tech,body:r.fields.body,bodyShort:r.fields.bodyShort,date:new Date(r.sys.createdAt),images:r.fields.images.map(i=>`https:${i.fields.file.url}`)})),Ui(this._platformId)&&this._transferState.set(this.WORKS_KEY,this._works)}return this._works})}static{this.\u0275fac=function(r){return new(r||n)(Ve(xs),Ve(Bn))}}static{this.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _j=n=>["/works",n];function xj(n,e){if(n&1&&(Ne(0,"a",5)(1,"div",6),Vn(2,"img",7),Ce(),Ne(3,"div",8)(4,"span",9),Fe(5),Ce()(),Ne(6,"div",10),Fe(7),Ce()()),n&2){let t=e.$implicit;er("routerLink",NT(5,_j,t.slug)),yn(2),wv("alt",t.title),er("src",t.images[0],pl),yn(3),si(" ",t.title," "),yn(2),si(" ",t.bodyShort," ")}}function bj(n,e){if(n&1&&(Ne(0,"div",1)(1,"h2",2),Fe(2),Ce(),Ne(3,"div",3),ws(4,xj,8,7,"a",4),Ce()()),n&2){let t=e.$implicit,r=jf();yn(2),si(" ",t," "),yn(2),er("ngForOf",r.groupedWorks[t])}}var YR=(()=>{class n{constructor(t,r){this._contentfulService=t,this._titleService=r,this.works=[],this.groupedWorks={},this.workYears=[]}ngOnInit(){return xe(this,null,function*(){this._titleService.setTitle("Stanislav Romanov - Works");let t=yield this._contentfulService.getWorks();this.groupedWorks=t.reduce((r,i)=>{let s=i.year;return r[s]||(r[s]=[]),r[s].push(i),r},{}),this.workYears=Object.keys(this.groupedWorks).sort().reverse()})}static{this.\u0275fac=function(r){return new(r||n)(vt(Eo),vt(oi))}}static{this.\u0275cmp=ln({type:n,selectors:[["app-works"]],decls:1,vars:1,consts:[["class","pb-12",4,"ngFor","ngForOf"],[1,"pb-12"],[1,"font-sans","font-semibold","border-b-stan-orange","border-b-2","inline-block"],[1,"pt-4","grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","group block border-none",3,"routerLink",4,"ngFor","ngForOf"],[1,"group","block","border-none",3,"routerLink"],[1,"overflow-hidden","rounded-lg","w-full","h-48","relative","select-none"],[1,"absolute","top-0","left-0","w-full","h-full","object-cover","scale-[1.2]","transform","transition-transform","duration-300","group-hover:scale-[1.5]",3,"src","alt"],[1,"text-center"],[1,"font-semibold","mt-2","inline-block","border-b-2","border-transparent","group-hover:border-stan-orange"],[1,"text-xs","text-center","mt-2"]],template:function(r,i){r&1&&ws(0,bj,5,2,"div",0),r&2&&er("ngForOf",i.workYears)},dependencies:[bl,Xf,$a,Es],encapsulation:2})}}return n})();function wj(n,e){if(n&1&&(Ne(0,"span",5),Fe(1),Ce()),n&2){let t=e.$implicit;yn(),_l(t.trim())}}function Sj(n,e){if(n&1&&Vn(0,"img",8),n&2){let t=e.$implicit;er("src",t,pl)}}function Ej(n,e){if(n&1&&(Ne(0,"div")(1,"div")(2,"a",1),Fe(3,"Works"),Ce(),Fe(4," > "),Ne(5,"span",2),Fe(6),Ce()(),Ne(7,"p",3),Fe(8),Ce(),Ne(9,"div",4)(10,"span",2),Fe(11,"Year: "),Ce(),Ne(12,"span",5),Fe(13),Ce()(),Ne(14,"div",4)(15,"span",2),Fe(16,"Tech: "),Ce(),ws(17,wj,2,1,"span",6),Ce(),Ne(18,"div",4),ws(19,Sj,1,1,"img",7),Ce()()),n&2){let t=jf();yn(6),_l(t.workItem.title),yn(2),si(" ",t.workItem.body," "),yn(5),_l(t.workItem.year),yn(4),er("ngForOf",t.workItem.tech.split(",")),yn(2),er("ngForOf",t.workItem.images)}}var ZR=(()=>{class n{constructor(t,r,i){this._activatedRoute=t,this._contentfulService=r,this._titleService=i}ngOnInit(){return xe(this,null,function*(){let t=this._activatedRoute.snapshot.params.slug,r=yield this._contentfulService.getWorks();this.workItem=r.find(i=>i.slug===t),this._titleService.setTitle(`Stanislav Romanov - Works - ${this.workItem.title}`)})}static{this.\u0275fac=function(r){return new(r||n)(vt(wr),vt(Eo),vt(oi))}}static{this.\u0275cmp=ln({type:n,selectors:[["app-work-item"]],decls:1,vars:1,consts:[[4,"ngIf"],["routerLink","/works",1,""],[1,"font-semibold"],[1,"indent-8","mt-4"],[1,"mt-4"],[1,"bg-slate-700","rounded-lg","pr-2","pl-2","mr-2"],["class","bg-slate-700 rounded-lg pr-2 pl-2 mr-2",4,"ngFor","ngForOf"],["class","w-full mt-2 rounded-lg",3,"src",4,"ngFor","ngForOf"],[1,"w-full","mt-2","rounded-lg",3,"src"]],template:function(r,i){r&1&&ws(0,Ej,20,5,"div",0),r&2&&er("ngIf",i.workItem)},dependencies:[bl,Xf,YT,$a,Es],encapsulation:2})}}return n})();var KR=(()=>{class n{constructor(t){this._titleService=t,this._titleService.setTitle("Stanislav Romanov - Contact")}static{this.\u0275fac=function(r){return new(r||n)(vt(oi))}}static{this.\u0275cmp=ln({type:n,selectors:[["app-contact"]],decls:8,vars:0,consts:[[1,"indent-8"],["href","mailto:97wham.late@icloud.com"],["href","https://calendly.com/stanislavromanov"]],template:function(r,i){r&1&&(Ne(0,"p",0),Fe(1," I am available for freelance and contracting work, offering expertise in creating websites, mobile applications, and software solutions tailored to your needs. Whether you require a sleek website, a dynamic mobile app, or a robust software application, I bring years of experience to deliver high-quality results. Feel free to reach out to me by email at "),Ne(2,"a",1),Fe(3,"97wham.late@icloud.com"),Ce(),Fe(4," or book a 30 minute meeting on "),Ne(5,"a",2),Fe(6,"Calendly"),Ce(),Fe(7,` to discuss your project.
`),Ce())},encapsulation:2})}}return n})();var JR=[{path:"",component:fC},{path:"works",component:YR},{path:"works/:slug",component:ZR},{path:"contact",component:KR}];function Mj(n){return()=>n.getWorks()}var QR={providers:[Eo,{provide:Ra,useFactory:Mj,deps:[Eo],multi:!0},OT({eventCoalescing:!0}),aC(JR),gA(mA({includePostRequests:!0}))]};var Tj=()=>({exact:!0}),e1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ln({type:n,selectors:[["app-header"]],decls:15,vars:2,consts:[[1,"w-full","p-12","pb-0","font-sans","uppercase","flex","justify-center"],[1,"flex","flex-col","lg:p-0","w-full","lg:w-5/12"],[1,"flex","justify-between","font-semibold"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/works","routerLinkActive","active"],["href","/cv/cv.pdf","target","_blank"],["routerLink","/contact","routerLinkActive","active"]],template:function(r,i){r&1&&(Ne(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"a",3),Fe(5,"Home"),Ce()(),Ne(6,"li")(7,"a",4),Fe(8,"Works"),Ce()(),Ne(9,"li")(10,"a",5),Fe(11,"CV"),Ce()(),Ne(12,"li")(13,"a",6),Fe(14,"Contact"),Ce()()()()()),r&2&&(yn(4),er("routerLinkActiveOptions",RT(1,Tj)))},dependencies:[$a,Es,sC],encapsulation:2})}}return n})();var t1=(()=>{class n{constructor(){this.currentYear=new Date().getFullYear()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ln({type:n,selectors:[["app-footer"]],decls:3,vars:1,consts:[[1,"pt-12","pb-6"],[1,"text-center","text-xs","text-slate-700","font-sans"]],template:function(r,i){r&1&&(Ne(0,"div",0)(1,"p",1),Fe(2),Ce()()),r&2&&(yn(2),si(" \xA9 ",i.currentYear," Stanislav Romanov. All Rights Reserved. "))},encapsulation:2})}}return n})();var em="171";var B1=0,zx=1,V1=2;var Hx=1,z1=2,Ei=3,qr=0,Rn=1,Mr=2,rs=0,Ro=1,Gx=2,jx=3,Wx=4,H1=5,Bs=100,G1=101,j1=102,W1=103,$1=104,q1=200,X1=201,Y1=202,Z1=203,Lp=204,Fp=205,K1=206,J1=207,Q1=208,eN=209,tN=210,nN=211,rN=212,iN=213,sN=214,tm=0,nm=1,rm=2,No=3,im=4,sm=5,om=6,am=7,$x=0,oN=1,aN=2,is=0,cN=1,lN=2,uN=3,dN=4,fN=5,hN=6,pN=7,Dx="attached",mN="detached",Ix=300,Go=301,jo=302,cm=303,lm=304,ed=306,Vs=1e3,vi=1001,Tc=1002,vn=1003,um=1004;var Wo=1005;var In=1006,Fc=1007;var Zr=1008;var Mi=1009,qx=1010,Xx=1011,kc=1012,dm=1013,Gs=1014,Tr=1015,Uc=1016,fm=1017,hm=1018,$o=1020,Yx=35902,Zx=1021,Kx=1022,fr=1023,Jx=1024,Qx=1025,Io=1026,Po=1027,pm=1028,mm=1029,eb=1030,gm=1031;var ym=1033,td=33776,nd=33777,rd=33778,id=33779,vm=35840,_m=35841,xm=35842,bm=35843,wm=36196,Sm=37492,Em=37496,Mm=37808,Tm=37809,Am=37810,Cm=37811,Dm=37812,Im=37813,Rm=37814,Nm=37815,Pm=37816,Om=37817,Lm=37818,Fm=37819,km=37820,Um=37821,sd=36492,Bm=36494,Vm=36495,tb=36283,zm=36284,Hm=36285,Gm=36286;var Oo=2300,Lo=2301,Op=2302,Rx=2400,Nx=2401,Px=2402,gN=2500;var nb=0,od=1,Bc=2,yN=3200,vN=3201;var rb=0,_N=1,ss="",rn="srgb",_n="srgb-linear",Tu="linear",Ct="srgb";var Do=7680;var Ox=519,xN=512,bN=513,wN=514,ib=515,SN=516,EN=517,MN=518,TN=519,kp=35044;var sb="300 es",_i=2e3,Au=2001,Ki=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let r=this._listeners[e.type];if(r!==void 0){e.target=this;let i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}},Sn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],n1=1234567,Eu=Math.PI/180,Fo=180/Math.PI;function $r(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Sn[n&255]+Sn[n>>8&255]+Sn[n>>16&255]+Sn[n>>24&255]+"-"+Sn[e&255]+Sn[e>>8&255]+"-"+Sn[e>>16&15|64]+Sn[e>>24&255]+"-"+Sn[t&63|128]+Sn[t>>8&255]+"-"+Sn[t>>16&255]+Sn[t>>24&255]+Sn[r&255]+Sn[r>>8&255]+Sn[r>>16&255]+Sn[r>>24&255]).toLowerCase()}function it(n,e,t){return Math.max(e,Math.min(t,n))}function ob(n,e){return(n%e+e)%e}function Aj(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Cj(n,e,t){return n!==e?(t-n)/(e-n):0}function Mu(n,e,t){return(1-t)*n+t*e}function Dj(n,e,t,r){return Mu(n,e,1-Math.exp(-t*r))}function Ij(n,e=1){return e-Math.abs(ob(n,e*2)-e)}function Rj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Nj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Pj(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Oj(n,e){return n+Math.random()*(e-n)}function Lj(n){return n*(.5-Math.random())}function Fj(n){n!==void 0&&(n1=n);let e=n1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kj(n){return n*Eu}function Uj(n){return n*Fo}function Bj(n){return(n&n-1)===0&&n!==0}function Vj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function zj(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Hj(n,e,t,r,i){let s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),h=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,c*d,c*f,a*l);break;case"YZY":n.set(c*f,a*u,c*d,a*l);break;case"ZXZ":n.set(c*d,c*f,a*u,a*l);break;case"XZX":n.set(a*u,c*g,c*h,a*l);break;case"YXY":n.set(c*h,a*u,c*g,a*l);break;case"ZYZ":n.set(c*g,c*h,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Wr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var ab={DEG2RAD:Eu,RAD2DEG:Fo,generateUUID:$r,clamp:it,euclideanModulo:ob,mapLinear:Aj,inverseLerp:Cj,lerp:Mu,damp:Dj,pingpong:Ij,smoothstep:Rj,smootherstep:Nj,randInt:Pj,randFloat:Oj,randFloatSpread:Lj,seededRandom:Fj,degToRad:kj,radToDeg:Uj,isPowerOfTwo:Bj,ceilPowerOfTwo:Vj,floorPowerOfTwo:zj,setQuaternionFromProperEuler:Hj,normalize:At,denormalize:Wr},rt=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=it(this.x,e.x,t.x),this.y=it(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=it(this.x,e,t),this.y=it(this.y,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(it(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(it(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},qe=class n{constructor(e,t,r,i,s,o,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l)}set(e,t,r,i,s,o,a,c,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],c=r[6],l=r[1],u=r[4],d=r[7],f=r[2],h=r[5],g=r[8],y=i[0],m=i[3],p=i[6],E=i[1],_=i[4],x=i[7],C=i[2],T=i[5],D=i[8];return s[0]=o*y+a*E+c*C,s[3]=o*m+a*_+c*T,s[6]=o*p+a*x+c*D,s[1]=l*y+u*E+d*C,s[4]=l*m+u*_+d*T,s[7]=l*p+u*x+d*D,s[2]=f*y+h*E+g*C,s[5]=f*m+h*_+g*T,s[8]=f*p+h*x+g*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*s*u+r*a*c+i*s*l-i*o*c}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,f=a*c-u*s,h=l*s-o*c,g=t*d+r*f+i*h;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/g;return e[0]=d*y,e[1]=(i*l-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=f*y,e[4]=(u*t-i*c)*y,e[5]=(i*s-a*t)*y,e[6]=h*y,e[7]=(r*c-l*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){let c=Math.cos(s),l=Math.sin(s);return this.set(r*c,r*l,-r*(c*o+l*a)+o+e,-i*l,i*c,-i*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ix.makeScale(e,t)),this}rotate(e){return this.premultiply(ix.makeRotation(-e)),this}translate(e,t){return this.premultiply(ix.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},ix=new qe;function cb(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Ac(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function AN(){let n=Ac("canvas");return n.style.display="block",n}var r1={};function qo(n){n in r1||(r1[n]=!0,console.warn(n))}function CN(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function DN(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function IN(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var i1=new qe().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),s1=new qe().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Gj(){let n={enabled:!0,workingColorSpace:_n,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Ct&&(i.r=Zi(i.r),i.g=Zi(i.g),i.b=Zi(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ct&&(i.r=Mc(i.r),i.g=Mc(i.g),i.b=Mc(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===ss?Tu:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[_n]:{primaries:e,whitePoint:r,transfer:Tu,toXYZ:i1,fromXYZ:s1,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:rn},outputColorSpaceConfig:{drawingBufferColorSpace:rn}},[rn]:{primaries:e,whitePoint:r,transfer:Ct,toXYZ:i1,fromXYZ:s1,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:rn}}}),n}var ct=Gj();function Zi(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Mc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var fc,Up=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{fc===void 0&&(fc=Ac("canvas")),fc.width=e.width,fc.height=e.height;let r=fc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=fc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Ac("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Zi(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Zi(t[r]/255)*255):t[r]=Zi(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},jj=0,Cu=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jj++}),this.uuid=$r(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(sx(i[o].image)):s.push(sx(i[o]))}else s=sx(i);r.url=s}return t||(e.images[this.uuid]=r),r}};function sx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Up.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Wj=0,hr=(()=>{class n extends Ki{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=vi,s=vi,o=In,a=Zr,c=fr,l=Mi,u=n.DEFAULT_ANISOTROPY,d=ss){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wj++}),this.uuid=$r(),this.name="",this.source=new Cu(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new qe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ix)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Vs:t.x=t.x-Math.floor(t.x);break;case vi:t.x=t.x<0?0:1;break;case Tc:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Vs:t.y=t.y-Math.floor(t.y);break;case vi:t.y=t.y<0?0:1;break;case Tc:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=Ix,n.DEFAULT_ANISOTROPY=1,n})(),_t=class n{constructor(e=0,t=0,r=0,i=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s,c=e.elements,l=c[0],u=c[4],d=c[8],f=c[1],h=c[5],g=c[9],y=c[2],m=c[6],p=c[10];if(Math.abs(u-f)<.01&&Math.abs(d-y)<.01&&Math.abs(g-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+y)<.1&&Math.abs(g+m)<.1&&Math.abs(l+h+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let _=(l+1)/2,x=(h+1)/2,C=(p+1)/2,T=(u+f)/4,D=(d+y)/4,I=(g+m)/4;return _>x&&_>C?_<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(_),i=T/r,s=D/r):x>C?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=T/i,s=I/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=D/s,i=I/s),this.set(r,i,s,t),this}let E=Math.sqrt((m-g)*(m-g)+(d-y)*(d-y)+(f-u)*(f-u));return Math.abs(E)<.001&&(E=1),this.x=(m-g)/E,this.y=(d-y)/E,this.z=(f-u)/E,this.w=Math.acos((l+h+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=it(this.x,e.x,t.x),this.y=it(this.y,e.y,t.y),this.z=it(this.z,e.z,t.z),this.w=it(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=it(this.x,e,t),this.y=it(this.y,e,t),this.z=it(this.z,e,t),this.w=it(this.w,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(it(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Bp=class extends Ki{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new _t(0,0,e,t),this.scissorTest=!1,this.viewport=new _t(0,0,e,t);let i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:In,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);let s=new hr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];let o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Cu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},xi=class extends Bp{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}},Du=class extends hr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=vn,this.minFilter=vn,this.wrapR=vi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var Vp=class extends hr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=vn,this.minFilter=vn,this.wrapR=vi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Er=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let c=r[i+0],l=r[i+1],u=r[i+2],d=r[i+3],f=s[o+0],h=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=f,e[t+1]=h,e[t+2]=g,e[t+3]=y;return}if(d!==y||c!==f||l!==h||u!==g){let m=1-a,p=c*f+l*h+u*g+d*y,E=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){let C=Math.sqrt(_),T=Math.atan2(C,p*E);m=Math.sin(m*T)/C,a=Math.sin(a*T)/C}let x=a*E;if(c=c*m+f*x,l=l*m+h*x,u=u*m+g*x,d=d*m+y*x,m===1-a){let C=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=C,l*=C,u*=C,d*=C}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){let a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],d=s[o],f=s[o+1],h=s[o+2],g=s[o+3];return e[t]=a*g+u*d+c*h-l*f,e[t+1]=c*g+u*f+l*d-a*h,e[t+2]=l*g+u*h+a*f-c*d,e[t+3]=u*g-a*d-c*f-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),d=a(s/2),f=c(r/2),h=c(i/2),g=c(s/2);switch(o){case"XYZ":this._x=f*u*d+l*h*g,this._y=l*h*d-f*u*g,this._z=l*u*g+f*h*d,this._w=l*u*d-f*h*g;break;case"YXZ":this._x=f*u*d+l*h*g,this._y=l*h*d-f*u*g,this._z=l*u*g-f*h*d,this._w=l*u*d+f*h*g;break;case"ZXY":this._x=f*u*d-l*h*g,this._y=l*h*d+f*u*g,this._z=l*u*g+f*h*d,this._w=l*u*d-f*h*g;break;case"ZYX":this._x=f*u*d-l*h*g,this._y=l*h*d+f*u*g,this._z=l*u*g-f*h*d,this._w=l*u*d+f*h*g;break;case"YZX":this._x=f*u*d+l*h*g,this._y=l*h*d+f*u*g,this._z=l*u*g-f*h*d,this._w=l*u*d-f*h*g;break;case"XZY":this._x=f*u*d-l*h*g,this._y=l*h*d-f*u*g,this._z=l*u*g+f*h*d,this._w=l*u*d+f*h*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],f=r+a+d;if(f>0){let h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-c)*h,this._y=(s-l)*h,this._z=(o-i)*h}else if(r>a&&r>d){let h=2*Math.sqrt(1+r-a-d);this._w=(u-c)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+l)/h}else if(a>d){let h=2*Math.sqrt(1+a-r-d);this._w=(s-l)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(c+u)/h}else{let h=2*Math.sqrt(1+d-r-a);this._w=(o-i)/h,this._x=(s+l)/h,this._y=(c+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(it(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+i*l-s*c,this._y=i*u+o*c+s*a-r*l,this._z=s*u+o*l+r*c-i*a,this._w=o*u-r*a-i*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,s=this._z,o=this._w,a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;let c=1-a*a;if(c<=Number.EPSILON){let h=1-t;return this._w=h*o+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}let l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},O=class n{constructor(e=0,t=0,r=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(o1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(o1.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+c*l+o*d-a*u,this.y=r+c*u+a*l-s*d,this.z=i+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=it(this.x,e.x,t.x),this.y=it(this.y,e.y,t.y),this.z=it(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=it(this.x,e,t),this.y=it(this.y,e,t),this.z=it(this.z,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(it(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ox.copy(this).projectOnVector(e),this.sub(ox)}reflect(e){return this.sub(ox.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(it(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},ox=new O,o1=new Er,cr=class{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Hr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Hr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Hr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0){let s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Hr):Hr.fromBufferAttribute(s,o),Hr.applyMatrix4(e.matrixWorld),this.expandByPoint(Hr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),up.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),up.copy(r.boundingBox)),up.applyMatrix4(e.matrixWorld),this.union(up)}let i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Hr),Hr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gu),dp.subVectors(this.max,gu),hc.subVectors(e.a,gu),pc.subVectors(e.b,gu),mc.subVectors(e.c,gu),Ns.subVectors(pc,hc),Ps.subVectors(mc,pc),Mo.subVectors(hc,mc);let t=[0,-Ns.z,Ns.y,0,-Ps.z,Ps.y,0,-Mo.z,Mo.y,Ns.z,0,-Ns.x,Ps.z,0,-Ps.x,Mo.z,0,-Mo.x,-Ns.y,Ns.x,0,-Ps.y,Ps.x,0,-Mo.y,Mo.x,0];return!ax(t,hc,pc,mc,dp)||(t=[1,0,0,0,1,0,0,0,1],!ax(t,hc,pc,mc,dp))?!1:(fp.crossVectors(Ns,Ps),t=[fp.x,fp.y,fp.z],ax(t,hc,pc,mc,dp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Gi=[new O,new O,new O,new O,new O,new O,new O,new O],Hr=new O,up=new cr,hc=new O,pc=new O,mc=new O,Ns=new O,Ps=new O,Mo=new O,gu=new O,dp=new O,fp=new O,To=new O;function ax(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){To.fromArray(n,s);let a=i.x*Math.abs(To.x)+i.y*Math.abs(To.y)+i.z*Math.abs(To.z),c=e.dot(To),l=t.dot(To),u=r.dot(To);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var $j=new cr,yu=new O,cx=new O,Hn=class{constructor(e=new O,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):$j.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;yu.subVectors(e,this.center);let t=yu.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(yu,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(yu.copy(e.center).add(cx)),this.expandByPoint(yu.copy(e.center).sub(cx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ji=new O,lx=new O,hp=new O,Os=new O,ux=new O,pp=new O,dx=new O,ko=class{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ji)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ji.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ji.copy(this.origin).addScaledVector(this.direction,t),ji.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){lx.copy(e).add(t).multiplyScalar(.5),hp.copy(t).sub(e).normalize(),Os.copy(this.origin).sub(lx);let s=e.distanceTo(t)*.5,o=-this.direction.dot(hp),a=Os.dot(this.direction),c=-Os.dot(hp),l=Os.lengthSq(),u=Math.abs(1-o*o),d,f,h,g;if(u>0)if(d=o*c-a,f=o*a-c,g=s*u,d>=0)if(f>=-g)if(f<=g){let y=1/u;d*=y,f*=y,h=d*(d+o*f+2*a)+f*(o*d+f+2*c)+l}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;else f<=-g?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-c),s),h=-d*d+f*(f+2*c)+l):f<=g?(d=0,f=Math.min(Math.max(-s,-c),s),h=f*(f+2*c)+l):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-c),s),h=-d*d+f*(f+2*c)+l);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(lx).addScaledVector(hp,f),h}intersectSphere(e,t){ji.subVectors(e.center,this.origin);let r=ji.dot(this.direction),i=ji.dot(ji)-r*r,s=e.radius*e.radius;if(i>s)return null;let o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return l>=0?(r=(e.min.x-f.x)*l,i=(e.max.x-f.x)*l):(r=(e.max.x-f.x)*l,i=(e.min.x-f.x)*l),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ji)!==null}intersectTriangle(e,t,r,i,s){ux.subVectors(t,e),pp.subVectors(r,e),dx.crossVectors(ux,pp);let o=this.direction.dot(dx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Os.subVectors(this.origin,e);let c=a*this.direction.dot(pp.crossVectors(Os,pp));if(c<0)return null;let l=a*this.direction.dot(ux.cross(Os));if(l<0||c+l>o)return null;let u=-a*Os.dot(dx);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},$e=class n{constructor(e,t,r,i,s,o,a,c,l,u,d,f,h,g,y,m){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l,u,d,f,h,g,y,m)}set(e,t,r,i,s,o,a,c,l,u,d,f,h,g,y,m){let p=this.elements;return p[0]=e,p[4]=t,p[8]=r,p[12]=i,p[1]=s,p[5]=o,p[9]=a,p[13]=c,p[2]=l,p[6]=u,p[10]=d,p[14]=f,p[3]=h,p[7]=g,p[11]=y,p[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/gc.setFromMatrixColumn(e,0).length(),s=1/gc.setFromMatrixColumn(e,1).length(),o=1/gc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let f=o*u,h=o*d,g=a*u,y=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=h+g*l,t[5]=f-y*l,t[9]=-a*c,t[2]=y-f*l,t[6]=g+h*l,t[10]=o*c}else if(e.order==="YXZ"){let f=c*u,h=c*d,g=l*u,y=l*d;t[0]=f+y*a,t[4]=g*a-h,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=h*a-g,t[6]=y+f*a,t[10]=o*c}else if(e.order==="ZXY"){let f=c*u,h=c*d,g=l*u,y=l*d;t[0]=f-y*a,t[4]=-o*d,t[8]=g+h*a,t[1]=h+g*a,t[5]=o*u,t[9]=y-f*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){let f=o*u,h=o*d,g=a*u,y=a*d;t[0]=c*u,t[4]=g*l-h,t[8]=f*l+y,t[1]=c*d,t[5]=y*l+f,t[9]=h*l-g,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){let f=o*c,h=o*l,g=a*c,y=a*l;t[0]=c*u,t[4]=y-f*d,t[8]=g*d+h,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+g,t[10]=f-y*d}else if(e.order==="XZY"){let f=o*c,h=o*l,g=a*c,y=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=f*d+y,t[5]=o*u,t[9]=h*d-g,t[2]=g*d-h,t[6]=a*u,t[10]=y*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qj,e,Xj)}lookAt(e,t,r){let i=this.elements;return sr.subVectors(e,t),sr.lengthSq()===0&&(sr.z=1),sr.normalize(),Ls.crossVectors(r,sr),Ls.lengthSq()===0&&(Math.abs(r.z)===1?sr.x+=1e-4:sr.z+=1e-4,sr.normalize(),Ls.crossVectors(r,sr)),Ls.normalize(),mp.crossVectors(sr,Ls),i[0]=Ls.x,i[4]=mp.x,i[8]=sr.x,i[1]=Ls.y,i[5]=mp.y,i[9]=sr.y,i[2]=Ls.z,i[6]=mp.z,i[10]=sr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],c=r[8],l=r[12],u=r[1],d=r[5],f=r[9],h=r[13],g=r[2],y=r[6],m=r[10],p=r[14],E=r[3],_=r[7],x=r[11],C=r[15],T=i[0],D=i[4],I=i[8],S=i[12],b=i[1],A=i[5],j=i[9],F=i[13],V=i[2],$=i[6],q=i[10],te=i[14],W=i[3],se=i[7],he=i[11],Se=i[15];return s[0]=o*T+a*b+c*V+l*W,s[4]=o*D+a*A+c*$+l*se,s[8]=o*I+a*j+c*q+l*he,s[12]=o*S+a*F+c*te+l*Se,s[1]=u*T+d*b+f*V+h*W,s[5]=u*D+d*A+f*$+h*se,s[9]=u*I+d*j+f*q+h*he,s[13]=u*S+d*F+f*te+h*Se,s[2]=g*T+y*b+m*V+p*W,s[6]=g*D+y*A+m*$+p*se,s[10]=g*I+y*j+m*q+p*he,s[14]=g*S+y*F+m*te+p*Se,s[3]=E*T+_*b+x*V+C*W,s[7]=E*D+_*A+x*$+C*se,s[11]=E*I+_*j+x*q+C*he,s[15]=E*S+_*F+x*te+C*Se,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],f=e[10],h=e[14],g=e[3],y=e[7],m=e[11],p=e[15];return g*(+s*c*d-i*l*d-s*a*f+r*l*f+i*a*h-r*c*h)+y*(+t*c*h-t*l*f+s*o*f-i*o*h+i*l*u-s*c*u)+m*(+t*l*d-t*a*h-s*o*d+r*o*h+s*a*u-r*l*u)+p*(-i*a*u-t*c*d+t*a*f+i*o*d-r*o*f+r*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],h=e[11],g=e[12],y=e[13],m=e[14],p=e[15],E=d*m*l-y*f*l+y*c*h-a*m*h-d*c*p+a*f*p,_=g*f*l-u*m*l-g*c*h+o*m*h+u*c*p-o*f*p,x=u*y*l-g*d*l+g*a*h-o*y*h-u*a*p+o*d*p,C=g*d*c-u*y*c-g*a*f+o*y*f+u*a*m-o*d*m,T=t*E+r*_+i*x+s*C;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let D=1/T;return e[0]=E*D,e[1]=(y*f*s-d*m*s-y*i*h+r*m*h+d*i*p-r*f*p)*D,e[2]=(a*m*s-y*c*s+y*i*l-r*m*l-a*i*p+r*c*p)*D,e[3]=(d*c*s-a*f*s-d*i*l+r*f*l+a*i*h-r*c*h)*D,e[4]=_*D,e[5]=(u*m*s-g*f*s+g*i*h-t*m*h-u*i*p+t*f*p)*D,e[6]=(g*c*s-o*m*s-g*i*l+t*m*l+o*i*p-t*c*p)*D,e[7]=(o*f*s-u*c*s+u*i*l-t*f*l-o*i*h+t*c*h)*D,e[8]=x*D,e[9]=(g*d*s-u*y*s-g*r*h+t*y*h+u*r*p-t*d*p)*D,e[10]=(o*y*s-g*a*s+g*r*l-t*y*l-o*r*p+t*a*p)*D,e[11]=(u*a*s-o*d*s-u*r*l+t*d*l+o*r*h-t*a*h)*D,e[12]=C*D,e[13]=(u*y*i-g*d*i+g*r*f-t*y*f-u*r*m+t*d*m)*D,e[14]=(g*a*i-o*y*i-g*r*c+t*y*c+o*r*m-t*a*m)*D,e[15]=(o*d*i-u*a*i+u*r*c-t*d*c-o*r*f+t*a*f)*D,this}scale(e){let t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*o,0,l*c-i*a,u*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,f=s*l,h=s*u,g=s*d,y=o*u,m=o*d,p=a*d,E=c*l,_=c*u,x=c*d,C=r.x,T=r.y,D=r.z;return i[0]=(1-(y+p))*C,i[1]=(h+x)*C,i[2]=(g-_)*C,i[3]=0,i[4]=(h-x)*T,i[5]=(1-(f+p))*T,i[6]=(m+E)*T,i[7]=0,i[8]=(g+_)*D,i[9]=(m-E)*D,i[10]=(1-(f+y))*D,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,s=gc.set(i[0],i[1],i[2]).length(),o=gc.set(i[4],i[5],i[6]).length(),a=gc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Gr.copy(this);let l=1/s,u=1/o,d=1/a;return Gr.elements[0]*=l,Gr.elements[1]*=l,Gr.elements[2]*=l,Gr.elements[4]*=u,Gr.elements[5]*=u,Gr.elements[6]*=u,Gr.elements[8]*=d,Gr.elements[9]*=d,Gr.elements[10]*=d,t.setFromRotationMatrix(Gr),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=_i){let c=this.elements,l=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),f=(r+i)/(r-i),h,g;if(a===_i)h=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===Au)h=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=h,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=_i){let c=this.elements,l=1/(t-e),u=1/(r-i),d=1/(o-s),f=(t+e)*l,h=(r+i)*u,g,y;if(a===_i)g=(o+s)*d,y=-2*d;else if(a===Au)g=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-h,c[2]=0,c[6]=0,c[10]=y,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},gc=new O,Gr=new $e,qj=new O(0,0,0),Xj=new O(1,1,1),Ls=new O,mp=new O,sr=new O,a1=new $e,c1=new Er,zs=(()=>{class n{constructor(t=0,r=0,i=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,s=this._order){return this._x=t,this._y=r,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){let s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],f=s[2],h=s[6],g=s[10];switch(r){case"XYZ":this._y=Math.asin(it(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-it(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(it(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-it(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,g),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(it(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(c,g));break;case"XZY":this._z=Math.asin(-it(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return a1.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a1,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return c1.setFromEuler(this),this.setFromQuaternion(c1,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Iu=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Yj=0,l1=new O,yc=new Er,Wi=new $e,gp=new O,vu=new O,Zj=new O,Kj=new Er,u1=new O(1,0,0),d1=new O(0,1,0),f1=new O(0,0,1),h1={type:"added"},Jj={type:"removed"},vc={type:"childadded",child:null},fx={type:"childremoved",child:null},hn=(()=>{class n extends Ki{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yj++}),this.uuid=$r(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new O,r=new zs,i=new Er,s=new O(1,1,1);function o(){i.setFromEuler(r,!1)}function a(){r.setFromQuaternion(i,void 0,!1)}r._onChange(o),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new $e},normalMatrix:{value:new qe}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Iu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return yc.setFromAxisAngle(t,r),this.quaternion.multiply(yc),this}rotateOnWorldAxis(t,r){return yc.setFromAxisAngle(t,r),this.quaternion.premultiply(yc),this}rotateX(t){return this.rotateOnAxis(u1,t)}rotateY(t){return this.rotateOnAxis(d1,t)}rotateZ(t){return this.rotateOnAxis(f1,t)}translateOnAxis(t,r){return l1.copy(t).applyQuaternion(this.quaternion),this.position.add(l1.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(u1,t)}translateY(t){return this.translateOnAxis(d1,t)}translateZ(t){return this.translateOnAxis(f1,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Wi.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?gp.copy(t):gp.set(t,r,i);let s=this.parent;this.updateWorldMatrix(!0,!1),vu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wi.lookAt(vu,gp,this.up):Wi.lookAt(gp,vu,this.up),this.quaternion.setFromRotationMatrix(Wi),s&&(Wi.extractRotation(s.matrixWorld),yc.setFromRotationMatrix(Wi),this.quaternion.premultiply(yc.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(h1),vc.child=t,this.dispatchEvent(vc),vc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Jj),fx.child=t,this.dispatchEvent(fx),fx.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Wi.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Wi.multiply(t.parent.matrixWorld)),t.applyMatrix4(Wi),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(h1),vc.child=t,this.dispatchEvent(vc),vc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,s=this.children.length;i<s;i++){let a=this.children[i].getObjectByProperty(t,r);if(a!==void 0)return a}}getObjectsByProperty(t,r,i=[]){this[t]===r&&i.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,r,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vu,t,Zj),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vu,Kj,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverseVisible(t)}traverseAncestors(t){let r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let r=t===void 0||typeof t=="string",i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let f=l[u];o(t.shapes,f)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];s.animations.push(o(t.animations,l))}}if(r){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),h=a(t.skeletons),g=a(t.animations),y=a(t.nodes);c.length>0&&(i.geometries=c),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),g.length>0&&(i.animations=g),y.length>0&&(i.nodes=y)}return i.object=s,i;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let i=0;i<t.children.length;i++){let s=t.children[i];this.add(s.clone())}return this}}return n.DEFAULT_UP=new O(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),jr=new O,$i=new O,hx=new O,qi=new O,_c=new O,xc=new O,p1=new O,px=new O,mx=new O,gx=new O,yx=new _t,vx=new _t,_x=new _t,Us=class n{constructor(e=new O,t=new O,r=new O){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),jr.subVectors(e,t),i.cross(jr);let s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){jr.subVectors(i,t),$i.subVectors(r,t),hx.subVectors(e,t);let o=jr.dot(jr),a=jr.dot($i),c=jr.dot(hx),l=$i.dot($i),u=$i.dot(hx),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;let f=1/d,h=(l*c-a*u)*f,g=(o*u-a*c)*f;return s.set(1-h-g,g,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,qi)===null?!1:qi.x>=0&&qi.y>=0&&qi.x+qi.y<=1}static getInterpolation(e,t,r,i,s,o,a,c){return this.getBarycoord(e,t,r,i,qi)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,qi.x),c.addScaledVector(o,qi.y),c.addScaledVector(a,qi.z),c)}static getInterpolatedAttribute(e,t,r,i,s,o){return yx.setScalar(0),vx.setScalar(0),_x.setScalar(0),yx.fromBufferAttribute(e,t),vx.fromBufferAttribute(e,r),_x.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(yx,s.x),o.addScaledVector(vx,s.y),o.addScaledVector(_x,s.z),o}static isFrontFacing(e,t,r,i){return jr.subVectors(r,t),$i.subVectors(e,t),jr.cross($i).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jr.subVectors(this.c,this.b),$i.subVectors(this.a,this.b),jr.cross($i).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return n.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,s=this.c,o,a;_c.subVectors(i,r),xc.subVectors(s,r),px.subVectors(e,r);let c=_c.dot(px),l=xc.dot(px);if(c<=0&&l<=0)return t.copy(r);mx.subVectors(e,i);let u=_c.dot(mx),d=xc.dot(mx);if(u>=0&&d<=u)return t.copy(i);let f=c*d-u*l;if(f<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(r).addScaledVector(_c,o);gx.subVectors(e,s);let h=_c.dot(gx),g=xc.dot(gx);if(g>=0&&h<=g)return t.copy(s);let y=h*l-c*g;if(y<=0&&l>=0&&g<=0)return a=l/(l-g),t.copy(r).addScaledVector(xc,a);let m=u*g-h*d;if(m<=0&&d-u>=0&&h-g>=0)return p1.subVectors(s,i),a=(d-u)/(d-u+(h-g)),t.copy(i).addScaledVector(p1,a);let p=1/(m+y+f);return o=y*p,a=f*p,t.copy(r).addScaledVector(_c,o).addScaledVector(xc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},RN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fs={h:0,s:0,l:0},yp={h:0,s:0,l:0};function xx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var Oe=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){let i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=rn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ct.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=ct.workingColorSpace){return this.r=e,this.g=t,this.b=r,ct.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=ct.workingColorSpace){if(e=ob(e,1),t=it(t,0,1),r=it(r,0,1),t===0)this.r=this.g=this.b=r;else{let s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=xx(o,s,e+1/3),this.g=xx(o,s,e),this.b=xx(o,s,e-1/3)}return ct.toWorkingColorSpace(this,i),this}setStyle(e,t=rn){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=rn){let r=RN[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zi(e.r),this.g=Zi(e.g),this.b=Zi(e.b),this}copyLinearToSRGB(e){return this.r=Mc(e.r),this.g=Mc(e.g),this.b=Mc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rn){return ct.fromWorkingColorSpace(En.copy(this),e),Math.round(it(En.r*255,0,255))*65536+Math.round(it(En.g*255,0,255))*256+Math.round(it(En.b*255,0,255))}getHexString(e=rn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ct.workingColorSpace){ct.fromWorkingColorSpace(En.copy(this),t);let r=En.r,i=En.g,s=En.b,o=Math.max(r,i,s),a=Math.min(r,i,s),c,l,u=(a+o)/2;if(a===o)c=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case r:c=(i-s)/d+(i<s?6:0);break;case i:c=(s-r)/d+2;break;case s:c=(r-i)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=ct.workingColorSpace){return ct.fromWorkingColorSpace(En.copy(this),t),e.r=En.r,e.g=En.g,e.b=En.b,e}getStyle(e=rn){ct.fromWorkingColorSpace(En.copy(this),e);let t=En.r,r=En.g,i=En.b;return e!==rn?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Fs),this.setHSL(Fs.h+e,Fs.s+t,Fs.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Fs),e.getHSL(yp);let r=Mu(Fs.h,yp.h,t),i=Mu(Fs.s,yp.s,t),s=Mu(Fs.l,yp.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},En=new Oe;Oe.NAMES=RN;var Qj=0,xn=class extends Ki{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qj++}),this.uuid=$r(),this.name="",this.type="Material",this.blending=Ro,this.side=qr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Lp,this.blendDst=Fp,this.blendEquation=Bs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Oe(0,0,0),this.blendAlpha=0,this.depthFunc=No,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ox,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Do,this.stencilZFail=Do,this.stencilZPass=Do,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ro&&(r.blending=this.blending),this.side!==qr&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Lp&&(r.blendSrc=this.blendSrc),this.blendDst!==Fp&&(r.blendDst=this.blendDst),this.blendEquation!==Bs&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==No&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ox&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Do&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Do&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Do&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){let o=[];for(let a in s){let c=s[a];delete c.metadata,o.push(c)}return o}if(t){let s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Xr=class extends xn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.combine=$x,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Yt=new O,vp=new rt,Kt=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=kp,this.updateRanges=[],this.gpuType=Tr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)vp.fromBufferAttribute(this,t),vp.applyMatrix3(e),this.setXY(t,vp.x,vp.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Yt.fromBufferAttribute(this,t),Yt.applyMatrix3(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Yt.fromBufferAttribute(this,t),Yt.applyMatrix4(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yt.fromBufferAttribute(this,t),Yt.applyNormalMatrix(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yt.fromBufferAttribute(this,t),Yt.transformDirection(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Wr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=At(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Wr(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Wr(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Wr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Wr(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kp&&(e.usage=this.usage),e}};var Ru=class extends Kt{constructor(e,t,r){super(new Uint16Array(e),t,r)}};var Nu=class extends Kt{constructor(e,t,r){super(new Uint32Array(e),t,r)}};var ar=class extends Kt{constructor(e,t,r){super(new Float32Array(e),t,r)}},eW=0,Sr=new $e,bx=new hn,bc=new O,or=new cr,_u=new cr,fn=new O,lr=class n extends Ki{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eW++}),this.uuid=$r(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cb(e)?Nu:Ru)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let s=new qe().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sr.makeRotationFromQuaternion(e),this.applyMatrix4(Sr),this}rotateX(e){return Sr.makeRotationX(e),this.applyMatrix4(Sr),this}rotateY(e){return Sr.makeRotationY(e),this.applyMatrix4(Sr),this}rotateZ(e){return Sr.makeRotationZ(e),this.applyMatrix4(Sr),this}translate(e,t,r){return Sr.makeTranslation(e,t,r),this.applyMatrix4(Sr),this}scale(e,t,r){return Sr.makeScale(e,t,r),this.applyMatrix4(Sr),this}lookAt(e){return bx.lookAt(e),bx.updateMatrix(),this.applyMatrix4(bx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bc).negate(),this.translate(bc.x,bc.y,bc.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let r=[];for(let i=0,s=e.length;i<s;i++){let o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ar(r,3))}else{let r=Math.min(e.length,t.count);for(let i=0;i<r;i++){let s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let s=t[r];or.setFromBufferAttribute(s),this.morphTargetsRelative?(fn.addVectors(this.boundingBox.min,or.min),this.boundingBox.expandByPoint(fn),fn.addVectors(this.boundingBox.max,or.max),this.boundingBox.expandByPoint(fn)):(this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new O,1/0);return}if(e){let r=this.boundingSphere.center;if(or.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];_u.setFromBufferAttribute(a),this.morphTargetsRelative?(fn.addVectors(or.min,_u.min),or.expandByPoint(fn),fn.addVectors(or.max,_u.max),or.expandByPoint(fn)):(or.expandByPoint(_u.min),or.expandByPoint(_u.max))}or.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)fn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(fn));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)fn.fromBufferAttribute(a,l),c&&(bc.fromBufferAttribute(e,l),fn.add(bc)),i=Math.max(i,r.distanceToSquared(fn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kt(new Float32Array(4*r.count),4));let o=this.getAttribute("tangent"),a=[],c=[];for(let I=0;I<r.count;I++)a[I]=new O,c[I]=new O;let l=new O,u=new O,d=new O,f=new rt,h=new rt,g=new rt,y=new O,m=new O;function p(I,S,b){l.fromBufferAttribute(r,I),u.fromBufferAttribute(r,S),d.fromBufferAttribute(r,b),f.fromBufferAttribute(s,I),h.fromBufferAttribute(s,S),g.fromBufferAttribute(s,b),u.sub(l),d.sub(l),h.sub(f),g.sub(f);let A=1/(h.x*g.y-g.x*h.y);isFinite(A)&&(y.copy(u).multiplyScalar(g.y).addScaledVector(d,-h.y).multiplyScalar(A),m.copy(d).multiplyScalar(h.x).addScaledVector(u,-g.x).multiplyScalar(A),a[I].add(y),a[S].add(y),a[b].add(y),c[I].add(m),c[S].add(m),c[b].add(m))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let I=0,S=E.length;I<S;++I){let b=E[I],A=b.start,j=b.count;for(let F=A,V=A+j;F<V;F+=3)p(e.getX(F+0),e.getX(F+1),e.getX(F+2))}let _=new O,x=new O,C=new O,T=new O;function D(I){C.fromBufferAttribute(i,I),T.copy(C);let S=a[I];_.copy(S),_.sub(C.multiplyScalar(C.dot(S))).normalize(),x.crossVectors(T,S);let A=x.dot(c[I])<0?-1:1;o.setXYZW(I,_.x,_.y,_.z,A)}for(let I=0,S=E.length;I<S;++I){let b=E[I],A=b.start,j=b.count;for(let F=A,V=A+j;F<V;F+=3)D(e.getX(F+0)),D(e.getX(F+1)),D(e.getX(F+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Kt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);let i=new O,s=new O,o=new O,a=new O,c=new O,l=new O,u=new O,d=new O;if(e)for(let f=0,h=e.count;f<h;f+=3){let g=e.getX(f+0),y=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,g),c.fromBufferAttribute(r,y),l.fromBufferAttribute(r,m),a.add(u),c.add(u),l.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(y,c.x,c.y,c.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,h=t.count;f<h;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)fn.fromBufferAttribute(e,t),fn.normalize(),e.setXYZ(t,fn.x,fn.y,fn.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,f=new l.constructor(c.length*u),h=0,g=0;for(let y=0,m=c.length;y<m;y++){a.isInterleavedBufferAttribute?h=c[y]*a.data.stride+a.offset:h=c[y]*u;for(let p=0;p<u;p++)f[g++]=l[h++]}return new Kt(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,r=this.index.array,i=this.attributes;for(let a in i){let c=i[a],l=e(c,r);t.setAttribute(a,l)}let s=this.morphAttributes;for(let a in s){let c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){let f=l[u],h=e(f,r);c.push(h)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,c=o.length;a<c;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let c in r){let l=r[c];e.data.attributes[c]=l.toJSON(e.data)}let i={},s=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,f=l.length;d<f;d++){let h=l[d];u.push(h.toJSON(e.data))}u.length>0&&(i[c]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let s=e.morphAttributes;for(let l in s){let u=[],d=s[l];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},m1=new $e,Ao=new ko,_p=new Hn,g1=new O,xp=new O,bp=new O,wp=new O,wx=new O,Sp=new O,y1=new O,Ep=new O,Jt=class extends hn{constructor(e=new lr,t=new Xr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){let a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let a=this.morphTargetInfluences;if(s&&a){Sp.set(0,0,0);for(let c=0,l=s.length;c<l;c++){let u=a[c],d=s[c];u!==0&&(wx.fromBufferAttribute(d,e),o?Sp.addScaledVector(wx,u):Sp.addScaledVector(wx.sub(t),u))}t.add(Sp)}return t}raycast(e,t){let r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),_p.copy(r.boundingSphere),_p.applyMatrix4(s),Ao.copy(e.ray).recast(e.near),!(_p.containsPoint(Ao.origin)===!1&&(Ao.intersectSphere(_p,g1)===null||Ao.origin.distanceToSquared(g1)>(e.far-e.near)**2))&&(m1.copy(s).invert(),Ao.copy(e.ray).applyMatrix4(m1),!(r.boundingBox!==null&&Ao.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Ao)))}_computeIntersections(e,t,r){let i,s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,y=f.length;g<y;g++){let m=f[g],p=o[m.materialIndex],E=Math.max(m.start,h.start),_=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));for(let x=E,C=_;x<C;x+=3){let T=a.getX(x),D=a.getX(x+1),I=a.getX(x+2);i=Mp(this,p,e,r,l,u,d,T,D,I),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=m.materialIndex,t.push(i))}}else{let g=Math.max(0,h.start),y=Math.min(a.count,h.start+h.count);for(let m=g,p=y;m<p;m+=3){let E=a.getX(m),_=a.getX(m+1),x=a.getX(m+2);i=Mp(this,o,e,r,l,u,d,E,_,x),i&&(i.faceIndex=Math.floor(m/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let g=0,y=f.length;g<y;g++){let m=f[g],p=o[m.materialIndex],E=Math.max(m.start,h.start),_=Math.min(c.count,Math.min(m.start+m.count,h.start+h.count));for(let x=E,C=_;x<C;x+=3){let T=x,D=x+1,I=x+2;i=Mp(this,p,e,r,l,u,d,T,D,I),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=m.materialIndex,t.push(i))}}else{let g=Math.max(0,h.start),y=Math.min(c.count,h.start+h.count);for(let m=g,p=y;m<p;m+=3){let E=m,_=m+1,x=m+2;i=Mp(this,o,e,r,l,u,d,E,_,x),i&&(i.faceIndex=Math.floor(m/3),t.push(i))}}}};function tW(n,e,t,r,i,s,o,a){let c;if(e.side===Rn?c=r.intersectTriangle(o,s,i,!0,a):c=r.intersectTriangle(i,s,o,e.side===qr,a),c===null)return null;Ep.copy(a),Ep.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(Ep);return l<t.near||l>t.far?null:{distance:l,point:Ep.clone(),object:n}}function Mp(n,e,t,r,i,s,o,a,c,l){n.getVertexPosition(a,xp),n.getVertexPosition(c,bp),n.getVertexPosition(l,wp);let u=tW(n,e,t,r,xp,bp,wp,y1);if(u){let d=new O;Us.getBarycoord(y1,xp,bp,wp,d),i&&(u.uv=Us.getInterpolatedAttribute(i,a,c,l,d,new rt)),s&&(u.uv1=Us.getInterpolatedAttribute(s,a,c,l,d,new rt)),o&&(u.normal=Us.getInterpolatedAttribute(o,a,c,l,d,new O),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));let f={a,b:c,c:l,normal:new O,materialIndex:0};Us.getNormal(xp,bp,wp,f.normal),u.face=f,u.barycoord=d}return u}var Cc=class n extends lr{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};let a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);let c=[],l=[],u=[],d=[],f=0,h=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new ar(l,3)),this.setAttribute("normal",new ar(u,3)),this.setAttribute("uv",new ar(d,2));function g(y,m,p,E,_,x,C,T,D,I,S){let b=x/D,A=C/I,j=x/2,F=C/2,V=T/2,$=D+1,q=I+1,te=0,W=0,se=new O;for(let he=0;he<q;he++){let Se=he*A-F;for(let Qe=0;Qe<$;Qe++){let Et=Qe*b-j;se[y]=Et*E,se[m]=Se*_,se[p]=V,l.push(se.x,se.y,se.z),se[y]=0,se[m]=0,se[p]=T>0?1:-1,u.push(se.x,se.y,se.z),d.push(Qe/D),d.push(1-he/I),te+=1}}for(let he=0;he<I;he++)for(let Se=0;Se<D;Se++){let Qe=f+Se+$*he,Et=f+Se+$*(he+1),Y=f+(Se+1)+$*(he+1),ie=f+(Se+1)+$*he;c.push(Qe,Et,ie),c.push(Et,Y,ie),W+=6}a.addGroup(h,W,S),h+=W,f+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Xo(n){let e={};for(let t in n){e[t]={};for(let r in n[t]){let i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Mn(n){let e={};for(let t=0;t<n.length;t++){let r=Xo(n[t]);for(let i in r)e[i]=r[i]}return e}function nW(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function lb(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ct.workingColorSpace}var NN={clone:Xo,merge:Mn},rW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ur=class extends xn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rW,this.fragmentShader=iW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xo(e.uniforms),this.uniformsGroups=nW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},Pu=class extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e,this.coordinateSystem=_i}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ks=new O,v1=new rt,_1=new rt,Zt=class extends Pu{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Fo*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Eu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fo*2*Math.atan(Math.tan(Eu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){ks.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ks.x,ks.y).multiplyScalar(-e/ks.z),ks.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ks.x,ks.y).multiplyScalar(-e/ks.z)}getViewSize(e,t){return this.getViewBounds(e,v1,_1),t.subVectors(_1,v1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Eu*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*r/l,i*=o.width/c,r*=o.height/l}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},wc=-90,Sc=1,zp=class extends hn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;let i=new Zt(wc,Sc,e,t);i.layers=this.layers,this.add(i);let s=new Zt(wc,Sc,e,t);s.layers=this.layers,this.add(s);let o=new Zt(wc,Sc,e,t);o.layers=this.layers,this.add(o);let a=new Zt(wc,Sc,e,t);a.layers=this.layers,this.add(a);let c=new Zt(wc,Sc,e,t);c.layers=this.layers,this.add(c);let l=new Zt(wc,Sc,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,c]=t;for(let l of t)this.remove(l);if(e===_i)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Au)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;let y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}},Ou=class extends hr{constructor(e,t,r,i,s,o,a,c,l,u){e=e!==void 0?e:[],t=t!==void 0?t:Go,super(e,t,r,i,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Hp=class extends xi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ou(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:In}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Cc(5,5,5),s=new ur({name:"CubemapFromEquirect",uniforms:Xo(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Rn,blending:rs});s.uniforms.tEquirect.value=t;let o=new Jt(i,s),a=t.minFilter;return t.minFilter===Zr&&(t.minFilter=In),new zp(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}};var Lu=class extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zs,this.environmentIntensity=1,this.environmentRotation=new zs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},Dc=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=kp,this.updateRanges=[],this.version=0,this.uuid=$r()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Dn=new O,Ic=class n{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Wr(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=At(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Wr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Wr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Wr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Wr(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),r=At(r,this.array),i=At(i,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var x1=new O,b1=new _t,w1=new _t,sW=new O,S1=new $e,Tp=new O,Sx=new Hn,E1=new $e,Ex=new ko,Fu=class extends Jt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Dx,this.bindMatrix=new $e,this.bindMatrixInverse=new $e,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new cr),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Tp),this.boundingBox.expandByPoint(Tp)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hn),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Tp),this.boundingSphere.expandByPoint(Tp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Sx.copy(this.boundingSphere),Sx.applyMatrix4(i),e.ray.intersectsSphere(Sx)!==!1&&(E1.copy(i).invert(),Ex.copy(e.ray).applyMatrix4(E1),!(this.boundingBox!==null&&Ex.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Ex)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new _t,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);let s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Dx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let r=this.skeleton,i=this.geometry;b1.fromBufferAttribute(i.attributes.skinIndex,e),w1.fromBufferAttribute(i.attributes.skinWeight,e),x1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){let o=w1.getComponent(s);if(o!==0){let a=b1.getComponent(s);S1.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(sW.copy(x1).applyMatrix4(S1),o)}}return t.applyMatrix4(this.bindMatrixInverse)}},Rc=class extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}},ku=class extends hr{constructor(e=null,t=1,r=1,i,s,o,a,c,l=vn,u=vn,d,f){super(null,o,a,c,l,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},M1=new $e,oW=new $e,Uu=class n{constructor(e=[],t=[]){this.uuid=$r(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new $e)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new $e;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){let a=e[s]?e[s].matrixWorld:oW;M1.multiplyMatrices(a,t[s]),M1.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new ku(t,e,e,fr,Tr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let s=e.bones[r],o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Rc),this.bones.push(o),this.boneInverses.push(new $e().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){let o=t[i];e.bones.push(o.uuid);let a=r[i];e.boneInverses.push(a.toArray())}return e}},Hs=class extends Kt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Ec=new $e,T1=new $e,Ap=[],A1=new cr,aW=new $e,xu=new Jt,bu=new Hn,Bu=class extends Jt{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Hs(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,aW)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new cr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Ec),A1.copy(e.boundingBox).applyMatrix4(Ec),this.boundingBox.union(A1)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Ec),bu.copy(e.boundingSphere).applyMatrix4(Ec),this.boundingSphere.union(bu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){let r=this.matrixWorld,i=this.count;if(xu.geometry=this.geometry,xu.material=this.material,xu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bu.copy(this.boundingSphere),bu.applyMatrix4(r),e.ray.intersectsSphere(bu)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Ec),T1.multiplyMatrices(r,Ec),xu.matrixWorld=T1,xu.raycast(e,Ap);for(let o=0,a=Ap.length;o<a;o++){let c=Ap[o];c.instanceId=s,c.object=this,t.push(c)}Ap.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Hs(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ku(new Float32Array(i*this.count),i,this.count,pm,Tr));let s=this.morphTexture.source.data.data,o=0;for(let l=0;l<r.length;l++)o+=r[l];let a=this.geometry.morphTargetsRelative?1:1-o,c=i*e;s[c]=a,s.set(r,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}},Mx=new O,cW=new O,lW=new qe,yi=class{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=Mx.subVectors(r,t).cross(cW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let r=e.delta(Mx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||lW.getNormalMatrix(e),i=this.coplanarPoint(Mx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Co=new Hn,Cp=new O,Nc=class{constructor(e=new yi,t=new yi,r=new yi,i=new yi,s=new yi,o=new yi){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=_i){let r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],d=i[6],f=i[7],h=i[8],g=i[9],y=i[10],m=i[11],p=i[12],E=i[13],_=i[14],x=i[15];if(r[0].setComponents(c-s,f-l,m-h,x-p).normalize(),r[1].setComponents(c+s,f+l,m+h,x+p).normalize(),r[2].setComponents(c+o,f+u,m+g,x+E).normalize(),r[3].setComponents(c-o,f-u,m-g,x-E).normalize(),r[4].setComponents(c-a,f-d,m-y,x-_).normalize(),t===_i)r[5].setComponents(c+a,f+d,m+y,x+_).normalize();else if(t===Au)r[5].setComponents(a,d,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Co.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Co.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Co)}intersectsSprite(e){return Co.center.set(0,0,0),Co.radius=.7071067811865476,Co.applyMatrix4(e.matrixWorld),this.intersectsSphere(Co)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(Cp.x=i.normal.x>0?e.max.x:e.min.x,Cp.y=i.normal.y>0?e.max.y:e.min.y,Cp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Cp)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Pc=class extends xn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Gp=new O,jp=new O,C1=new $e,wu=new ko,Dp=new Hn,Tx=new O,D1=new O,Uo=class extends hn{constructor(e=new lr,t=new Pc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)Gp.fromBufferAttribute(t,i-1),jp.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=Gp.distanceTo(jp);e.setAttribute("lineDistance",new ar(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Dp.copy(r.boundingSphere),Dp.applyMatrix4(i),Dp.radius+=s,e.ray.intersectsSphere(Dp)===!1)return;C1.copy(i).invert(),wu.copy(e.ray).applyMatrix4(C1);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=r.index,f=r.attributes.position;if(u!==null){let h=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let y=h,m=g-1;y<m;y+=l){let p=u.getX(y),E=u.getX(y+1),_=Ip(this,e,wu,c,p,E);_&&t.push(_)}if(this.isLineLoop){let y=u.getX(g-1),m=u.getX(h),p=Ip(this,e,wu,c,y,m);p&&t.push(p)}}else{let h=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let y=h,m=g-1;y<m;y+=l){let p=Ip(this,e,wu,c,y,y+1);p&&t.push(p)}if(this.isLineLoop){let y=Ip(this,e,wu,c,g-1,h);y&&t.push(y)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){let a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function Ip(n,e,t,r,i,s){let o=n.geometry.attributes.position;if(Gp.fromBufferAttribute(o,i),jp.fromBufferAttribute(o,s),t.distanceSqToSegment(Gp,jp,Tx,D1)>r)return;Tx.applyMatrix4(n.matrixWorld);let c=e.ray.origin.distanceTo(Tx);if(!(c<e.near||c>e.far))return{distance:c,point:D1.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}var I1=new O,R1=new O,Vu=class extends Uo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)I1.fromBufferAttribute(t,i),R1.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+I1.distanceTo(R1);e.setAttribute("lineDistance",new ar(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},zu=class extends Uo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Oc=class extends xn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},N1=new $e,Lx=new ko,Rp=new Hn,Np=new O,Hu=class extends hn{constructor(e=new lr,t=new Oc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Rp.copy(r.boundingSphere),Rp.applyMatrix4(i),Rp.radius+=s,e.ray.intersectsSphere(Rp)===!1)return;N1.copy(i).invert(),Lx.copy(e.ray).applyMatrix4(N1);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=r.index,d=r.attributes.position;if(l!==null){let f=Math.max(0,o.start),h=Math.min(l.count,o.start+o.count);for(let g=f,y=h;g<y;g++){let m=l.getX(g);Np.fromBufferAttribute(d,m),P1(Np,m,c,i,e,t,this)}}else{let f=Math.max(0,o.start),h=Math.min(d.count,o.start+o.count);for(let g=f,y=h;g<y;g++)Np.fromBufferAttribute(d,g),P1(Np,g,c,i,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){let a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function P1(n,e,t,r,i,s,o){let a=Lx.distanceSqToPoint(n);if(a<t){let c=new O;Lx.closestPointToPoint(n,c),c.applyMatrix4(r);let l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}var Yr=class extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}};var Gu=class extends hr{constructor(e,t,r,i,s,o,a,c,l,u=Io){if(u!==Io&&u!==Po)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Io&&(r=Gs),r===void 0&&u===Po&&(r=$o),super(null,i,s,o,a,c,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:vn,this.minFilter=c!==void 0?c:vn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var Bo=class n extends lr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let s=e/2,o=t/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,d=e/a,f=t/c,h=[],g=[],y=[],m=[];for(let p=0;p<u;p++){let E=p*f-o;for(let _=0;_<l;_++){let x=_*d-s;g.push(x,-E,0),y.push(0,0,1),m.push(_/a),m.push(1-p/c)}}for(let p=0;p<c;p++)for(let E=0;E<a;E++){let _=E+l*p,x=E+l*(p+1),C=E+1+l*(p+1),T=E+1+l*p;h.push(_,x,T),h.push(x,C,T)}this.setIndex(h),this.setAttribute("position",new ar(g,3)),this.setAttribute("normal",new ar(y,3)),this.setAttribute("uv",new ar(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var ju=class extends xn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}};var Ji=class extends xn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rb,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Gn=class extends Ji{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return it(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}};var Wp=class extends xn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},$p=class extends xn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Pp(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function uW(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function dW(n){function e(i,s){return n[i]-n[s]}let t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function O1(n,e,t){let r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){let a=t[s]*e;for(let c=0;c!==e;++c)i[o++]=n[a+c]}return i}function PN(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}var Qi=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],s=t[r-1];n:{e:{let o;t:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break e}o=t.length;break t}if(!(e>=s)){let a=t[1];e<a&&(r=2,s=a);for(let c=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=t[--r-1],e>=s)break e}o=r,r=0;break t}break n}for(;r<o;){let a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},qp=class extends Qi{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rx,endingEnd:Rx}}intervalChanged_(e,t,r){let i=this.parameterPositions,s=e-2,o=e+1,a=i[s],c=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Nx:s=e,a=2*t-r;break;case Px:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(c===void 0)switch(this.getSettings_().endingEnd){case Nx:o=e,c=2*r-t;break;case Px:o=1,c=r+i[1]-i[0];break;default:o=e-1,c=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,g=(r-t)/(i-t),y=g*g,m=y*g,p=-f*m+2*f*y-f*g,E=(1+f)*m+(-1.5-2*f)*y+(-.5+f)*g+1,_=(-1-h)*m+(1.5+h)*y+.5*g,x=h*m-h*y;for(let C=0;C!==a;++C)s[C]=p*o[u+C]+E*o[l+C]+_*o[c+C]+x*o[d+C];return s}},Xp=class extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(r-t)/(i-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[l+f]*d+o[c+f]*u;return s}},Yp=class extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},dr=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pp(t,this.TimeBufferType),this.values=Pp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Pp(e.times,Array),values:Pp(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Yp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Xp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new qp(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Oo:t=this.InterpolantFactoryMethodDiscrete;break;case Lo:t=this.InterpolantFactoryMethodLinear;break;case Op:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Oo;case this.InterpolantFactoryMethodLinear:return Lo;case this.InterpolantFactoryMethodSmooth:return Op}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let c=r[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(i!==void 0&&uW(i))for(let a=0,c=i.length;a!==c;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Op,s=e.length-1,o=1;for(let a=1;a<s;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(i)c=!0;else{let d=a*r,f=d-r,h=d+r;for(let g=0;g!==r;++g){let y=t[d+g];if(y!==t[f+g]||y!==t[h+g]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];let d=a*r,f=o*r;for(let h=0;h!==r;++h)t[f+h]=t[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,c=o*r,l=0;l!==r;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};dr.prototype.TimeBufferType=Float32Array;dr.prototype.ValueBufferType=Float32Array;dr.prototype.DefaultInterpolation=Lo;var es=class extends dr{constructor(e,t,r){super(e,t,r)}};es.prototype.ValueTypeName="bool";es.prototype.ValueBufferType=Array;es.prototype.DefaultInterpolation=Oo;es.prototype.InterpolantFactoryMethodLinear=void 0;es.prototype.InterpolantFactoryMethodSmooth=void 0;var Wu=class extends dr{};Wu.prototype.ValueTypeName="color";var bi=class extends dr{};bi.prototype.ValueTypeName="number";var Zp=class extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(r-t)/(i-t),l=e*a;for(let u=l+a;l!==u;l+=4)Er.slerpFlat(s,0,o,l-a,o,l,c);return s}},wi=class extends dr{InterpolantFactoryMethodLinear(e){return new Zp(this.times,this.values,this.getValueSize(),e)}};wi.prototype.ValueTypeName="quaternion";wi.prototype.InterpolantFactoryMethodSmooth=void 0;var ts=class extends dr{constructor(e,t,r){super(e,t,r)}};ts.prototype.ValueTypeName="string";ts.prototype.ValueBufferType=Array;ts.prototype.DefaultInterpolation=Oo;ts.prototype.InterpolantFactoryMethodLinear=void 0;ts.prototype.InterpolantFactoryMethodSmooth=void 0;var Si=class extends dr{};Si.prototype.ValueTypeName="vector";var $u=class{constructor(e="",t=-1,r=[],i=gN){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=$r(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(hW(r[o]).scale(i));let s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(dr.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);let u=dW(c);c=O1(c,1,u),l=O1(l,1,u),!i&&c[0]===0&&(c.push(s),l.push(l[0])),o.push(new bi(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],u=l.name.match(s);if(u&&u.length>1){let d=u[1],f=i[d];f||(i[d]=f=[]),f.push(l)}}let o=[];for(let a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(d,f,h,g,y){if(h.length!==0){let m=[],p=[];PN(h,m,p,g),m.length!==0&&y.push(new d(f,m,p))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let d=0;d<l.length;d++){let f=l[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){let h={},g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let y=0;y<f[g].morphTargets.length;y++)h[f[g].morphTargets[y]]=-1;for(let y in h){let m=[],p=[];for(let E=0;E!==f[g].morphTargets.length;++E){let _=f[g];m.push(_.time),p.push(_.morphTarget===y?1:0)}i.push(new bi(".morphTargetInfluence["+y+"]",m,p))}c=h.length*o}else{let h=".bones["+t[d].name+"]";r(Si,h+".position",f,"pos",i),r(wi,h+".quaternion",f,"rot",i),r(Si,h+".scale",f,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function fW(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bi;case"vector":case"vector2":case"vector3":case"vector4":return Si;case"color":return Wu;case"quaternion":return wi;case"bool":case"boolean":return es;case"string":return ts}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function hW(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=fW(n.type);if(n.times===void 0){let t=[],r=[];PN(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Yi={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},Kp=class{constructor(e,t,r){let i=this,s=!1,o=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=l.length;d<f;d+=2){let h=l[d],g=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return g}return null}}},ON=new Kp,Yo=(()=>{class n{constructor(t){this.manager=t!==void 0?t:ON,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){let i=this;return new Promise(function(s,o){i.load(t,s,r,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Xi={},Fx=class extends Error{constructor(e,t){super(e),this.response=t}},Lc=class extends Yo{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=Yi.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Xi[e]!==void 0){Xi[e].push({onLoad:t,onProgress:r,onError:i});return}Xi[e]=[],Xi[e].push({onLoad:t,onProgress:r,onError:i});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Xi[e],d=l.body.getReader(),f=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),h=f?parseInt(f):0,g=h!==0,y=0,m=new ReadableStream({start(p){E();function E(){d.read().then(({done:_,value:x})=>{if(_)p.close();else{y+=x.byteLength;let C=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:h});for(let T=0,D=u.length;T<D;T++){let I=u[T];I.onProgress&&I.onProgress(C)}p.enqueue(x),E()}},_=>{p.error(_)})}}});return new Response(m)}else throw new Fx(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return l.arrayBuffer().then(g=>h.decode(g))}}}).then(l=>{Yi.add(e,l);let u=Xi[e];delete Xi[e];for(let d=0,f=u.length;d<f;d++){let h=u[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=Xi[e];if(u===void 0)throw this.manager.itemError(e),l;delete Xi[e];for(let d=0,f=u.length;d<f;d++){let h=u[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var Jp=class extends Yo{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=Yi.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;let a=Ac("img");function c(){u(),Yi.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}};var Vo=class extends Yo{constructor(e){super(e)}load(e,t,r,i){let s=new hr,o=new Jp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}},zo=class extends hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var Ax=new $e,L1=new O,F1=new O,qu=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nc,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new _t(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;L1.setFromMatrixPosition(e.matrixWorld),t.position.copy(L1),F1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(F1),t.updateMatrixWorld(),Ax.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ax),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Ax)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},kx=class extends qu{constructor(){super(new Zt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=Fo*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Xu=class extends zo{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new kx}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},k1=new $e,Su=new O,Cx=new O,Ux=class extends qu{constructor(){super(new Zt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new _t(2,1,1,1),new _t(0,1,1,1),new _t(3,1,1,1),new _t(1,1,1,1),new _t(3,0,1,1),new _t(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Su.setFromMatrixPosition(e.matrixWorld),r.position.copy(Su),Cx.copy(r.position),Cx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Cx),r.updateMatrixWorld(),i.makeTranslation(-Su.x,-Su.y,-Su.z),k1.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k1)}},Yu=class extends zo{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Ux}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Ho=class extends Pu{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,s=r-e,o=r+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Bx=class extends qu{constructor(){super(new Ho(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Zu=class extends zo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new Bx}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Ku=class extends zo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var ns=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var Ju=class extends Yo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=Yi.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(l=>{t&&t(l),s.manager.itemEnd(e)}).catch(l=>{i&&i(l)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return Yi.add(e,l),t&&t(l),s.manager.itemEnd(e),l}).catch(function(l){i&&i(l),Yi.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Yi.add(e,c),s.manager.itemStart(e)}};var Qp=class extends Zt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Qu=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=U1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=U1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function U1(){return performance.now()}var ub="\\[\\]\\.:\\/",pW=new RegExp("["+ub+"]","g"),db="[^"+ub+"]",mW="[^"+ub.replace("\\.","")+"]",gW=/((?:WC+[\/:])*)/.source.replace("WC",db),yW=/(WCOD+)?/.source.replace("WCOD",mW),vW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",db),_W=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",db),xW=new RegExp("^"+gW+yW+vW+_W+"$"),bW=["material","materials","bones","map"],Vx=class{constructor(e,t,r){let i=r||Ft.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Ft=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(pW,"")}static parseTrackName(t){let r=xW.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=i.nodeName.substring(s+1);bW.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(r);if(i!==void 0)return i}if(t.children){let i=function(o){for(let a=0;a<o.length;a++){let c=o[a];if(c.name===r||c.uuid===r)return c;let l=i(c.children);if(l)return l}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){let i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){let i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){let i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){let i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node,r=this.parsedPath,i=r.objectName,s=r.propertyName,o=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Vx,n})();Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray];Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Gie=new Float32Array(1);function fb(n,e,t,r){let i=wW(r);switch(t){case Zx:return n*e;case Jx:return n*e;case Qx:return n*e*2;case pm:return n*e/i.components*i.byteLength;case mm:return n*e/i.components*i.byteLength;case eb:return n*e*2/i.components*i.byteLength;case gm:return n*e*2/i.components*i.byteLength;case Kx:return n*e*3/i.components*i.byteLength;case fr:return n*e*4/i.components*i.byteLength;case ym:return n*e*4/i.components*i.byteLength;case td:case nd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case rd:case id:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case _m:case bm:return Math.max(n,16)*Math.max(e,8)/4;case vm:case xm:return Math.max(n,8)*Math.max(e,8)/2;case wm:case Sm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Em:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Mm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Tm:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Am:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Cm:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Dm:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Im:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Rm:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Nm:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Pm:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Om:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Lm:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Fm:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case km:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Um:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case sd:case Bm:case Vm:return Math.ceil(n/4)*Math.ceil(e/4)*16;case tb:case zm:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Hm:case Gm:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function wW(n){switch(n){case Mi:case qx:return{byteLength:1,components:1};case kc:case Xx:case Uc:return{byteLength:2,components:1};case fm:case hm:return{byteLength:2,components:4};case Gs:case dm:case Tr:return{byteLength:4,components:1};case Yx:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:em}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=em);function iP(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function SW(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,f=n.createBuffer();n.bindBuffer(c,f),n.bufferData(c,l,u),a.onUploadCallback();let h;if(l instanceof Float32Array)h=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?h=n.HALF_FLOAT:h=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)h=n.SHORT;else if(l instanceof Uint32Array)h=n.UNSIGNED_INT;else if(l instanceof Int32Array)h=n.INT;else if(l instanceof Int8Array)h=n.BYTE;else if(l instanceof Uint8Array)h=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)h=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:f,type:h,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,c,l){let u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),d.length===0)n.bufferSubData(l,0,u);else{d.sort((h,g)=>h.start-g.start);let f=0;for(let h=1;h<d.length;h++){let g=d[f],y=d[h];y.start<=g.start+g.count+1?g.count=Math.max(g.count,y.start+y.count-g.start):(++f,d[f]=y)}d.length=f+1;for(let h=0,g=d.length;h<g;h++){let y=d[h];n.bufferSubData(l,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(l.buffer,a,c),l.version=a.version}}return{get:i,remove:s,update:o}}var EW=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,MW=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,TW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,AW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CW=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,DW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,IW=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,RW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,NW=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,PW=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,OW=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,FW=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,UW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,VW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,HW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,GW=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,WW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,$W=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,qW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,XW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ZW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,e5="gl_FragColor = linearToOutputTexel( gl_FragColor );",t5=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,n5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,r5=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,i5=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s5=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,a5=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,c5=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,l5=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,u5=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,d5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,f5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,h5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,p5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,m5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,g5=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,y5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,v5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,_5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,x5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,b5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,w5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,S5=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,E5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,M5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,T5=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,A5=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,C5=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,D5=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,I5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,R5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,P5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,O5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,L5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,F5=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,k5=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,U5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,B5=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,V5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,z5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,H5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,G5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,j5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,W5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,q5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,X5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Y5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Z5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,K5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,J5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Q5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,e8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,t8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,n8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,r8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,i8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,s8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,o8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,a8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,c8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,l8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,u8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,d8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,f8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,h8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,p8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,m8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,g8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,y8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,v8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,_8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,x8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,b8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,w8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,S8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,E8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,M8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,C8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,D8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,I8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,R8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,N8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,P8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,O8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,F8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,k8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,U8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,H8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,j8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,W8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,X8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,J8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e$=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,t$=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,n$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Je={alphahash_fragment:EW,alphahash_pars_fragment:MW,alphamap_fragment:TW,alphamap_pars_fragment:AW,alphatest_fragment:CW,alphatest_pars_fragment:DW,aomap_fragment:IW,aomap_pars_fragment:RW,batching_pars_vertex:NW,batching_vertex:PW,begin_vertex:OW,beginnormal_vertex:LW,bsdfs:FW,iridescence_fragment:kW,bumpmap_pars_fragment:UW,clipping_planes_fragment:BW,clipping_planes_pars_fragment:VW,clipping_planes_pars_vertex:zW,clipping_planes_vertex:HW,color_fragment:GW,color_pars_fragment:jW,color_pars_vertex:WW,color_vertex:$W,common:qW,cube_uv_reflection_fragment:XW,defaultnormal_vertex:YW,displacementmap_pars_vertex:ZW,displacementmap_vertex:KW,emissivemap_fragment:JW,emissivemap_pars_fragment:QW,colorspace_fragment:e5,colorspace_pars_fragment:t5,envmap_fragment:n5,envmap_common_pars_fragment:r5,envmap_pars_fragment:i5,envmap_pars_vertex:s5,envmap_physical_pars_fragment:g5,envmap_vertex:o5,fog_vertex:a5,fog_pars_vertex:c5,fog_fragment:l5,fog_pars_fragment:u5,gradientmap_pars_fragment:d5,lightmap_pars_fragment:f5,lights_lambert_fragment:h5,lights_lambert_pars_fragment:p5,lights_pars_begin:m5,lights_toon_fragment:y5,lights_toon_pars_fragment:v5,lights_phong_fragment:_5,lights_phong_pars_fragment:x5,lights_physical_fragment:b5,lights_physical_pars_fragment:w5,lights_fragment_begin:S5,lights_fragment_maps:E5,lights_fragment_end:M5,logdepthbuf_fragment:T5,logdepthbuf_pars_fragment:A5,logdepthbuf_pars_vertex:C5,logdepthbuf_vertex:D5,map_fragment:I5,map_pars_fragment:R5,map_particle_fragment:N5,map_particle_pars_fragment:P5,metalnessmap_fragment:O5,metalnessmap_pars_fragment:L5,morphinstance_vertex:F5,morphcolor_vertex:k5,morphnormal_vertex:U5,morphtarget_pars_vertex:B5,morphtarget_vertex:V5,normal_fragment_begin:z5,normal_fragment_maps:H5,normal_pars_fragment:G5,normal_pars_vertex:j5,normal_vertex:W5,normalmap_pars_fragment:$5,clearcoat_normal_fragment_begin:q5,clearcoat_normal_fragment_maps:X5,clearcoat_pars_fragment:Y5,iridescence_pars_fragment:Z5,opaque_fragment:K5,packing:J5,premultiplied_alpha_fragment:Q5,project_vertex:e8,dithering_fragment:t8,dithering_pars_fragment:n8,roughnessmap_fragment:r8,roughnessmap_pars_fragment:i8,shadowmap_pars_fragment:s8,shadowmap_pars_vertex:o8,shadowmap_vertex:a8,shadowmask_pars_fragment:c8,skinbase_vertex:l8,skinning_pars_vertex:u8,skinning_vertex:d8,skinnormal_vertex:f8,specularmap_fragment:h8,specularmap_pars_fragment:p8,tonemapping_fragment:m8,tonemapping_pars_fragment:g8,transmission_fragment:y8,transmission_pars_fragment:v8,uv_pars_fragment:_8,uv_pars_vertex:x8,uv_vertex:b8,worldpos_vertex:w8,background_vert:S8,background_frag:E8,backgroundCube_vert:M8,backgroundCube_frag:T8,cube_vert:A8,cube_frag:C8,depth_vert:D8,depth_frag:I8,distanceRGBA_vert:R8,distanceRGBA_frag:N8,equirect_vert:P8,equirect_frag:O8,linedashed_vert:L8,linedashed_frag:F8,meshbasic_vert:k8,meshbasic_frag:U8,meshlambert_vert:B8,meshlambert_frag:V8,meshmatcap_vert:z8,meshmatcap_frag:H8,meshnormal_vert:G8,meshnormal_frag:j8,meshphong_vert:W8,meshphong_frag:$8,meshphysical_vert:q8,meshphysical_frag:X8,meshtoon_vert:Y8,meshtoon_frag:Z8,points_vert:K8,points_frag:J8,shadow_vert:Q8,shadow_frag:e$,sprite_vert:t$,sprite_frag:n$},le={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new qe},alphaMap:{value:null},alphaMapTransform:{value:new qe},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new qe}},envmap:{envMap:{value:null},envMapRotation:{value:new qe},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new qe}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new qe}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new qe},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new qe},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new qe},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new qe}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new qe}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new qe}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new qe},alphaTest:{value:0},uvTransform:{value:new qe}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new qe},alphaMap:{value:null},alphaMapTransform:{value:new qe},alphaTest:{value:0}}},Ti={basic:{uniforms:Mn([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.fog]),vertexShader:Je.meshbasic_vert,fragmentShader:Je.meshbasic_frag},lambert:{uniforms:Mn([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.fog,le.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Je.meshlambert_vert,fragmentShader:Je.meshlambert_frag},phong:{uniforms:Mn([le.common,le.specularmap,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.fog,le.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:Je.meshphong_vert,fragmentShader:Je.meshphong_frag},standard:{uniforms:Mn([le.common,le.envmap,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.roughnessmap,le.metalnessmap,le.fog,le.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag},toon:{uniforms:Mn([le.common,le.aomap,le.lightmap,le.emissivemap,le.bumpmap,le.normalmap,le.displacementmap,le.gradientmap,le.fog,le.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Je.meshtoon_vert,fragmentShader:Je.meshtoon_frag},matcap:{uniforms:Mn([le.common,le.bumpmap,le.normalmap,le.displacementmap,le.fog,{matcap:{value:null}}]),vertexShader:Je.meshmatcap_vert,fragmentShader:Je.meshmatcap_frag},points:{uniforms:Mn([le.points,le.fog]),vertexShader:Je.points_vert,fragmentShader:Je.points_frag},dashed:{uniforms:Mn([le.common,le.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Je.linedashed_vert,fragmentShader:Je.linedashed_frag},depth:{uniforms:Mn([le.common,le.displacementmap]),vertexShader:Je.depth_vert,fragmentShader:Je.depth_frag},normal:{uniforms:Mn([le.common,le.bumpmap,le.normalmap,le.displacementmap,{opacity:{value:1}}]),vertexShader:Je.meshnormal_vert,fragmentShader:Je.meshnormal_frag},sprite:{uniforms:Mn([le.sprite,le.fog]),vertexShader:Je.sprite_vert,fragmentShader:Je.sprite_frag},background:{uniforms:{uvTransform:{value:new qe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Je.background_vert,fragmentShader:Je.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new qe}},vertexShader:Je.backgroundCube_vert,fragmentShader:Je.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Je.cube_vert,fragmentShader:Je.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Je.equirect_vert,fragmentShader:Je.equirect_frag},distanceRGBA:{uniforms:Mn([le.common,le.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Je.distanceRGBA_vert,fragmentShader:Je.distanceRGBA_frag},shadow:{uniforms:Mn([le.lights,le.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:Je.shadow_vert,fragmentShader:Je.shadow_frag}};Ti.physical={uniforms:Mn([Ti.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new qe},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new qe},clearcoatNormalScale:{value:new rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new qe},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new qe},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new qe},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new qe},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new qe},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new qe},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new qe},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new qe},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new qe},anisotropyVector:{value:new rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new qe}}]),vertexShader:Je.meshphysical_vert,fragmentShader:Je.meshphysical_frag};var jm={r:0,b:0,g:0},Zo=new zs,r$=new $e;function i$(n,e,t,r,i,s,o){let a=new Oe(0),c=s===!0?0:1,l,u,d=null,f=0,h=null;function g(_){let x=_.isScene===!0?_.background:null;return x&&x.isTexture&&(x=(_.backgroundBlurriness>0?t:e).get(x)),x}function y(_){let x=!1,C=g(_);C===null?p(a,c):C&&C.isColor&&(p(C,1),x=!0);let T=n.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function m(_,x){let C=g(x);C&&(C.isCubeTexture||C.mapping===ed)?(u===void 0&&(u=new Jt(new Cc(1,1,1),new ur({name:"BackgroundCubeMaterial",uniforms:Xo(Ti.backgroundCube.uniforms),vertexShader:Ti.backgroundCube.vertexShader,fragmentShader:Ti.backgroundCube.fragmentShader,side:Rn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,D,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Zo.copy(x.backgroundRotation),Zo.x*=-1,Zo.y*=-1,Zo.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Zo.y*=-1,Zo.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(r$.makeRotationFromEuler(Zo)),u.material.toneMapped=ct.getTransfer(C.colorSpace)!==Ct,(d!==C||f!==C.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=C,f=C.version,h=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(l===void 0&&(l=new Jt(new Bo(2,2),new ur({name:"BackgroundMaterial",uniforms:Xo(Ti.background.uniforms),vertexShader:Ti.background.vertexShader,fragmentShader:Ti.background.fragmentShader,side:qr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=C,l.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,l.material.toneMapped=ct.getTransfer(C.colorSpace)!==Ct,C.matrixAutoUpdate===!0&&C.updateMatrix(),l.material.uniforms.uvTransform.value.copy(C.matrix),(d!==C||f!==C.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,d=C,f=C.version,h=n.toneMapping),l.layers.enableAll(),_.unshift(l,l.geometry,l.material,0,0,null))}function p(_,x){_.getRGB(jm,lb(n)),r.buffers.color.setClear(jm.r,jm.g,jm.b,x,o)}function E(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),l!==void 0&&(l.geometry.dispose(),l.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(_,x=1){a.set(_),c=x,p(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(_){c=_,p(a,c)},render:y,addToRenderList:m,dispose:E}}function s$(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null),s=i,o=!1;function a(b,A,j,F,V){let $=!1,q=d(F,j,A);s!==q&&(s=q,l(s.object)),$=h(b,F,j,V),$&&g(b,F,j,V),V!==null&&e.update(V,n.ELEMENT_ARRAY_BUFFER),($||o)&&(o=!1,x(b,A,j,F),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(V).buffer))}function c(){return n.createVertexArray()}function l(b){return n.bindVertexArray(b)}function u(b){return n.deleteVertexArray(b)}function d(b,A,j){let F=j.wireframe===!0,V=r[b.id];V===void 0&&(V={},r[b.id]=V);let $=V[A.id];$===void 0&&($={},V[A.id]=$);let q=$[F];return q===void 0&&(q=f(c()),$[F]=q),q}function f(b){let A=[],j=[],F=[];for(let V=0;V<t;V++)A[V]=0,j[V]=0,F[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:j,attributeDivisors:F,object:b,attributes:{},index:null}}function h(b,A,j,F){let V=s.attributes,$=A.attributes,q=0,te=j.getAttributes();for(let W in te)if(te[W].location>=0){let he=V[W],Se=$[W];if(Se===void 0&&(W==="instanceMatrix"&&b.instanceMatrix&&(Se=b.instanceMatrix),W==="instanceColor"&&b.instanceColor&&(Se=b.instanceColor)),he===void 0||he.attribute!==Se||Se&&he.data!==Se.data)return!0;q++}return s.attributesNum!==q||s.index!==F}function g(b,A,j,F){let V={},$=A.attributes,q=0,te=j.getAttributes();for(let W in te)if(te[W].location>=0){let he=$[W];he===void 0&&(W==="instanceMatrix"&&b.instanceMatrix&&(he=b.instanceMatrix),W==="instanceColor"&&b.instanceColor&&(he=b.instanceColor));let Se={};Se.attribute=he,he&&he.data&&(Se.data=he.data),V[W]=Se,q++}s.attributes=V,s.attributesNum=q,s.index=F}function y(){let b=s.newAttributes;for(let A=0,j=b.length;A<j;A++)b[A]=0}function m(b){p(b,0)}function p(b,A){let j=s.newAttributes,F=s.enabledAttributes,V=s.attributeDivisors;j[b]=1,F[b]===0&&(n.enableVertexAttribArray(b),F[b]=1),V[b]!==A&&(n.vertexAttribDivisor(b,A),V[b]=A)}function E(){let b=s.newAttributes,A=s.enabledAttributes;for(let j=0,F=A.length;j<F;j++)A[j]!==b[j]&&(n.disableVertexAttribArray(j),A[j]=0)}function _(b,A,j,F,V,$,q){q===!0?n.vertexAttribIPointer(b,A,j,V,$):n.vertexAttribPointer(b,A,j,F,V,$)}function x(b,A,j,F){y();let V=F.attributes,$=j.getAttributes(),q=A.defaultAttributeValues;for(let te in $){let W=$[te];if(W.location>=0){let se=V[te];if(se===void 0&&(te==="instanceMatrix"&&b.instanceMatrix&&(se=b.instanceMatrix),te==="instanceColor"&&b.instanceColor&&(se=b.instanceColor)),se!==void 0){let he=se.normalized,Se=se.itemSize,Qe=e.get(se);if(Qe===void 0)continue;let Et=Qe.buffer,Y=Qe.type,ie=Qe.bytesPerElement,U=Y===n.INT||Y===n.UNSIGNED_INT||se.gpuType===dm;if(se.isInterleavedBufferAttribute){let z=se.data,ce=z.stride,oe=se.offset;if(z.isInstancedInterleavedBuffer){for(let Ue=0;Ue<W.locationSize;Ue++)p(W.location+Ue,z.meshPerAttribute);b.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let Ue=0;Ue<W.locationSize;Ue++)m(W.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,Et);for(let Ue=0;Ue<W.locationSize;Ue++)_(W.location+Ue,Se/W.locationSize,Y,he,ce*ie,(oe+Se/W.locationSize*Ue)*ie,U)}else{if(se.isInstancedBufferAttribute){for(let z=0;z<W.locationSize;z++)p(W.location+z,se.meshPerAttribute);b.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let z=0;z<W.locationSize;z++)m(W.location+z);n.bindBuffer(n.ARRAY_BUFFER,Et);for(let z=0;z<W.locationSize;z++)_(W.location+z,Se/W.locationSize,Y,he,Se*ie,Se/W.locationSize*z*ie,U)}}else if(q!==void 0){let he=q[te];if(he!==void 0)switch(he.length){case 2:n.vertexAttrib2fv(W.location,he);break;case 3:n.vertexAttrib3fv(W.location,he);break;case 4:n.vertexAttrib4fv(W.location,he);break;default:n.vertexAttrib1fv(W.location,he)}}}}E()}function C(){I();for(let b in r){let A=r[b];for(let j in A){let F=A[j];for(let V in F)u(F[V].object),delete F[V];delete A[j]}delete r[b]}}function T(b){if(r[b.id]===void 0)return;let A=r[b.id];for(let j in A){let F=A[j];for(let V in F)u(F[V].object),delete F[V];delete A[j]}delete r[b.id]}function D(b){for(let A in r){let j=r[A];if(j[b.id]===void 0)continue;let F=j[b.id];for(let V in F)u(F[V].object),delete F[V];delete j[b.id]}}function I(){S(),o=!0,s!==i&&(s=i,l(s.object))}function S(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:I,resetDefaultState:S,dispose:C,releaseStatesOfGeometry:T,releaseStatesOfProgram:D,initAttributes:y,enableAttribute:m,disableUnusedAttributes:E}}function o$(n,e,t){let r;function i(l){r=l}function s(l,u){n.drawArrays(r,l,u),t.update(u,r,1)}function o(l,u,d){d!==0&&(n.drawArraysInstanced(r,l,u,d),t.update(u,r,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,l,0,u,0,d);let h=0;for(let g=0;g<d;g++)h+=u[g];t.update(h,r,1)}function c(l,u,d,f){if(d===0)return;let h=e.get("WEBGL_multi_draw");if(h===null)for(let g=0;g<l.length;g++)o(l[g],u[g],f[g]);else{h.multiDrawArraysInstancedWEBGL(r,l,0,u,0,f,0,d);let g=0;for(let y=0;y<d;y++)g+=u[y]*f[y];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function a$(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let D=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(D){return!(D!==fr&&r.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){let I=D===Uc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Mi&&r.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==Tr&&!I)}function c(D){if(D==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),p=n.getParameter(n.MAX_VERTEX_ATTRIBS),E=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:E,maxVaryings:_,maxFragmentUniforms:x,vertexTextures:C,maxSamples:T}}function c$(n){let e=this,t=null,r=0,i=!1,s=!1,o=new yi,a=new qe,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){let h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){let g=d.clippingPlanes,y=d.clipIntersection,m=d.clipShadows,p=n.get(d);if(!i||g===null||g.length===0||s&&!m)s?u(null):l();else{let E=s?0:r,_=E*4,x=p.clippingState||null;c.value=x,x=u(g,f,_,h);for(let C=0;C!==_;++C)x[C]=t[C];p.clippingState=x,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=E}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,h,g){let y=d!==null?d.length:0,m=null;if(y!==0){if(m=c.value,g!==!0||m===null){let p=h+y*4,E=f.matrixWorldInverse;a.getNormalMatrix(E),(m===null||m.length<p)&&(m=new Float32Array(p));for(let _=0,x=h;_!==y;++_,x+=4)o.copy(d[_]).applyMatrix4(E,a),o.normal.toArray(m,x),m[x+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,m}}function l$(n){let e=new WeakMap;function t(o,a){return a===cm?o.mapping=Go:a===lm&&(o.mapping=jo),o}function r(o){if(o&&o.isTexture){let a=o.mapping;if(a===cm||a===lm)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let l=new Hp(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}else return null}}return o}function i(o){let a=o.target;a.removeEventListener("dispose",i);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}var zc=4,LN=[.125,.215,.35,.446,.526,.582],Qo=20,hb=new Ho,FN=new Oe,pb=null,mb=0,gb=0,yb=!1,Jo=(1+Math.sqrt(5))/2,Vc=1/Jo,kN=[new O(-Jo,Vc,0),new O(Jo,Vc,0),new O(-Vc,0,Jo),new O(Vc,0,Jo),new O(0,Jo,-Vc),new O(0,Jo,Vc),new O(-1,1,-1),new O(1,1,-1),new O(-1,1,1),new O(1,1,1)],qm=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){pb=this._renderer.getRenderTarget(),mb=this._renderer.getActiveCubeFace(),gb=this._renderer.getActiveMipmapLevel(),yb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=VN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(pb,mb,gb),this._renderer.xr.enabled=yb,e.scissorTest=!1,Wm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Go||e.mapping===jo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),pb=this._renderer.getRenderTarget(),mb=this._renderer.getActiveCubeFace(),gb=this._renderer.getActiveMipmapLevel(),yb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:In,minFilter:In,generateMipmaps:!1,type:Uc,format:fr,colorSpace:_n,depthBuffer:!1},i=UN(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=UN(e,t,r);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=u$(s)),this._blurMaterial=d$(s,e,t)}return i}_compileMaterial(e){let t=new Jt(this._lodPlanes[0],e);this._renderer.compile(t,hb)}_sceneToCubeUV(e,t,r,i){let a=new Zt(90,1,t,r),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(FN),u.toneMapping=is,u.autoClear=!1;let h=new Xr({name:"PMREM.Background",side:Rn,depthWrite:!1,depthTest:!1}),g=new Jt(new Cc,h),y=!1,m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,y=!0):(h.color.copy(FN),y=!0);for(let p=0;p<6;p++){let E=p%3;E===0?(a.up.set(0,c[p],0),a.lookAt(l[p],0,0)):E===1?(a.up.set(0,0,c[p]),a.lookAt(0,l[p],0)):(a.up.set(0,c[p],0),a.lookAt(0,0,l[p]));let _=this._cubeSize;Wm(i,E*_,p>2?_:0,_,_),u.setRenderTarget(i),y&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===Go||e.mapping===jo;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=VN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BN());let s=i?this._cubemapMaterial:this._equirectMaterial,o=new Jt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;let c=this._cubeSize;Wm(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(o,hb)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;let i=this._lodPlanes.length;for(let s=1;s<i;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=kN[(i-s-1)%kN.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){let c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new Jt(this._lodPlanes[i],l),f=l.uniforms,h=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Qo-1),y=s/g,m=isFinite(s)?1+Math.floor(u*y):Qo;m>Qo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Qo}`);let p=[],E=0;for(let D=0;D<Qo;++D){let I=D/y,S=Math.exp(-I*I/2);p.push(S),D===0?E+=S:D<m&&(E+=2*S)}for(let D=0;D<p.length;D++)p[D]=p[D]/E;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=p,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);let{_lodMax:_}=this;f.dTheta.value=g,f.mipInt.value=_-r;let x=this._sizeLods[i],C=3*x*(i>_-zc?i-_+zc:0),T=4*(this._cubeSize-x);Wm(t,C,T,3*x,2*x),c.setRenderTarget(t),c.render(d,hb)}};function u$(n){let e=[],t=[],r=[],i=n,s=n-zc+1+LN.length;for(let o=0;o<s;o++){let a=Math.pow(2,i);t.push(a);let c=1/a;o>n-zc?c=LN[o-n+zc-1]:o===0&&(c=0),r.push(c);let l=1/(a-2),u=-l,d=1+l,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,g=6,y=3,m=2,p=1,E=new Float32Array(y*g*h),_=new Float32Array(m*g*h),x=new Float32Array(p*g*h);for(let T=0;T<h;T++){let D=T%3*2/3-1,I=T>2?0:-1,S=[D,I,0,D+2/3,I,0,D+2/3,I+1,0,D,I,0,D+2/3,I+1,0,D,I+1,0];E.set(S,y*g*T),_.set(f,m*g*T);let b=[T,T,T,T,T,T];x.set(b,p*g*T)}let C=new lr;C.setAttribute("position",new Kt(E,y)),C.setAttribute("uv",new Kt(_,m)),C.setAttribute("faceIndex",new Kt(x,p)),e.push(C),i>zc&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function UN(n,e,t){let r=new xi(n,e,t);return r.texture.mapping=ed,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Wm(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function d$(n,e,t){let r=new Float32Array(Qo),i=new O(0,1,0);return new ur({name:"SphericalGaussianBlur",defines:{n:Qo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ab(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:rs,depthTest:!1,depthWrite:!1})}function BN(){return new ur({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ab(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:rs,depthTest:!1,depthWrite:!1})}function VN(){return new ur({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ab(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:rs,depthTest:!1,depthWrite:!1})}function Ab(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function f$(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){let c=a.mapping,l=c===cm||c===lm,u=c===Go||c===jo;if(l||u){let d=e.get(a),f=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new qm(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let h=a.image;return l&&h&&h.height>0||u&&h&&i(h)?(t===null&&(t=new qm(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){let c=a.target;c.removeEventListener("dispose",s);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function h$(n){let e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){let i=t(r);return i===null&&qo("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function p$(n,e,t,r){let i={},s=new WeakMap;function o(d){let f=d.target;f.index!==null&&e.remove(f.index);for(let g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete i[f.id];let h=s.get(f);h&&(e.remove(h),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function c(d){let f=d.attributes;for(let h in f)e.update(f[h],n.ARRAY_BUFFER)}function l(d){let f=[],h=d.index,g=d.attributes.position,y=0;if(h!==null){let E=h.array;y=h.version;for(let _=0,x=E.length;_<x;_+=3){let C=E[_+0],T=E[_+1],D=E[_+2];f.push(C,T,T,D,D,C)}}else if(g!==void 0){let E=g.array;y=g.version;for(let _=0,x=E.length/3-1;_<x;_+=3){let C=_+0,T=_+1,D=_+2;f.push(C,T,T,D,D,C)}}else return;let m=new(cb(f)?Nu:Ru)(f,1);m.version=y;let p=s.get(d);p&&e.remove(p),s.set(d,m)}function u(d){let f=s.get(d);if(f){let h=d.index;h!==null&&f.version<h.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function m$(n,e,t){let r;function i(f){r=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function c(f,h){n.drawElements(r,h,s,f*o),t.update(h,r,1)}function l(f,h,g){g!==0&&(n.drawElementsInstanced(r,h,s,f*o,g),t.update(h,r,g))}function u(f,h,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,h,0,s,f,0,g);let m=0;for(let p=0;p<g;p++)m+=h[p];t.update(m,r,1)}function d(f,h,g,y){if(g===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let p=0;p<f.length;p++)l(f[p]/o,h[p],y[p]);else{m.multiDrawElementsInstancedWEBGL(r,h,0,s,f,0,y,0,g);let p=0;for(let E=0;E<g;E++)p+=h[E]*y[E];t.update(p,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function g$(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function y$(n,e,t){let r=new WeakMap,i=new _t;function s(o,a,c){let l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,f=r.get(a);if(f===void 0||f.count!==d){let S=function(){D.dispose(),r.delete(a),a.removeEventListener("dispose",S)};f!==void 0&&f.texture.dispose();let h=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],p=a.morphAttributes.normal||[],E=a.morphAttributes.color||[],_=0;h===!0&&(_=1),g===!0&&(_=2),y===!0&&(_=3);let x=a.attributes.position.count*_,C=1;x>e.maxTextureSize&&(C=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);let T=new Float32Array(x*C*4*d),D=new Du(T,x,C,d);D.type=Tr,D.needsUpdate=!0;let I=_*4;for(let b=0;b<d;b++){let A=m[b],j=p[b],F=E[b],V=x*C*4*b;for(let $=0;$<A.count;$++){let q=$*I;h===!0&&(i.fromBufferAttribute(A,$),T[V+q+0]=i.x,T[V+q+1]=i.y,T[V+q+2]=i.z,T[V+q+3]=0),g===!0&&(i.fromBufferAttribute(j,$),T[V+q+4]=i.x,T[V+q+5]=i.y,T[V+q+6]=i.z,T[V+q+7]=0),y===!0&&(i.fromBufferAttribute(F,$),T[V+q+8]=i.x,T[V+q+9]=i.y,T[V+q+10]=i.z,T[V+q+11]=F.itemSize===4?i.w:1)}}f={count:d,texture:D,size:new rt(x,C)},r.set(a,f),a.addEventListener("dispose",S)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let h=0;for(let y=0;y<l.length;y++)h+=l[y];let g=a.morphTargetsRelative?1:1-h;c.getUniforms().setValue(n,"morphTargetBaseInfluence",g),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function v$(n,e,t,r){let i=new WeakMap;function s(c){let l=r.render.frame,u=c.geometry,d=e.get(c,u);if(i.get(d)!==l&&(e.update(d),i.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){let f=c.skeleton;i.get(f)!==l&&(f.update(),i.set(f,l))}return d}function o(){i=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}var sP=new hr,zN=new Gu(1,1),oP=new Du,aP=new Vp,cP=new Ou,HN=[],GN=[],jN=new Float32Array(16),WN=new Float32Array(9),$N=new Float32Array(4);function Gc(n,e,t){let r=n[0];if(r<=0||r>0)return n;let i=e*t,s=HN[i];if(s===void 0&&(s=new Float32Array(i),HN[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function sn(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function on(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Ym(n,e){let t=GN[e];t===void 0&&(t=new Int32Array(e),GN[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function _$(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function x$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sn(t,e))return;n.uniform2fv(this.addr,e),on(t,e)}}function b$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(sn(t,e))return;n.uniform3fv(this.addr,e),on(t,e)}}function w$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sn(t,e))return;n.uniform4fv(this.addr,e),on(t,e)}}function S$(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(sn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),on(t,e)}else{if(sn(t,r))return;$N.set(r),n.uniformMatrix2fv(this.addr,!1,$N),on(t,r)}}function E$(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(sn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),on(t,e)}else{if(sn(t,r))return;WN.set(r),n.uniformMatrix3fv(this.addr,!1,WN),on(t,r)}}function M$(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(sn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),on(t,e)}else{if(sn(t,r))return;jN.set(r),n.uniformMatrix4fv(this.addr,!1,jN),on(t,r)}}function T$(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function A$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sn(t,e))return;n.uniform2iv(this.addr,e),on(t,e)}}function C$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(sn(t,e))return;n.uniform3iv(this.addr,e),on(t,e)}}function D$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sn(t,e))return;n.uniform4iv(this.addr,e),on(t,e)}}function I$(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function R$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sn(t,e))return;n.uniform2uiv(this.addr,e),on(t,e)}}function N$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(sn(t,e))return;n.uniform3uiv(this.addr,e),on(t,e)}}function P$(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sn(t,e))return;n.uniform4uiv(this.addr,e),on(t,e)}}function O$(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(zN.compareFunction=ib,s=zN):s=sP,t.setTexture2D(e||s,i)}function L$(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||aP,i)}function F$(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||cP,i)}function k$(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||oP,i)}function U$(n){switch(n){case 5126:return _$;case 35664:return x$;case 35665:return b$;case 35666:return w$;case 35674:return S$;case 35675:return E$;case 35676:return M$;case 5124:case 35670:return T$;case 35667:case 35671:return A$;case 35668:case 35672:return C$;case 35669:case 35673:return D$;case 5125:return I$;case 36294:return R$;case 36295:return N$;case 36296:return P$;case 35678:case 36198:case 36298:case 36306:case 35682:return O$;case 35679:case 36299:case 36307:return L$;case 35680:case 36300:case 36308:case 36293:return F$;case 36289:case 36303:case 36311:case 36292:return k$}}function B$(n,e){n.uniform1fv(this.addr,e)}function V$(n,e){let t=Gc(e,this.size,2);n.uniform2fv(this.addr,t)}function z$(n,e){let t=Gc(e,this.size,3);n.uniform3fv(this.addr,t)}function H$(n,e){let t=Gc(e,this.size,4);n.uniform4fv(this.addr,t)}function G$(n,e){let t=Gc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function j$(n,e){let t=Gc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function W$(n,e){let t=Gc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $$(n,e){n.uniform1iv(this.addr,e)}function q$(n,e){n.uniform2iv(this.addr,e)}function X$(n,e){n.uniform3iv(this.addr,e)}function Y$(n,e){n.uniform4iv(this.addr,e)}function Z$(n,e){n.uniform1uiv(this.addr,e)}function K$(n,e){n.uniform2uiv(this.addr,e)}function J$(n,e){n.uniform3uiv(this.addr,e)}function Q$(n,e){n.uniform4uiv(this.addr,e)}function e6(n,e,t){let r=this.cache,i=e.length,s=Ym(t,i);sn(r,s)||(n.uniform1iv(this.addr,s),on(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||sP,s[o])}function t6(n,e,t){let r=this.cache,i=e.length,s=Ym(t,i);sn(r,s)||(n.uniform1iv(this.addr,s),on(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||aP,s[o])}function n6(n,e,t){let r=this.cache,i=e.length,s=Ym(t,i);sn(r,s)||(n.uniform1iv(this.addr,s),on(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||cP,s[o])}function r6(n,e,t){let r=this.cache,i=e.length,s=Ym(t,i);sn(r,s)||(n.uniform1iv(this.addr,s),on(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||oP,s[o])}function i6(n){switch(n){case 5126:return B$;case 35664:return V$;case 35665:return z$;case 35666:return H$;case 35674:return G$;case 35675:return j$;case 35676:return W$;case 5124:case 35670:return $$;case 35667:case 35671:return q$;case 35668:case 35672:return X$;case 35669:case 35673:return Y$;case 5125:return Z$;case 36294:return K$;case 36295:return J$;case 36296:return Q$;case 35678:case 36198:case 36298:case 36306:case 35682:return e6;case 35679:case 36299:case 36307:return t6;case 35680:case 36300:case 36308:case 36293:return n6;case 36289:case 36303:case 36311:case 36292:return r6}}var _b=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=U$(t.type)}},xb=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=i6(t.type)}},bb=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let s=0,o=i.length;s!==o;++s){let a=i[s];a.setValue(e,t[a.id],r)}}},vb=/(\w+)(\])?(\[|\.)?/g;function qN(n,e){n.seq.push(e),n.map[e.id]=e}function s6(n,e,t){let r=n.name,i=r.length;for(vb.lastIndex=0;;){let s=vb.exec(r),o=vb.lastIndex,a=s[1],c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===i){qN(t,l===void 0?new _b(a,n,e):new xb(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new bb(a),qN(t,d)),t=d}}}var Hc=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){let s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);s6(s,o,this)}}setValue(e,t,r,i){let s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){let a=t[s],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,s=e.length;i!==s;++i){let o=e[i];o.id in t&&r.push(o)}return r}};function XN(n,e,t){let r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}var o6=37297,a6=0;function c6(n,e){let t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){let a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}var YN=new qe;function l6(n){ct._getMatrix(YN,ct.workingColorSpace,n);let e=`mat3( ${YN.elements.map(t=>t.toFixed(4))} )`;switch(ct.getTransfer(n)){case Tu:return[e,"LinearTransferOETF"];case Ct:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function ZN(n,e,t){let r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";let s=/ERROR: 0:(\d+)/.exec(i);if(s){let o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+c6(n.getShaderSource(e),o)}else return i}function u6(n,e){let t=l6(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function d6(n,e){let t;switch(e){case cN:t="Linear";break;case lN:t="Reinhard";break;case uN:t="Cineon";break;case dN:t="ACESFilmic";break;case hN:t="AgX";break;case pN:t="Neutral";break;case fN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var $m=new O;function f6(){ct.getLuminanceCoefficients($m);let n=$m.x.toFixed(4),e=$m.y.toFixed(4),t=$m.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function h6(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ad).join(`
`)}function p6(n){let e=[];for(let t in n){let r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function m6(n,e){let t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let s=n.getActiveAttrib(e,i),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function ad(n){return n!==""}function KN(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function JN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var g6=/^[ \t]*#include +<([\w\d./]+)>/gm;function wb(n){return n.replace(g6,v6)}var y6=new Map;function v6(n,e){let t=Je[e];if(t===void 0){let r=y6.get(e);if(r!==void 0)t=Je[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return wb(t)}var _6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function QN(n){return n.replace(_6,x6)}function x6(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function eP(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function b6(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Hx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===z1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ei&&(e="SHADOWMAP_TYPE_VSM"),e}function w6(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Go:case jo:e="ENVMAP_TYPE_CUBE";break;case ed:e="ENVMAP_TYPE_CUBE_UV";break}return e}function S6(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case jo:e="ENVMAP_MODE_REFRACTION";break}return e}function E6(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $x:e="ENVMAP_BLENDING_MULTIPLY";break;case oN:e="ENVMAP_BLENDING_MIX";break;case aN:e="ENVMAP_BLENDING_ADD";break}return e}function M6(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function T6(n,e,t,r){let i=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,c=b6(t),l=w6(t),u=S6(t),d=E6(t),f=M6(t),h=h6(t),g=p6(s),y=i.createProgram(),m,p,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(ad).join(`
`),m.length>0&&(m+=`
`),p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(ad).join(`
`),p.length>0&&(p+=`
`)):(m=[eP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ad).join(`
`),p=[eP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==is?"#define TONE_MAPPING":"",t.toneMapping!==is?Je.tonemapping_pars_fragment:"",t.toneMapping!==is?d6("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Je.colorspace_pars_fragment,u6("linearToOutputTexel",t.outputColorSpace),f6(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ad).join(`
`)),o=wb(o),o=KN(o,t),o=JN(o,t),a=wb(a),a=KN(a,t),a=JN(a,t),o=QN(o),a=QN(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,m=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,p=["#define varying in",t.glslVersion===sb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===sb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let _=E+m+o,x=E+p+a,C=XN(i,i.VERTEX_SHADER,_),T=XN(i,i.FRAGMENT_SHADER,x);i.attachShader(y,C),i.attachShader(y,T),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function D(A){if(n.debug.checkShaderErrors){let j=i.getProgramInfoLog(y).trim(),F=i.getShaderInfoLog(C).trim(),V=i.getShaderInfoLog(T).trim(),$=!0,q=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,C,T);else{let te=ZN(i,C,"vertex"),W=ZN(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+j+`
`+te+`
`+W)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(F===""||V==="")&&(q=!1);q&&(A.diagnostics={runnable:$,programLog:j,vertexShader:{log:F,prefix:m},fragmentShader:{log:V,prefix:p}})}i.deleteShader(C),i.deleteShader(T),I=new Hc(i,y),S=m6(i,y)}let I;this.getUniforms=function(){return I===void 0&&D(this),I};let S;this.getAttributes=function(){return S===void 0&&D(this),S};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=i.getProgramParameter(y,o6)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=a6++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=T,this}var A6=0,Sb=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Eb(e),t.set(e,r)),r}},Eb=class{constructor(e){this.id=A6++,this.code=e,this.usedTimes=0}};function C6(n,e,t,r,i,s,o){let a=new Iu,c=new Sb,l=new Set,u=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures,h=i.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(S){return l.add(S),S===0?"uv":`uv${S}`}function m(S,b,A,j,F){let V=j.fog,$=F.geometry,q=S.isMeshStandardMaterial?j.environment:null,te=(S.isMeshStandardMaterial?t:e).get(S.envMap||q),W=te&&te.mapping===ed?te.image.height:null,se=g[S.type];S.precision!==null&&(h=i.getMaxPrecision(S.precision),h!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",h,"instead."));let he=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Se=he!==void 0?he.length:0,Qe=0;$.morphAttributes.position!==void 0&&(Qe=1),$.morphAttributes.normal!==void 0&&(Qe=2),$.morphAttributes.color!==void 0&&(Qe=3);let Et,Y,ie,U;if(se){let Mt=Ti[se];Et=Mt.vertexShader,Y=Mt.fragmentShader}else Et=S.vertexShader,Y=S.fragmentShader,c.update(S),ie=c.getVertexShaderID(S),U=c.getFragmentShaderID(S);let z=n.getRenderTarget(),ce=n.state.buffers.depth.getReversed(),oe=F.isInstancedMesh===!0,Ue=F.isBatchedMesh===!0,et=!!S.map,tt=!!S.matcap,Ot=!!te,R=!!S.aoMap,pr=!!S.lightMap,ut=!!S.bumpMap,dt=!!S.normalMap,Me=!!S.displacementMap,Pt=!!S.emissiveMap,Te=!!S.metalnessMap,M=!!S.roughnessMap,v=S.anisotropy>0,B=S.clearcoat>0,K=S.dispersion>0,ee=S.iridescence>0,Z=S.sheen>0,we=S.transmission>0,fe=v&&!!S.anisotropyMap,ye=B&&!!S.clearcoatMap,mt=B&&!!S.clearcoatNormalMap,re=B&&!!S.clearcoatRoughnessMap,ve=ee&&!!S.iridescenceMap,Le=ee&&!!S.iridescenceThicknessMap,ze=Z&&!!S.sheenColorMap,_e=Z&&!!S.sheenRoughnessMap,ft=!!S.specularMap,Ke=!!S.specularColorMap,Rt=!!S.specularIntensityMap,N=we&&!!S.transmissionMap,ue=we&&!!S.thicknessMap,X=!!S.gradientMap,J=!!S.alphaMap,me=S.alphaTest>0,pe=!!S.alphaHash,Xe=!!S.extensions,Bt=is;S.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Bt=n.toneMapping);let bn={shaderID:se,shaderType:S.type,shaderName:S.name,vertexShader:Et,fragmentShader:Y,defines:S.defines,customVertexShaderID:ie,customFragmentShaderID:U,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:h,batching:Ue,batchingColor:Ue&&F._colorsTexture!==null,instancing:oe,instancingColor:oe&&F.instanceColor!==null,instancingMorph:oe&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:z===null?n.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:_n,alphaToCoverage:!!S.alphaToCoverage,map:et,matcap:tt,envMap:Ot,envMapMode:Ot&&te.mapping,envMapCubeUVHeight:W,aoMap:R,lightMap:pr,bumpMap:ut,normalMap:dt,displacementMap:f&&Me,emissiveMap:Pt,normalMapObjectSpace:dt&&S.normalMapType===_N,normalMapTangentSpace:dt&&S.normalMapType===rb,metalnessMap:Te,roughnessMap:M,anisotropy:v,anisotropyMap:fe,clearcoat:B,clearcoatMap:ye,clearcoatNormalMap:mt,clearcoatRoughnessMap:re,dispersion:K,iridescence:ee,iridescenceMap:ve,iridescenceThicknessMap:Le,sheen:Z,sheenColorMap:ze,sheenRoughnessMap:_e,specularMap:ft,specularColorMap:Ke,specularIntensityMap:Rt,transmission:we,transmissionMap:N,thicknessMap:ue,gradientMap:X,opaque:S.transparent===!1&&S.blending===Ro&&S.alphaToCoverage===!1,alphaMap:J,alphaTest:me,alphaHash:pe,combine:S.combine,mapUv:et&&y(S.map.channel),aoMapUv:R&&y(S.aoMap.channel),lightMapUv:pr&&y(S.lightMap.channel),bumpMapUv:ut&&y(S.bumpMap.channel),normalMapUv:dt&&y(S.normalMap.channel),displacementMapUv:Me&&y(S.displacementMap.channel),emissiveMapUv:Pt&&y(S.emissiveMap.channel),metalnessMapUv:Te&&y(S.metalnessMap.channel),roughnessMapUv:M&&y(S.roughnessMap.channel),anisotropyMapUv:fe&&y(S.anisotropyMap.channel),clearcoatMapUv:ye&&y(S.clearcoatMap.channel),clearcoatNormalMapUv:mt&&y(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:re&&y(S.clearcoatRoughnessMap.channel),iridescenceMapUv:ve&&y(S.iridescenceMap.channel),iridescenceThicknessMapUv:Le&&y(S.iridescenceThicknessMap.channel),sheenColorMapUv:ze&&y(S.sheenColorMap.channel),sheenRoughnessMapUv:_e&&y(S.sheenRoughnessMap.channel),specularMapUv:ft&&y(S.specularMap.channel),specularColorMapUv:Ke&&y(S.specularColorMap.channel),specularIntensityMapUv:Rt&&y(S.specularIntensityMap.channel),transmissionMapUv:N&&y(S.transmissionMap.channel),thicknessMapUv:ue&&y(S.thicknessMap.channel),alphaMapUv:J&&y(S.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(dt||v),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!$.attributes.uv&&(et||J),fog:!!V,useFog:S.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:ce,skinning:F.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:Se,morphTextureStride:Qe,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:Bt,decodeVideoTexture:et&&S.map.isVideoTexture===!0&&ct.getTransfer(S.map.colorSpace)===Ct,decodeVideoTextureEmissive:Pt&&S.emissiveMap.isVideoTexture===!0&&ct.getTransfer(S.emissiveMap.colorSpace)===Ct,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Mr,flipSided:S.side===Rn,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:Xe&&S.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xe&&S.extensions.multiDraw===!0||Ue)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return bn.vertexUv1s=l.has(1),bn.vertexUv2s=l.has(2),bn.vertexUv3s=l.has(3),l.clear(),bn}function p(S){let b=[];if(S.shaderID?b.push(S.shaderID):(b.push(S.customVertexShaderID),b.push(S.customFragmentShaderID)),S.defines!==void 0)for(let A in S.defines)b.push(A),b.push(S.defines[A]);return S.isRawShaderMaterial===!1&&(E(b,S),_(b,S),b.push(n.outputColorSpace)),b.push(S.customProgramCacheKey),b.join()}function E(S,b){S.push(b.precision),S.push(b.outputColorSpace),S.push(b.envMapMode),S.push(b.envMapCubeUVHeight),S.push(b.mapUv),S.push(b.alphaMapUv),S.push(b.lightMapUv),S.push(b.aoMapUv),S.push(b.bumpMapUv),S.push(b.normalMapUv),S.push(b.displacementMapUv),S.push(b.emissiveMapUv),S.push(b.metalnessMapUv),S.push(b.roughnessMapUv),S.push(b.anisotropyMapUv),S.push(b.clearcoatMapUv),S.push(b.clearcoatNormalMapUv),S.push(b.clearcoatRoughnessMapUv),S.push(b.iridescenceMapUv),S.push(b.iridescenceThicknessMapUv),S.push(b.sheenColorMapUv),S.push(b.sheenRoughnessMapUv),S.push(b.specularMapUv),S.push(b.specularColorMapUv),S.push(b.specularIntensityMapUv),S.push(b.transmissionMapUv),S.push(b.thicknessMapUv),S.push(b.combine),S.push(b.fogExp2),S.push(b.sizeAttenuation),S.push(b.morphTargetsCount),S.push(b.morphAttributeCount),S.push(b.numDirLights),S.push(b.numPointLights),S.push(b.numSpotLights),S.push(b.numSpotLightMaps),S.push(b.numHemiLights),S.push(b.numRectAreaLights),S.push(b.numDirLightShadows),S.push(b.numPointLightShadows),S.push(b.numSpotLightShadows),S.push(b.numSpotLightShadowsWithMaps),S.push(b.numLightProbes),S.push(b.shadowMapType),S.push(b.toneMapping),S.push(b.numClippingPlanes),S.push(b.numClipIntersection),S.push(b.depthPacking)}function _(S,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),S.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.reverseDepthBuffer&&a.enable(4),b.skinning&&a.enable(5),b.morphTargets&&a.enable(6),b.morphNormals&&a.enable(7),b.morphColors&&a.enable(8),b.premultipliedAlpha&&a.enable(9),b.shadowMapEnabled&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.opaque&&a.enable(17),b.pointsUvs&&a.enable(18),b.decodeVideoTexture&&a.enable(19),b.decodeVideoTextureEmissive&&a.enable(20),b.alphaToCoverage&&a.enable(21),S.push(a.mask)}function x(S){let b=g[S.type],A;if(b){let j=Ti[b];A=NN.clone(j.uniforms)}else A=S.uniforms;return A}function C(S,b){let A;for(let j=0,F=u.length;j<F;j++){let V=u[j];if(V.cacheKey===b){A=V,++A.usedTimes;break}}return A===void 0&&(A=new T6(n,b,S,s),u.push(A)),A}function T(S){if(--S.usedTimes===0){let b=u.indexOf(S);u[b]=u[u.length-1],u.pop(),S.destroy()}}function D(S){c.remove(S)}function I(){c.dispose()}return{getParameters:m,getProgramCacheKey:p,getUniforms:x,acquireProgram:C,releaseProgram:T,releaseShaderCache:D,programs:u,dispose:I}}function D6(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function I6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function tP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nP(){let n=[],e=0,t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,f,h,g,y,m){let p=n[e];return p===void 0?(p={id:d.id,object:d,geometry:f,material:h,groupOrder:g,renderOrder:d.renderOrder,z:y,group:m},n[e]=p):(p.id=d.id,p.object=d,p.geometry=f,p.material=h,p.groupOrder=g,p.renderOrder=d.renderOrder,p.z=y,p.group=m),e++,p}function a(d,f,h,g,y,m){let p=o(d,f,h,g,y,m);h.transmission>0?r.push(p):h.transparent===!0?i.push(p):t.push(p)}function c(d,f,h,g,y,m){let p=o(d,f,h,g,y,m);h.transmission>0?r.unshift(p):h.transparent===!0?i.unshift(p):t.unshift(p)}function l(d,f){t.length>1&&t.sort(d||I6),r.length>1&&r.sort(f||tP),i.length>1&&i.sort(f||tP)}function u(){for(let d=e,f=n.length;d<f;d++){let h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:u,sort:l}}function R6(){let n=new WeakMap;function e(r,i){let s=n.get(r),o;return s===void 0?(o=new nP,n.set(r,[o])):i>=s.length?(o=new nP,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function N6(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new Oe};break;case"SpotLight":t={position:new O,direction:new O,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new O,halfWidth:new O,halfHeight:new O};break}return n[e.id]=t,t}}}function P6(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var O6=0;function L6(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function F6(n){let e=new N6,t=P6(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new O);let i=new O,s=new $e,o=new $e;function a(l){let u=0,d=0,f=0;for(let S=0;S<9;S++)r.probe[S].set(0,0,0);let h=0,g=0,y=0,m=0,p=0,E=0,_=0,x=0,C=0,T=0,D=0;l.sort(L6);for(let S=0,b=l.length;S<b;S++){let A=l[S],j=A.color,F=A.intensity,V=A.distance,$=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=j.r*F,d+=j.g*F,f+=j.b*F;else if(A.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(A.sh.coefficients[q],F);D++}else if(A.isDirectionalLight){let q=e.get(A);if(q.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){let te=A.shadow,W=t.get(A);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,r.directionalShadow[h]=W,r.directionalShadowMap[h]=$,r.directionalShadowMatrix[h]=A.shadow.matrix,E++}r.directional[h]=q,h++}else if(A.isSpotLight){let q=e.get(A);q.position.setFromMatrixPosition(A.matrixWorld),q.color.copy(j).multiplyScalar(F),q.distance=V,q.coneCos=Math.cos(A.angle),q.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),q.decay=A.decay,r.spot[y]=q;let te=A.shadow;if(A.map&&(r.spotLightMap[C]=A.map,C++,te.updateMatrices(A),A.castShadow&&T++),r.spotLightMatrix[y]=te.matrix,A.castShadow){let W=t.get(A);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,r.spotShadow[y]=W,r.spotShadowMap[y]=$,x++}y++}else if(A.isRectAreaLight){let q=e.get(A);q.color.copy(j).multiplyScalar(F),q.halfWidth.set(A.width*.5,0,0),q.halfHeight.set(0,A.height*.5,0),r.rectArea[m]=q,m++}else if(A.isPointLight){let q=e.get(A);if(q.color.copy(A.color).multiplyScalar(A.intensity),q.distance=A.distance,q.decay=A.decay,A.castShadow){let te=A.shadow,W=t.get(A);W.shadowIntensity=te.intensity,W.shadowBias=te.bias,W.shadowNormalBias=te.normalBias,W.shadowRadius=te.radius,W.shadowMapSize=te.mapSize,W.shadowCameraNear=te.camera.near,W.shadowCameraFar=te.camera.far,r.pointShadow[g]=W,r.pointShadowMap[g]=$,r.pointShadowMatrix[g]=A.shadow.matrix,_++}r.point[g]=q,g++}else if(A.isHemisphereLight){let q=e.get(A);q.skyColor.copy(A.color).multiplyScalar(F),q.groundColor.copy(A.groundColor).multiplyScalar(F),r.hemi[p]=q,p++}}m>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=le.LTC_FLOAT_1,r.rectAreaLTC2=le.LTC_FLOAT_2):(r.rectAreaLTC1=le.LTC_HALF_1,r.rectAreaLTC2=le.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;let I=r.hash;(I.directionalLength!==h||I.pointLength!==g||I.spotLength!==y||I.rectAreaLength!==m||I.hemiLength!==p||I.numDirectionalShadows!==E||I.numPointShadows!==_||I.numSpotShadows!==x||I.numSpotMaps!==C||I.numLightProbes!==D)&&(r.directional.length=h,r.spot.length=y,r.rectArea.length=m,r.point.length=g,r.hemi.length=p,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=_,r.spotLightMatrix.length=x+C-T,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=D,I.directionalLength=h,I.pointLength=g,I.spotLength=y,I.rectAreaLength=m,I.hemiLength=p,I.numDirectionalShadows=E,I.numPointShadows=_,I.numSpotShadows=x,I.numSpotMaps=C,I.numLightProbes=D,r.version=O6++)}function c(l,u){let d=0,f=0,h=0,g=0,y=0,m=u.matrixWorldInverse;for(let p=0,E=l.length;p<E;p++){let _=l[p];if(_.isDirectionalLight){let x=r.directional[d];x.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(m),d++}else if(_.isSpotLight){let x=r.spot[h];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),x.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(m),h++}else if(_.isRectAreaLight){let x=r.rectArea[g];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),o.identity(),s.copy(_.matrixWorld),s.premultiply(m),o.extractRotation(s),x.halfWidth.set(_.width*.5,0,0),x.halfHeight.set(0,_.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),g++}else if(_.isPointLight){let x=r.point[f];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(m),f++}else if(_.isHemisphereLight){let x=r.hemi[y];x.direction.setFromMatrixPosition(_.matrixWorld),x.direction.transformDirection(m),y++}}}return{setup:a,setupView:c,state:r}}function rP(n){let e=new F6(n),t=[],r=[];function i(u){l.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function k6(n){let e=new WeakMap;function t(i,s=0){let o=e.get(i),a;return o===void 0?(a=new rP(n),e.set(i,[a])):s>=o.length?(a=new rP(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}var U6=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,B6=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function V6(n,e,t){let r=new Nc,i=new rt,s=new rt,o=new _t,a=new Wp({depthPacking:vN}),c=new $p,l={},u=t.maxTextureSize,d={[qr]:Rn,[Rn]:qr,[Mr]:Mr},f=new ur({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:U6,fragmentShader:B6}),h=f.clone();h.defines.HORIZONTAL_PASS=1;let g=new lr;g.setAttribute("position",new Kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new Jt(g,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Hx;let p=this.type;this.render=function(T,D,I){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||T.length===0)return;let S=n.getRenderTarget(),b=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),j=n.state;j.setBlending(rs),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);let F=p!==Ei&&this.type===Ei,V=p===Ei&&this.type!==Ei;for(let $=0,q=T.length;$<q;$++){let te=T[$],W=te.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;i.copy(W.mapSize);let se=W.getFrameExtents();if(i.multiply(se),s.copy(W.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/se.x),i.x=s.x*se.x,W.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/se.y),i.y=s.y*se.y,W.mapSize.y=s.y)),W.map===null||F===!0||V===!0){let Se=this.type!==Ei?{minFilter:vn,magFilter:vn}:{};W.map!==null&&W.map.dispose(),W.map=new xi(i.x,i.y,Se),W.map.texture.name=te.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();let he=W.getViewportCount();for(let Se=0;Se<he;Se++){let Qe=W.getViewport(Se);o.set(s.x*Qe.x,s.y*Qe.y,s.x*Qe.z,s.y*Qe.w),j.viewport(o),W.updateMatrices(te,Se),r=W.getFrustum(),x(D,I,W.camera,te,this.type)}W.isPointLightShadow!==!0&&this.type===Ei&&E(W,I),W.needsUpdate=!1}p=this.type,m.needsUpdate=!1,n.setRenderTarget(S,b,A)};function E(T,D){let I=e.update(y);f.defines.VSM_SAMPLES!==T.blurSamples&&(f.defines.VSM_SAMPLES=T.blurSamples,h.defines.VSM_SAMPLES=T.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new xi(i.x,i.y)),f.uniforms.shadow_pass.value=T.map.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(D,null,I,f,y,null),h.uniforms.shadow_pass.value=T.mapPass.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(D,null,I,h,y,null)}function _(T,D,I,S){let b=null,A=I.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(A!==void 0)b=A;else if(b=I.isPointLight===!0?c:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){let j=b.uuid,F=D.uuid,V=l[j];V===void 0&&(V={},l[j]=V);let $=V[F];$===void 0&&($=b.clone(),V[F]=$,D.addEventListener("dispose",C)),b=$}if(b.visible=D.visible,b.wireframe=D.wireframe,S===Ei?b.side=D.shadowSide!==null?D.shadowSide:D.side:b.side=D.shadowSide!==null?D.shadowSide:d[D.side],b.alphaMap=D.alphaMap,b.alphaTest=D.alphaTest,b.map=D.map,b.clipShadows=D.clipShadows,b.clippingPlanes=D.clippingPlanes,b.clipIntersection=D.clipIntersection,b.displacementMap=D.displacementMap,b.displacementScale=D.displacementScale,b.displacementBias=D.displacementBias,b.wireframeLinewidth=D.wireframeLinewidth,b.linewidth=D.linewidth,I.isPointLight===!0&&b.isMeshDistanceMaterial===!0){let j=n.properties.get(b);j.light=I}return b}function x(T,D,I,S,b){if(T.visible===!1)return;if(T.layers.test(D.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&b===Ei)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);let F=e.update(T),V=T.material;if(Array.isArray(V)){let $=F.groups;for(let q=0,te=$.length;q<te;q++){let W=$[q],se=V[W.materialIndex];if(se&&se.visible){let he=_(T,se,S,b);T.onBeforeShadow(n,T,D,I,F,he,W),n.renderBufferDirect(I,null,F,he,T,W),T.onAfterShadow(n,T,D,I,F,he,W)}}}else if(V.visible){let $=_(T,V,S,b);T.onBeforeShadow(n,T,D,I,F,$,null),n.renderBufferDirect(I,null,F,$,T,null),T.onAfterShadow(n,T,D,I,F,$,null)}}let j=T.children;for(let F=0,V=j.length;F<V;F++)x(j[F],D,I,S,b)}function C(T){T.target.removeEventListener("dispose",C);for(let I in l){let S=l[I],b=T.target.uuid;b in S&&(S[b].dispose(),delete S[b])}}}var z6={[tm]:nm,[rm]:om,[im]:am,[No]:sm,[nm]:tm,[om]:rm,[am]:im,[sm]:No};function H6(n,e){function t(){let N=!1,ue=new _t,X=null,J=new _t(0,0,0,0);return{setMask:function(me){X!==me&&!N&&(n.colorMask(me,me,me,me),X=me)},setLocked:function(me){N=me},setClear:function(me,pe,Xe,Bt,bn){bn===!0&&(me*=Bt,pe*=Bt,Xe*=Bt),ue.set(me,pe,Xe,Bt),J.equals(ue)===!1&&(n.clearColor(me,pe,Xe,Bt),J.copy(ue))},reset:function(){N=!1,X=null,J.set(-1,0,0,0)}}}function r(){let N=!1,ue=!1,X=null,J=null,me=null;return{setReversed:function(pe){if(ue!==pe){let Xe=e.get("EXT_clip_control");ue?Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.ZERO_TO_ONE_EXT):Xe.clipControlEXT(Xe.LOWER_LEFT_EXT,Xe.NEGATIVE_ONE_TO_ONE_EXT);let Bt=me;me=null,this.setClear(Bt)}ue=pe},getReversed:function(){return ue},setTest:function(pe){pe?z(n.DEPTH_TEST):ce(n.DEPTH_TEST)},setMask:function(pe){X!==pe&&!N&&(n.depthMask(pe),X=pe)},setFunc:function(pe){if(ue&&(pe=z6[pe]),J!==pe){switch(pe){case tm:n.depthFunc(n.NEVER);break;case nm:n.depthFunc(n.ALWAYS);break;case rm:n.depthFunc(n.LESS);break;case No:n.depthFunc(n.LEQUAL);break;case im:n.depthFunc(n.EQUAL);break;case sm:n.depthFunc(n.GEQUAL);break;case om:n.depthFunc(n.GREATER);break;case am:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}J=pe}},setLocked:function(pe){N=pe},setClear:function(pe){me!==pe&&(ue&&(pe=1-pe),n.clearDepth(pe),me=pe)},reset:function(){N=!1,X=null,J=null,me=null,ue=!1}}}function i(){let N=!1,ue=null,X=null,J=null,me=null,pe=null,Xe=null,Bt=null,bn=null;return{setTest:function(Mt){N||(Mt?z(n.STENCIL_TEST):ce(n.STENCIL_TEST))},setMask:function(Mt){ue!==Mt&&!N&&(n.stencilMask(Mt),ue=Mt)},setFunc:function(Mt,Cr,Ai){(X!==Mt||J!==Cr||me!==Ai)&&(n.stencilFunc(Mt,Cr,Ai),X=Mt,J=Cr,me=Ai)},setOp:function(Mt,Cr,Ai){(pe!==Mt||Xe!==Cr||Bt!==Ai)&&(n.stencilOp(Mt,Cr,Ai),pe=Mt,Xe=Cr,Bt=Ai)},setLocked:function(Mt){N=Mt},setClear:function(Mt){bn!==Mt&&(n.clearStencil(Mt),bn=Mt)},reset:function(){N=!1,ue=null,X=null,J=null,me=null,pe=null,Xe=null,Bt=null,bn=null}}}let s=new t,o=new r,a=new i,c=new WeakMap,l=new WeakMap,u={},d={},f=new WeakMap,h=[],g=null,y=!1,m=null,p=null,E=null,_=null,x=null,C=null,T=null,D=new Oe(0,0,0),I=0,S=!1,b=null,A=null,j=null,F=null,V=null,$=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),q=!1,te=0,W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(W)[1]),q=te>=1):W.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),q=te>=2);let se=null,he={},Se=n.getParameter(n.SCISSOR_BOX),Qe=n.getParameter(n.VIEWPORT),Et=new _t().fromArray(Se),Y=new _t().fromArray(Qe);function ie(N,ue,X,J){let me=new Uint8Array(4),pe=n.createTexture();n.bindTexture(N,pe),n.texParameteri(N,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(N,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Xe=0;Xe<X;Xe++)N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY?n.texImage3D(ue,0,n.RGBA,1,1,J,0,n.RGBA,n.UNSIGNED_BYTE,me):n.texImage2D(ue+Xe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,me);return pe}let U={};U[n.TEXTURE_2D]=ie(n.TEXTURE_2D,n.TEXTURE_2D,1),U[n.TEXTURE_CUBE_MAP]=ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[n.TEXTURE_2D_ARRAY]=ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),U[n.TEXTURE_3D]=ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),z(n.DEPTH_TEST),o.setFunc(No),ut(!1),dt(zx),z(n.CULL_FACE),R(rs);function z(N){u[N]!==!0&&(n.enable(N),u[N]=!0)}function ce(N){u[N]!==!1&&(n.disable(N),u[N]=!1)}function oe(N,ue){return d[N]!==ue?(n.bindFramebuffer(N,ue),d[N]=ue,N===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ue),N===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ue),!0):!1}function Ue(N,ue){let X=h,J=!1;if(N){X=f.get(ue),X===void 0&&(X=[],f.set(ue,X));let me=N.textures;if(X.length!==me.length||X[0]!==n.COLOR_ATTACHMENT0){for(let pe=0,Xe=me.length;pe<Xe;pe++)X[pe]=n.COLOR_ATTACHMENT0+pe;X.length=me.length,J=!0}}else X[0]!==n.BACK&&(X[0]=n.BACK,J=!0);J&&n.drawBuffers(X)}function et(N){return g!==N?(n.useProgram(N),g=N,!0):!1}let tt={[Bs]:n.FUNC_ADD,[G1]:n.FUNC_SUBTRACT,[j1]:n.FUNC_REVERSE_SUBTRACT};tt[W1]=n.MIN,tt[$1]=n.MAX;let Ot={[q1]:n.ZERO,[X1]:n.ONE,[Y1]:n.SRC_COLOR,[Lp]:n.SRC_ALPHA,[tN]:n.SRC_ALPHA_SATURATE,[Q1]:n.DST_COLOR,[K1]:n.DST_ALPHA,[Z1]:n.ONE_MINUS_SRC_COLOR,[Fp]:n.ONE_MINUS_SRC_ALPHA,[eN]:n.ONE_MINUS_DST_COLOR,[J1]:n.ONE_MINUS_DST_ALPHA,[nN]:n.CONSTANT_COLOR,[rN]:n.ONE_MINUS_CONSTANT_COLOR,[iN]:n.CONSTANT_ALPHA,[sN]:n.ONE_MINUS_CONSTANT_ALPHA};function R(N,ue,X,J,me,pe,Xe,Bt,bn,Mt){if(N===rs){y===!0&&(ce(n.BLEND),y=!1);return}if(y===!1&&(z(n.BLEND),y=!0),N!==H1){if(N!==m||Mt!==S){if((p!==Bs||x!==Bs)&&(n.blendEquation(n.FUNC_ADD),p=Bs,x=Bs),Mt)switch(N){case Ro:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Gx:n.blendFunc(n.ONE,n.ONE);break;case jx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Wx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}else switch(N){case Ro:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Gx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case jx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Wx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}E=null,_=null,C=null,T=null,D.set(0,0,0),I=0,m=N,S=Mt}return}me=me||ue,pe=pe||X,Xe=Xe||J,(ue!==p||me!==x)&&(n.blendEquationSeparate(tt[ue],tt[me]),p=ue,x=me),(X!==E||J!==_||pe!==C||Xe!==T)&&(n.blendFuncSeparate(Ot[X],Ot[J],Ot[pe],Ot[Xe]),E=X,_=J,C=pe,T=Xe),(Bt.equals(D)===!1||bn!==I)&&(n.blendColor(Bt.r,Bt.g,Bt.b,bn),D.copy(Bt),I=bn),m=N,S=!1}function pr(N,ue){N.side===Mr?ce(n.CULL_FACE):z(n.CULL_FACE);let X=N.side===Rn;ue&&(X=!X),ut(X),N.blending===Ro&&N.transparent===!1?R(rs):R(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.blendColor,N.blendAlpha,N.premultipliedAlpha),o.setFunc(N.depthFunc),o.setTest(N.depthTest),o.setMask(N.depthWrite),s.setMask(N.colorWrite);let J=N.stencilWrite;a.setTest(J),J&&(a.setMask(N.stencilWriteMask),a.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),a.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),Pt(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),N.alphaToCoverage===!0?z(n.SAMPLE_ALPHA_TO_COVERAGE):ce(n.SAMPLE_ALPHA_TO_COVERAGE)}function ut(N){b!==N&&(N?n.frontFace(n.CW):n.frontFace(n.CCW),b=N)}function dt(N){N!==B1?(z(n.CULL_FACE),N!==A&&(N===zx?n.cullFace(n.BACK):N===V1?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ce(n.CULL_FACE),A=N}function Me(N){N!==j&&(q&&n.lineWidth(N),j=N)}function Pt(N,ue,X){N?(z(n.POLYGON_OFFSET_FILL),(F!==ue||V!==X)&&(n.polygonOffset(ue,X),F=ue,V=X)):ce(n.POLYGON_OFFSET_FILL)}function Te(N){N?z(n.SCISSOR_TEST):ce(n.SCISSOR_TEST)}function M(N){N===void 0&&(N=n.TEXTURE0+$-1),se!==N&&(n.activeTexture(N),se=N)}function v(N,ue,X){X===void 0&&(se===null?X=n.TEXTURE0+$-1:X=se);let J=he[X];J===void 0&&(J={type:void 0,texture:void 0},he[X]=J),(J.type!==N||J.texture!==ue)&&(se!==X&&(n.activeTexture(X),se=X),n.bindTexture(N,ue||U[N]),J.type=N,J.texture=ue)}function B(){let N=he[se];N!==void 0&&N.type!==void 0&&(n.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)}function K(){try{n.compressedTexImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ee(){try{n.compressedTexImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Z(){try{n.texSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function we(){try{n.texSubImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function fe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ye(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function mt(){try{n.texStorage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function re(){try{n.texStorage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ve(){try{n.texImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Le(){try{n.texImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ze(N){Et.equals(N)===!1&&(n.scissor(N.x,N.y,N.z,N.w),Et.copy(N))}function _e(N){Y.equals(N)===!1&&(n.viewport(N.x,N.y,N.z,N.w),Y.copy(N))}function ft(N,ue){let X=l.get(ue);X===void 0&&(X=new WeakMap,l.set(ue,X));let J=X.get(N);J===void 0&&(J=n.getUniformBlockIndex(ue,N.name),X.set(N,J))}function Ke(N,ue){let J=l.get(ue).get(N);c.get(ue)!==J&&(n.uniformBlockBinding(ue,J,N.__bindingPointIndex),c.set(ue,J))}function Rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},se=null,he={},d={},f=new WeakMap,h=[],g=null,y=!1,m=null,p=null,E=null,_=null,x=null,C=null,T=null,D=new Oe(0,0,0),I=0,S=!1,b=null,A=null,j=null,F=null,V=null,Et.set(0,0,n.canvas.width,n.canvas.height),Y.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:z,disable:ce,bindFramebuffer:oe,drawBuffers:Ue,useProgram:et,setBlending:R,setMaterial:pr,setFlipSided:ut,setCullFace:dt,setLineWidth:Me,setPolygonOffset:Pt,setScissorTest:Te,activeTexture:M,bindTexture:v,unbindTexture:B,compressedTexImage2D:K,compressedTexImage3D:ee,texImage2D:ve,texImage3D:Le,updateUBOMapping:ft,uniformBlockBinding:Ke,texStorage2D:mt,texStorage3D:re,texSubImage2D:Z,texSubImage3D:we,compressedTexSubImage2D:fe,compressedTexSubImage3D:ye,scissor:ze,viewport:_e,reset:Rt}}function G6(n,e,t,r,i,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new rt,u=new WeakMap,d,f=new WeakMap,h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(M,v){return h?new OffscreenCanvas(M,v):Ac("canvas")}function y(M,v,B){let K=1,ee=Te(M);if((ee.width>B||ee.height>B)&&(K=B/Math.max(ee.width,ee.height)),K<1)if(typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&M instanceof ImageBitmap||typeof VideoFrame<"u"&&M instanceof VideoFrame){let Z=Math.floor(K*ee.width),we=Math.floor(K*ee.height);d===void 0&&(d=g(Z,we));let fe=v?g(Z,we):d;return fe.width=Z,fe.height=we,fe.getContext("2d").drawImage(M,0,0,Z,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+Z+"x"+we+")."),fe}else return"data"in M&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),M;return M}function m(M){return M.generateMipmaps}function p(M){n.generateMipmap(M)}function E(M){return M.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:M.isWebGL3DRenderTarget?n.TEXTURE_3D:M.isWebGLArrayRenderTarget||M.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function _(M,v,B,K,ee=!1){if(M!==null){if(n[M]!==void 0)return n[M];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+M+"'")}let Z=v;if(v===n.RED&&(B===n.FLOAT&&(Z=n.R32F),B===n.HALF_FLOAT&&(Z=n.R16F),B===n.UNSIGNED_BYTE&&(Z=n.R8)),v===n.RED_INTEGER&&(B===n.UNSIGNED_BYTE&&(Z=n.R8UI),B===n.UNSIGNED_SHORT&&(Z=n.R16UI),B===n.UNSIGNED_INT&&(Z=n.R32UI),B===n.BYTE&&(Z=n.R8I),B===n.SHORT&&(Z=n.R16I),B===n.INT&&(Z=n.R32I)),v===n.RG&&(B===n.FLOAT&&(Z=n.RG32F),B===n.HALF_FLOAT&&(Z=n.RG16F),B===n.UNSIGNED_BYTE&&(Z=n.RG8)),v===n.RG_INTEGER&&(B===n.UNSIGNED_BYTE&&(Z=n.RG8UI),B===n.UNSIGNED_SHORT&&(Z=n.RG16UI),B===n.UNSIGNED_INT&&(Z=n.RG32UI),B===n.BYTE&&(Z=n.RG8I),B===n.SHORT&&(Z=n.RG16I),B===n.INT&&(Z=n.RG32I)),v===n.RGB_INTEGER&&(B===n.UNSIGNED_BYTE&&(Z=n.RGB8UI),B===n.UNSIGNED_SHORT&&(Z=n.RGB16UI),B===n.UNSIGNED_INT&&(Z=n.RGB32UI),B===n.BYTE&&(Z=n.RGB8I),B===n.SHORT&&(Z=n.RGB16I),B===n.INT&&(Z=n.RGB32I)),v===n.RGBA_INTEGER&&(B===n.UNSIGNED_BYTE&&(Z=n.RGBA8UI),B===n.UNSIGNED_SHORT&&(Z=n.RGBA16UI),B===n.UNSIGNED_INT&&(Z=n.RGBA32UI),B===n.BYTE&&(Z=n.RGBA8I),B===n.SHORT&&(Z=n.RGBA16I),B===n.INT&&(Z=n.RGBA32I)),v===n.RGB&&B===n.UNSIGNED_INT_5_9_9_9_REV&&(Z=n.RGB9_E5),v===n.RGBA){let we=ee?Tu:ct.getTransfer(K);B===n.FLOAT&&(Z=n.RGBA32F),B===n.HALF_FLOAT&&(Z=n.RGBA16F),B===n.UNSIGNED_BYTE&&(Z=we===Ct?n.SRGB8_ALPHA8:n.RGBA8),B===n.UNSIGNED_SHORT_4_4_4_4&&(Z=n.RGBA4),B===n.UNSIGNED_SHORT_5_5_5_1&&(Z=n.RGB5_A1)}return(Z===n.R16F||Z===n.R32F||Z===n.RG16F||Z===n.RG32F||Z===n.RGBA16F||Z===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Z}function x(M,v){let B;return M?v===null||v===Gs||v===$o?B=n.DEPTH24_STENCIL8:v===Tr?B=n.DEPTH32F_STENCIL8:v===kc&&(B=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):v===null||v===Gs||v===$o?B=n.DEPTH_COMPONENT24:v===Tr?B=n.DEPTH_COMPONENT32F:v===kc&&(B=n.DEPTH_COMPONENT16),B}function C(M,v){return m(M)===!0||M.isFramebufferTexture&&M.minFilter!==vn&&M.minFilter!==In?Math.log2(Math.max(v.width,v.height))+1:M.mipmaps!==void 0&&M.mipmaps.length>0?M.mipmaps.length:M.isCompressedTexture&&Array.isArray(M.image)?v.mipmaps.length:1}function T(M){let v=M.target;v.removeEventListener("dispose",T),I(v),v.isVideoTexture&&u.delete(v)}function D(M){let v=M.target;v.removeEventListener("dispose",D),b(v)}function I(M){let v=r.get(M);if(v.__webglInit===void 0)return;let B=M.source,K=f.get(B);if(K){let ee=K[v.__cacheKey];ee.usedTimes--,ee.usedTimes===0&&S(M),Object.keys(K).length===0&&f.delete(B)}r.remove(M)}function S(M){let v=r.get(M);n.deleteTexture(v.__webglTexture);let B=M.source,K=f.get(B);delete K[v.__cacheKey],o.memory.textures--}function b(M){let v=r.get(M);if(M.depthTexture&&(M.depthTexture.dispose(),r.remove(M.depthTexture)),M.isWebGLCubeRenderTarget)for(let K=0;K<6;K++){if(Array.isArray(v.__webglFramebuffer[K]))for(let ee=0;ee<v.__webglFramebuffer[K].length;ee++)n.deleteFramebuffer(v.__webglFramebuffer[K][ee]);else n.deleteFramebuffer(v.__webglFramebuffer[K]);v.__webglDepthbuffer&&n.deleteRenderbuffer(v.__webglDepthbuffer[K])}else{if(Array.isArray(v.__webglFramebuffer))for(let K=0;K<v.__webglFramebuffer.length;K++)n.deleteFramebuffer(v.__webglFramebuffer[K]);else n.deleteFramebuffer(v.__webglFramebuffer);if(v.__webglDepthbuffer&&n.deleteRenderbuffer(v.__webglDepthbuffer),v.__webglMultisampledFramebuffer&&n.deleteFramebuffer(v.__webglMultisampledFramebuffer),v.__webglColorRenderbuffer)for(let K=0;K<v.__webglColorRenderbuffer.length;K++)v.__webglColorRenderbuffer[K]&&n.deleteRenderbuffer(v.__webglColorRenderbuffer[K]);v.__webglDepthRenderbuffer&&n.deleteRenderbuffer(v.__webglDepthRenderbuffer)}let B=M.textures;for(let K=0,ee=B.length;K<ee;K++){let Z=r.get(B[K]);Z.__webglTexture&&(n.deleteTexture(Z.__webglTexture),o.memory.textures--),r.remove(B[K])}r.remove(M)}let A=0;function j(){A=0}function F(){let M=A;return M>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+M+" texture units while this GPU supports only "+i.maxTextures),A+=1,M}function V(M){let v=[];return v.push(M.wrapS),v.push(M.wrapT),v.push(M.wrapR||0),v.push(M.magFilter),v.push(M.minFilter),v.push(M.anisotropy),v.push(M.internalFormat),v.push(M.format),v.push(M.type),v.push(M.generateMipmaps),v.push(M.premultiplyAlpha),v.push(M.flipY),v.push(M.unpackAlignment),v.push(M.colorSpace),v.join()}function $(M,v){let B=r.get(M);if(M.isVideoTexture&&Me(M),M.isRenderTargetTexture===!1&&M.version>0&&B.__version!==M.version){let K=M.image;if(K===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(K.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(B,M,v);return}}t.bindTexture(n.TEXTURE_2D,B.__webglTexture,n.TEXTURE0+v)}function q(M,v){let B=r.get(M);if(M.version>0&&B.__version!==M.version){Y(B,M,v);return}t.bindTexture(n.TEXTURE_2D_ARRAY,B.__webglTexture,n.TEXTURE0+v)}function te(M,v){let B=r.get(M);if(M.version>0&&B.__version!==M.version){Y(B,M,v);return}t.bindTexture(n.TEXTURE_3D,B.__webglTexture,n.TEXTURE0+v)}function W(M,v){let B=r.get(M);if(M.version>0&&B.__version!==M.version){ie(B,M,v);return}t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+v)}let se={[Vs]:n.REPEAT,[vi]:n.CLAMP_TO_EDGE,[Tc]:n.MIRRORED_REPEAT},he={[vn]:n.NEAREST,[um]:n.NEAREST_MIPMAP_NEAREST,[Wo]:n.NEAREST_MIPMAP_LINEAR,[In]:n.LINEAR,[Fc]:n.LINEAR_MIPMAP_NEAREST,[Zr]:n.LINEAR_MIPMAP_LINEAR},Se={[xN]:n.NEVER,[TN]:n.ALWAYS,[bN]:n.LESS,[ib]:n.LEQUAL,[wN]:n.EQUAL,[MN]:n.GEQUAL,[SN]:n.GREATER,[EN]:n.NOTEQUAL};function Qe(M,v){if(v.type===Tr&&e.has("OES_texture_float_linear")===!1&&(v.magFilter===In||v.magFilter===Fc||v.magFilter===Wo||v.magFilter===Zr||v.minFilter===In||v.minFilter===Fc||v.minFilter===Wo||v.minFilter===Zr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(M,n.TEXTURE_WRAP_S,se[v.wrapS]),n.texParameteri(M,n.TEXTURE_WRAP_T,se[v.wrapT]),(M===n.TEXTURE_3D||M===n.TEXTURE_2D_ARRAY)&&n.texParameteri(M,n.TEXTURE_WRAP_R,se[v.wrapR]),n.texParameteri(M,n.TEXTURE_MAG_FILTER,he[v.magFilter]),n.texParameteri(M,n.TEXTURE_MIN_FILTER,he[v.minFilter]),v.compareFunction&&(n.texParameteri(M,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(M,n.TEXTURE_COMPARE_FUNC,Se[v.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(v.magFilter===vn||v.minFilter!==Wo&&v.minFilter!==Zr||v.type===Tr&&e.has("OES_texture_float_linear")===!1)return;if(v.anisotropy>1||r.get(v).__currentAnisotropy){let B=e.get("EXT_texture_filter_anisotropic");n.texParameterf(M,B.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(v.anisotropy,i.getMaxAnisotropy())),r.get(v).__currentAnisotropy=v.anisotropy}}}function Et(M,v){let B=!1;M.__webglInit===void 0&&(M.__webglInit=!0,v.addEventListener("dispose",T));let K=v.source,ee=f.get(K);ee===void 0&&(ee={},f.set(K,ee));let Z=V(v);if(Z!==M.__cacheKey){ee[Z]===void 0&&(ee[Z]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,B=!0),ee[Z].usedTimes++;let we=ee[M.__cacheKey];we!==void 0&&(ee[M.__cacheKey].usedTimes--,we.usedTimes===0&&S(v)),M.__cacheKey=Z,M.__webglTexture=ee[Z].texture}return B}function Y(M,v,B){let K=n.TEXTURE_2D;(v.isDataArrayTexture||v.isCompressedArrayTexture)&&(K=n.TEXTURE_2D_ARRAY),v.isData3DTexture&&(K=n.TEXTURE_3D);let ee=Et(M,v),Z=v.source;t.bindTexture(K,M.__webglTexture,n.TEXTURE0+B);let we=r.get(Z);if(Z.version!==we.__version||ee===!0){t.activeTexture(n.TEXTURE0+B);let fe=ct.getPrimaries(ct.workingColorSpace),ye=v.colorSpace===ss?null:ct.getPrimaries(v.colorSpace),mt=v.colorSpace===ss||fe===ye?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,v.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,v.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,mt);let re=y(v.image,!1,i.maxTextureSize);re=Pt(v,re);let ve=s.convert(v.format,v.colorSpace),Le=s.convert(v.type),ze=_(v.internalFormat,ve,Le,v.colorSpace,v.isVideoTexture);Qe(K,v);let _e,ft=v.mipmaps,Ke=v.isVideoTexture!==!0,Rt=we.__version===void 0||ee===!0,N=Z.dataReady,ue=C(v,re);if(v.isDepthTexture)ze=x(v.format===Po,v.type),Rt&&(Ke?t.texStorage2D(n.TEXTURE_2D,1,ze,re.width,re.height):t.texImage2D(n.TEXTURE_2D,0,ze,re.width,re.height,0,ve,Le,null));else if(v.isDataTexture)if(ft.length>0){Ke&&Rt&&t.texStorage2D(n.TEXTURE_2D,ue,ze,ft[0].width,ft[0].height);for(let X=0,J=ft.length;X<J;X++)_e=ft[X],Ke?N&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,_e.width,_e.height,ve,Le,_e.data):t.texImage2D(n.TEXTURE_2D,X,ze,_e.width,_e.height,0,ve,Le,_e.data);v.generateMipmaps=!1}else Ke?(Rt&&t.texStorage2D(n.TEXTURE_2D,ue,ze,re.width,re.height),N&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,re.width,re.height,ve,Le,re.data)):t.texImage2D(n.TEXTURE_2D,0,ze,re.width,re.height,0,ve,Le,re.data);else if(v.isCompressedTexture)if(v.isCompressedArrayTexture){Ke&&Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ue,ze,ft[0].width,ft[0].height,re.depth);for(let X=0,J=ft.length;X<J;X++)if(_e=ft[X],v.format!==fr)if(ve!==null)if(Ke){if(N)if(v.layerUpdates.size>0){let me=fb(_e.width,_e.height,v.format,v.type);for(let pe of v.layerUpdates){let Xe=_e.data.subarray(pe*me/_e.data.BYTES_PER_ELEMENT,(pe+1)*me/_e.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,pe,_e.width,_e.height,1,ve,Xe)}v.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,_e.width,_e.height,re.depth,ve,_e.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,X,ze,_e.width,_e.height,re.depth,0,_e.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ke?N&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,_e.width,_e.height,re.depth,ve,Le,_e.data):t.texImage3D(n.TEXTURE_2D_ARRAY,X,ze,_e.width,_e.height,re.depth,0,ve,Le,_e.data)}else{Ke&&Rt&&t.texStorage2D(n.TEXTURE_2D,ue,ze,ft[0].width,ft[0].height);for(let X=0,J=ft.length;X<J;X++)_e=ft[X],v.format!==fr?ve!==null?Ke?N&&t.compressedTexSubImage2D(n.TEXTURE_2D,X,0,0,_e.width,_e.height,ve,_e.data):t.compressedTexImage2D(n.TEXTURE_2D,X,ze,_e.width,_e.height,0,_e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ke?N&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,_e.width,_e.height,ve,Le,_e.data):t.texImage2D(n.TEXTURE_2D,X,ze,_e.width,_e.height,0,ve,Le,_e.data)}else if(v.isDataArrayTexture)if(Ke){if(Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ue,ze,re.width,re.height,re.depth),N)if(v.layerUpdates.size>0){let X=fb(re.width,re.height,v.format,v.type);for(let J of v.layerUpdates){let me=re.data.subarray(J*X/re.data.BYTES_PER_ELEMENT,(J+1)*X/re.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,J,re.width,re.height,1,ve,Le,me)}v.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,re.width,re.height,re.depth,ve,Le,re.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ze,re.width,re.height,re.depth,0,ve,Le,re.data);else if(v.isData3DTexture)Ke?(Rt&&t.texStorage3D(n.TEXTURE_3D,ue,ze,re.width,re.height,re.depth),N&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,re.width,re.height,re.depth,ve,Le,re.data)):t.texImage3D(n.TEXTURE_3D,0,ze,re.width,re.height,re.depth,0,ve,Le,re.data);else if(v.isFramebufferTexture){if(Rt)if(Ke)t.texStorage2D(n.TEXTURE_2D,ue,ze,re.width,re.height);else{let X=re.width,J=re.height;for(let me=0;me<ue;me++)t.texImage2D(n.TEXTURE_2D,me,ze,X,J,0,ve,Le,null),X>>=1,J>>=1}}else if(ft.length>0){if(Ke&&Rt){let X=Te(ft[0]);t.texStorage2D(n.TEXTURE_2D,ue,ze,X.width,X.height)}for(let X=0,J=ft.length;X<J;X++)_e=ft[X],Ke?N&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,ve,Le,_e):t.texImage2D(n.TEXTURE_2D,X,ze,ve,Le,_e);v.generateMipmaps=!1}else if(Ke){if(Rt){let X=Te(re);t.texStorage2D(n.TEXTURE_2D,ue,ze,X.width,X.height)}N&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ve,Le,re)}else t.texImage2D(n.TEXTURE_2D,0,ze,ve,Le,re);m(v)&&p(K),we.__version=Z.version,v.onUpdate&&v.onUpdate(v)}M.__version=v.version}function ie(M,v,B){if(v.image.length!==6)return;let K=Et(M,v),ee=v.source;t.bindTexture(n.TEXTURE_CUBE_MAP,M.__webglTexture,n.TEXTURE0+B);let Z=r.get(ee);if(ee.version!==Z.__version||K===!0){t.activeTexture(n.TEXTURE0+B);let we=ct.getPrimaries(ct.workingColorSpace),fe=v.colorSpace===ss?null:ct.getPrimaries(v.colorSpace),ye=v.colorSpace===ss||we===fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,v.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,v.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);let mt=v.isCompressedTexture||v.image[0].isCompressedTexture,re=v.image[0]&&v.image[0].isDataTexture,ve=[];for(let J=0;J<6;J++)!mt&&!re?ve[J]=y(v.image[J],!0,i.maxCubemapSize):ve[J]=re?v.image[J].image:v.image[J],ve[J]=Pt(v,ve[J]);let Le=ve[0],ze=s.convert(v.format,v.colorSpace),_e=s.convert(v.type),ft=_(v.internalFormat,ze,_e,v.colorSpace),Ke=v.isVideoTexture!==!0,Rt=Z.__version===void 0||K===!0,N=ee.dataReady,ue=C(v,Le);Qe(n.TEXTURE_CUBE_MAP,v);let X;if(mt){Ke&&Rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ue,ft,Le.width,Le.height);for(let J=0;J<6;J++){X=ve[J].mipmaps;for(let me=0;me<X.length;me++){let pe=X[me];v.format!==fr?ze!==null?Ke?N&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me,0,0,pe.width,pe.height,ze,pe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me,ft,pe.width,pe.height,0,pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ke?N&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me,0,0,pe.width,pe.height,ze,_e,pe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me,ft,pe.width,pe.height,0,ze,_e,pe.data)}}}else{if(X=v.mipmaps,Ke&&Rt){X.length>0&&ue++;let J=Te(ve[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ue,ft,J.width,J.height)}for(let J=0;J<6;J++)if(re){Ke?N&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,ve[J].width,ve[J].height,ze,_e,ve[J].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,ft,ve[J].width,ve[J].height,0,ze,_e,ve[J].data);for(let me=0;me<X.length;me++){let Xe=X[me].image[J].image;Ke?N&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me+1,0,0,Xe.width,Xe.height,ze,_e,Xe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me+1,ft,Xe.width,Xe.height,0,ze,_e,Xe.data)}}else{Ke?N&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,ze,_e,ve[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,ft,ze,_e,ve[J]);for(let me=0;me<X.length;me++){let pe=X[me];Ke?N&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me+1,0,0,ze,_e,pe.image[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,me+1,ft,ze,_e,pe.image[J])}}}m(v)&&p(n.TEXTURE_CUBE_MAP),Z.__version=ee.version,v.onUpdate&&v.onUpdate(v)}M.__version=v.version}function U(M,v,B,K,ee,Z){let we=s.convert(B.format,B.colorSpace),fe=s.convert(B.type),ye=_(B.internalFormat,we,fe,B.colorSpace),mt=r.get(v),re=r.get(B);if(re.__renderTarget=v,!mt.__hasExternalTextures){let ve=Math.max(1,v.width>>Z),Le=Math.max(1,v.height>>Z);ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?t.texImage3D(ee,Z,ye,ve,Le,v.depth,0,we,fe,null):t.texImage2D(ee,Z,ye,ve,Le,0,we,fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,M),dt(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,K,ee,re.__webglTexture,0,ut(v)):(ee===n.TEXTURE_2D||ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,K,ee,re.__webglTexture,Z),t.bindFramebuffer(n.FRAMEBUFFER,null)}function z(M,v,B){if(n.bindRenderbuffer(n.RENDERBUFFER,M),v.depthBuffer){let K=v.depthTexture,ee=K&&K.isDepthTexture?K.type:null,Z=x(v.stencilBuffer,ee),we=v.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=ut(v);dt(v)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fe,Z,v.width,v.height):B?n.renderbufferStorageMultisample(n.RENDERBUFFER,fe,Z,v.width,v.height):n.renderbufferStorage(n.RENDERBUFFER,Z,v.width,v.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,we,n.RENDERBUFFER,M)}else{let K=v.textures;for(let ee=0;ee<K.length;ee++){let Z=K[ee],we=s.convert(Z.format,Z.colorSpace),fe=s.convert(Z.type),ye=_(Z.internalFormat,we,fe,Z.colorSpace),mt=ut(v);B&&dt(v)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,mt,ye,v.width,v.height):dt(v)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,mt,ye,v.width,v.height):n.renderbufferStorage(n.RENDERBUFFER,ye,v.width,v.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ce(M,v){if(v&&v.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,M),!(v.depthTexture&&v.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let K=r.get(v.depthTexture);K.__renderTarget=v,(!K.__webglTexture||v.depthTexture.image.width!==v.width||v.depthTexture.image.height!==v.height)&&(v.depthTexture.image.width=v.width,v.depthTexture.image.height=v.height,v.depthTexture.needsUpdate=!0),$(v.depthTexture,0);let ee=K.__webglTexture,Z=ut(v);if(v.depthTexture.format===Io)dt(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0);else if(v.depthTexture.format===Po)dt(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0);else throw new Error("Unknown depthTexture format")}function oe(M){let v=r.get(M),B=M.isWebGLCubeRenderTarget===!0;if(v.__boundDepthTexture!==M.depthTexture){let K=M.depthTexture;if(v.__depthDisposeCallback&&v.__depthDisposeCallback(),K){let ee=()=>{delete v.__boundDepthTexture,delete v.__depthDisposeCallback,K.removeEventListener("dispose",ee)};K.addEventListener("dispose",ee),v.__depthDisposeCallback=ee}v.__boundDepthTexture=K}if(M.depthTexture&&!v.__autoAllocateDepthBuffer){if(B)throw new Error("target.depthTexture not supported in Cube render targets");ce(v.__webglFramebuffer,M)}else if(B){v.__webglDepthbuffer=[];for(let K=0;K<6;K++)if(t.bindFramebuffer(n.FRAMEBUFFER,v.__webglFramebuffer[K]),v.__webglDepthbuffer[K]===void 0)v.__webglDepthbuffer[K]=n.createRenderbuffer(),z(v.__webglDepthbuffer[K],M,!1);else{let ee=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=v.__webglDepthbuffer[K];n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,Z)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,v.__webglFramebuffer),v.__webglDepthbuffer===void 0)v.__webglDepthbuffer=n.createRenderbuffer(),z(v.__webglDepthbuffer,M,!1);else{let K=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ee=v.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ee),n.framebufferRenderbuffer(n.FRAMEBUFFER,K,n.RENDERBUFFER,ee)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(M,v,B){let K=r.get(M);v!==void 0&&U(K.__webglFramebuffer,M,M.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),B!==void 0&&oe(M)}function et(M){let v=M.texture,B=r.get(M),K=r.get(v);M.addEventListener("dispose",D);let ee=M.textures,Z=M.isWebGLCubeRenderTarget===!0,we=ee.length>1;if(we||(K.__webglTexture===void 0&&(K.__webglTexture=n.createTexture()),K.__version=v.version,o.memory.textures++),Z){B.__webglFramebuffer=[];for(let fe=0;fe<6;fe++)if(v.mipmaps&&v.mipmaps.length>0){B.__webglFramebuffer[fe]=[];for(let ye=0;ye<v.mipmaps.length;ye++)B.__webglFramebuffer[fe][ye]=n.createFramebuffer()}else B.__webglFramebuffer[fe]=n.createFramebuffer()}else{if(v.mipmaps&&v.mipmaps.length>0){B.__webglFramebuffer=[];for(let fe=0;fe<v.mipmaps.length;fe++)B.__webglFramebuffer[fe]=n.createFramebuffer()}else B.__webglFramebuffer=n.createFramebuffer();if(we)for(let fe=0,ye=ee.length;fe<ye;fe++){let mt=r.get(ee[fe]);mt.__webglTexture===void 0&&(mt.__webglTexture=n.createTexture(),o.memory.textures++)}if(M.samples>0&&dt(M)===!1){B.__webglMultisampledFramebuffer=n.createFramebuffer(),B.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,B.__webglMultisampledFramebuffer);for(let fe=0;fe<ee.length;fe++){let ye=ee[fe];B.__webglColorRenderbuffer[fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,B.__webglColorRenderbuffer[fe]);let mt=s.convert(ye.format,ye.colorSpace),re=s.convert(ye.type),ve=_(ye.internalFormat,mt,re,ye.colorSpace,M.isXRRenderTarget===!0),Le=ut(M);n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,ve,M.width,M.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fe,n.RENDERBUFFER,B.__webglColorRenderbuffer[fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),M.depthBuffer&&(B.__webglDepthRenderbuffer=n.createRenderbuffer(),z(B.__webglDepthRenderbuffer,M,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Z){t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture),Qe(n.TEXTURE_CUBE_MAP,v);for(let fe=0;fe<6;fe++)if(v.mipmaps&&v.mipmaps.length>0)for(let ye=0;ye<v.mipmaps.length;ye++)U(B.__webglFramebuffer[fe][ye],M,v,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,ye);else U(B.__webglFramebuffer[fe],M,v,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0);m(v)&&p(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){for(let fe=0,ye=ee.length;fe<ye;fe++){let mt=ee[fe],re=r.get(mt);t.bindTexture(n.TEXTURE_2D,re.__webglTexture),Qe(n.TEXTURE_2D,mt),U(B.__webglFramebuffer,M,mt,n.COLOR_ATTACHMENT0+fe,n.TEXTURE_2D,0),m(mt)&&p(n.TEXTURE_2D)}t.unbindTexture()}else{let fe=n.TEXTURE_2D;if((M.isWebGL3DRenderTarget||M.isWebGLArrayRenderTarget)&&(fe=M.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(fe,K.__webglTexture),Qe(fe,v),v.mipmaps&&v.mipmaps.length>0)for(let ye=0;ye<v.mipmaps.length;ye++)U(B.__webglFramebuffer[ye],M,v,n.COLOR_ATTACHMENT0,fe,ye);else U(B.__webglFramebuffer,M,v,n.COLOR_ATTACHMENT0,fe,0);m(v)&&p(fe),t.unbindTexture()}M.depthBuffer&&oe(M)}function tt(M){let v=M.textures;for(let B=0,K=v.length;B<K;B++){let ee=v[B];if(m(ee)){let Z=E(M),we=r.get(ee).__webglTexture;t.bindTexture(Z,we),p(Z),t.unbindTexture()}}}let Ot=[],R=[];function pr(M){if(M.samples>0){if(dt(M)===!1){let v=M.textures,B=M.width,K=M.height,ee=n.COLOR_BUFFER_BIT,Z=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=r.get(M),fe=v.length>1;if(fe)for(let ye=0;ye<v.length;ye++)t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let ye=0;ye<v.length;ye++){if(M.resolveDepthBuffer&&(M.depthBuffer&&(ee|=n.DEPTH_BUFFER_BIT),M.stencilBuffer&&M.resolveStencilBuffer&&(ee|=n.STENCIL_BUFFER_BIT)),fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,we.__webglColorRenderbuffer[ye]);let mt=r.get(v[ye]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,mt,0)}n.blitFramebuffer(0,0,B,K,0,0,B,K,ee,n.NEAREST),c===!0&&(Ot.length=0,R.length=0,Ot.push(n.COLOR_ATTACHMENT0+ye),M.depthBuffer&&M.resolveDepthBuffer===!1&&(Ot.push(Z),R.push(Z),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,R)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ot))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),fe)for(let ye=0;ye<v.length;ye++){t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.RENDERBUFFER,we.__webglColorRenderbuffer[ye]);let mt=r.get(v[ye]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ye,n.TEXTURE_2D,mt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}else if(M.depthBuffer&&M.resolveDepthBuffer===!1&&c){let v=M.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[v])}}}function ut(M){return Math.min(i.maxSamples,M.samples)}function dt(M){let v=r.get(M);return M.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&v.__useRenderToTexture!==!1}function Me(M){let v=o.render.frame;u.get(M)!==v&&(u.set(M,v),M.update())}function Pt(M,v){let B=M.colorSpace,K=M.format,ee=M.type;return M.isCompressedTexture===!0||M.isVideoTexture===!0||B!==_n&&B!==ss&&(ct.getTransfer(B)===Ct?(K!==fr||ee!==Mi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",B)),v}function Te(M){return typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement?(l.width=M.naturalWidth||M.width,l.height=M.naturalHeight||M.height):typeof VideoFrame<"u"&&M instanceof VideoFrame?(l.width=M.displayWidth,l.height=M.displayHeight):(l.width=M.width,l.height=M.height),l}this.allocateTextureUnit=F,this.resetTextureUnits=j,this.setTexture2D=$,this.setTexture2DArray=q,this.setTexture3D=te,this.setTextureCube=W,this.rebindTextures=Ue,this.setupRenderTarget=et,this.updateRenderTargetMipmap=tt,this.updateMultisampleRenderTarget=pr,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=U,this.useMultisampledRTT=dt}function j6(n,e){function t(r,i=ss){let s,o=ct.getTransfer(i);if(r===Mi)return n.UNSIGNED_BYTE;if(r===fm)return n.UNSIGNED_SHORT_4_4_4_4;if(r===hm)return n.UNSIGNED_SHORT_5_5_5_1;if(r===Yx)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===qx)return n.BYTE;if(r===Xx)return n.SHORT;if(r===kc)return n.UNSIGNED_SHORT;if(r===dm)return n.INT;if(r===Gs)return n.UNSIGNED_INT;if(r===Tr)return n.FLOAT;if(r===Uc)return n.HALF_FLOAT;if(r===Zx)return n.ALPHA;if(r===Kx)return n.RGB;if(r===fr)return n.RGBA;if(r===Jx)return n.LUMINANCE;if(r===Qx)return n.LUMINANCE_ALPHA;if(r===Io)return n.DEPTH_COMPONENT;if(r===Po)return n.DEPTH_STENCIL;if(r===pm)return n.RED;if(r===mm)return n.RED_INTEGER;if(r===eb)return n.RG;if(r===gm)return n.RG_INTEGER;if(r===ym)return n.RGBA_INTEGER;if(r===td||r===nd||r===rd||r===id)if(o===Ct)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===td)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===nd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===rd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===id)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===td)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===nd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===rd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===id)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===vm||r===_m||r===xm||r===bm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===vm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===_m)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===xm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===bm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===wm||r===Sm||r===Em)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===wm||r===Sm)return o===Ct?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Em)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Mm||r===Tm||r===Am||r===Cm||r===Dm||r===Im||r===Rm||r===Nm||r===Pm||r===Om||r===Lm||r===Fm||r===km||r===Um)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Mm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Tm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Am)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Cm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Dm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Im)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Rm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Nm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Pm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Om)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Lm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Fm)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===km)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Um)return o===Ct?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===sd||r===Bm||r===Vm)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===sd)return o===Ct?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Bm)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Vm)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===tb||r===zm||r===Hm||r===Gm)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===sd)return s.COMPRESSED_RED_RGTC1_EXT;if(r===zm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Hm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Gm)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===$o?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}var W6={type:"move"},cd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let y of e.hand.values()){let m=t.getJointPose(y,r),p=this._getHandJoint(l,y);m!==null&&(p.matrix.fromArray(m.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=m.radius),p.visible=m!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,g=.005;l.inputState.pinching&&f>h+g?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=h-g&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(W6)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Yr;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},$6=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,q6=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,Mb=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){let i=new hr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,r=new ur({vertexShader:$6,fragmentShader:q6,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Jt(new Bo(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},Tb=class extends Ki{constructor(e,t){super();let r=this,i=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,f=null,h=null,g=null,y=new Mb,m=t.getContextAttributes(),p=null,E=null,_=[],x=[],C=new rt,T=null,D=new Zt;D.viewport=new _t;let I=new Zt;I.viewport=new _t;let S=[D,I],b=new Qp,A=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ie=_[Y];return ie===void 0&&(ie=new cd,_[Y]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(Y){let ie=_[Y];return ie===void 0&&(ie=new cd,_[Y]=ie),ie.getGripSpace()},this.getHand=function(Y){let ie=_[Y];return ie===void 0&&(ie=new cd,_[Y]=ie),ie.getHandSpace()};function F(Y){let ie=x.indexOf(Y.inputSource);if(ie===-1)return;let U=_[ie];U!==void 0&&(U.update(Y.inputSource,Y.frame,l||o),U.dispatchEvent({type:Y.type,data:Y.inputSource}))}function V(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",$);for(let Y=0;Y<_.length;Y++){let ie=x[Y];ie!==null&&(x[Y]=null,_[Y].disconnect(ie))}A=null,j=null,y.reset(),e.setRenderTarget(p),h=null,f=null,d=null,i=null,E=null,Et.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(Y){l=Y},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=function(Y){return xe(this,null,function*(){if(i=Y,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",V),i.addEventListener("inputsourceschange",$),m.xrCompatible!==!0&&(yield t.makeXRCompatible()),T=e.getPixelRatio(),e.getSize(C),i.renderState.layers===void 0){let ie={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,ie),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),E=new xi(h.framebufferWidth,h.framebufferHeight,{format:fr,type:Mi,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let ie=null,U=null,z=null;m.depth&&(z=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ie=m.stencil?Po:Io,U=m.stencil?$o:Gs);let ce={colorFormat:t.RGBA8,depthFormat:z,scaleFactor:s};d=new XRWebGLBinding(i,t),f=d.createProjectionLayer(ce),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),E=new xi(f.textureWidth,f.textureHeight,{format:fr,type:Mi,depthTexture:new Gu(f.textureWidth,f.textureHeight,U,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield i.requestReferenceSpace(a),Et.setContext(i),Et.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function $(Y){for(let ie=0;ie<Y.removed.length;ie++){let U=Y.removed[ie],z=x.indexOf(U);z>=0&&(x[z]=null,_[z].disconnect(U))}for(let ie=0;ie<Y.added.length;ie++){let U=Y.added[ie],z=x.indexOf(U);if(z===-1){for(let oe=0;oe<_.length;oe++)if(oe>=x.length){x.push(U),z=oe;break}else if(x[oe]===null){x[oe]=U,z=oe;break}if(z===-1)break}let ce=_[z];ce&&ce.connect(U)}}let q=new O,te=new O;function W(Y,ie,U){q.setFromMatrixPosition(ie.matrixWorld),te.setFromMatrixPosition(U.matrixWorld);let z=q.distanceTo(te),ce=ie.projectionMatrix.elements,oe=U.projectionMatrix.elements,Ue=ce[14]/(ce[10]-1),et=ce[14]/(ce[10]+1),tt=(ce[9]+1)/ce[5],Ot=(ce[9]-1)/ce[5],R=(ce[8]-1)/ce[0],pr=(oe[8]+1)/oe[0],ut=Ue*R,dt=Ue*pr,Me=z/(-R+pr),Pt=Me*-R;if(ie.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Pt),Y.translateZ(Me),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),ce[10]===-1)Y.projectionMatrix.copy(ie.projectionMatrix),Y.projectionMatrixInverse.copy(ie.projectionMatrixInverse);else{let Te=Ue+Me,M=et+Me,v=ut-Pt,B=dt+(z-Pt),K=tt*et/M*Te,ee=Ot*et/M*Te;Y.projectionMatrix.makePerspective(v,B,K,ee,Te,M),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function se(Y,ie){ie===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ie.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;let ie=Y.near,U=Y.far;y.texture!==null&&(y.depthNear>0&&(ie=y.depthNear),y.depthFar>0&&(U=y.depthFar)),b.near=I.near=D.near=ie,b.far=I.far=D.far=U,(A!==b.near||j!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,j=b.far),D.layers.mask=Y.layers.mask|2,I.layers.mask=Y.layers.mask|4,b.layers.mask=D.layers.mask|I.layers.mask;let z=Y.parent,ce=b.cameras;se(b,z);for(let oe=0;oe<ce.length;oe++)se(ce[oe],z);ce.length===2?W(b,D,I):b.projectionMatrix.copy(D.projectionMatrix),he(Y,b,z)};function he(Y,ie,U){U===null?Y.matrix.copy(ie.matrixWorld):(Y.matrix.copy(U.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ie.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(ie.projectionMatrix),Y.projectionMatrixInverse.copy(ie.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Fo*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(f===null&&h===null))return c},this.setFoveation=function(Y){c=Y,f!==null&&(f.fixedFoveation=Y),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=Y)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(b)};let Se=null;function Qe(Y,ie){if(u=ie.getViewerPose(l||o),g=ie,u!==null){let U=u.views;h!==null&&(e.setRenderTargetFramebuffer(E,h.framebuffer),e.setRenderTarget(E));let z=!1;U.length!==b.cameras.length&&(b.cameras.length=0,z=!0);for(let oe=0;oe<U.length;oe++){let Ue=U[oe],et=null;if(h!==null)et=h.getViewport(Ue);else{let Ot=d.getViewSubImage(f,Ue);et=Ot.viewport,oe===0&&(e.setRenderTargetTextures(E,Ot.colorTexture,f.ignoreDepthValues?void 0:Ot.depthStencilTexture),e.setRenderTarget(E))}let tt=S[oe];tt===void 0&&(tt=new Zt,tt.layers.enable(oe),tt.viewport=new _t,S[oe]=tt),tt.matrix.fromArray(Ue.transform.matrix),tt.matrix.decompose(tt.position,tt.quaternion,tt.scale),tt.projectionMatrix.fromArray(Ue.projectionMatrix),tt.projectionMatrixInverse.copy(tt.projectionMatrix).invert(),tt.viewport.set(et.x,et.y,et.width,et.height),oe===0&&(b.matrix.copy(tt.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),z===!0&&b.cameras.push(tt)}let ce=i.enabledFeatures;if(ce&&ce.includes("depth-sensing")){let oe=d.getDepthInformation(U[0]);oe&&oe.isValid&&oe.texture&&y.init(e,oe,i.renderState)}}for(let U=0;U<_.length;U++){let z=x[U],ce=_[U];z!==null&&ce!==void 0&&ce.update(z,ie,l||o)}Se&&Se(Y,ie),ie.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ie}),g=null}let Et=new iP;Et.setAnimationLoop(Qe),this.setAnimationLoop=function(Y){Se=Y},this.dispose=function(){}}},Ko=new zs,X6=new $e;function Y6(n,e){function t(m,p){m.matrixAutoUpdate===!0&&m.updateMatrix(),p.value.copy(m.matrix)}function r(m,p){p.color.getRGB(m.fogColor.value,lb(n)),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function i(m,p,E,_,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(m,p):p.isMeshToonMaterial?(s(m,p),d(m,p)):p.isMeshPhongMaterial?(s(m,p),u(m,p)):p.isMeshStandardMaterial?(s(m,p),f(m,p),p.isMeshPhysicalMaterial&&h(m,p,x)):p.isMeshMatcapMaterial?(s(m,p),g(m,p)):p.isMeshDepthMaterial?s(m,p):p.isMeshDistanceMaterial?(s(m,p),y(m,p)):p.isMeshNormalMaterial?s(m,p):p.isLineBasicMaterial?(o(m,p),p.isLineDashedMaterial&&a(m,p)):p.isPointsMaterial?c(m,p,E,_):p.isSpriteMaterial?l(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,t(p.alphaMap,m.alphaMapTransform)),p.bumpMap&&(m.bumpMap.value=p.bumpMap,t(p.bumpMap,m.bumpMapTransform),m.bumpScale.value=p.bumpScale,p.side===Rn&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,t(p.normalMap,m.normalMapTransform),m.normalScale.value.copy(p.normalScale),p.side===Rn&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,t(p.displacementMap,m.displacementMapTransform),m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,m.emissiveMapTransform)),p.specularMap&&(m.specularMap.value=p.specularMap,t(p.specularMap,m.specularMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);let E=e.get(p),_=E.envMap,x=E.envMapRotation;_&&(m.envMap.value=_,Ko.copy(x),Ko.x*=-1,Ko.y*=-1,Ko.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Ko.y*=-1,Ko.z*=-1),m.envMapRotation.value.setFromMatrix4(X6.makeRotationFromEuler(Ko)),m.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=p.reflectivity,m.ior.value=p.ior,m.refractionRatio.value=p.refractionRatio),p.lightMap&&(m.lightMap.value=p.lightMap,m.lightMapIntensity.value=p.lightMapIntensity,t(p.lightMap,m.lightMapTransform)),p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,m.aoMapTransform))}function o(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform))}function a(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function c(m,p,E,_){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*E,m.scale.value=_*.5,p.map&&(m.map.value=p.map,t(p.map,m.uvTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,t(p.alphaMap,m.alphaMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function l(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,t(p.alphaMap,m.alphaMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function u(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4)}function d(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap)}function f(m,p){m.metalness.value=p.metalness,p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,m.metalnessMapTransform)),m.roughness.value=p.roughness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,m.roughnessMapTransform)),p.envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function h(m,p,E){m.ior.value=p.ior,p.sheen>0&&(m.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),m.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(m.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,m.sheenColorMapTransform)),p.sheenRoughnessMap&&(m.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,m.sheenRoughnessMapTransform))),p.clearcoat>0&&(m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,m.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(m.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Rn&&m.clearcoatNormalScale.value.negate())),p.dispersion>0&&(m.dispersion.value=p.dispersion),p.iridescence>0&&(m.iridescence.value=p.iridescence,m.iridescenceIOR.value=p.iridescenceIOR,m.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(m.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,m.iridescenceMapTransform)),p.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),p.transmission>0&&(m.transmission.value=p.transmission,m.transmissionSamplerMap.value=E.texture,m.transmissionSamplerSize.value.set(E.width,E.height),p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,m.transmissionMapTransform)),m.thickness.value=p.thickness,p.thicknessMap&&(m.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=p.attenuationDistance,m.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(m.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(m.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=p.specularIntensity,m.specularColor.value.copy(p.specularColor),p.specularColorMap&&(m.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,m.specularColorMapTransform)),p.specularIntensityMap&&(m.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,p){p.matcap&&(m.matcap.value=p.matcap)}function y(m,p){let E=e.get(p).light;m.referencePosition.value.setFromMatrixPosition(E.matrixWorld),m.nearDistance.value=E.shadow.camera.near,m.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Z6(n,e,t,r){let i={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(E,_){let x=_.program;r.uniformBlockBinding(E,x)}function l(E,_){let x=i[E.id];x===void 0&&(g(E),x=u(E),i[E.id]=x,E.addEventListener("dispose",m));let C=_.program;r.updateUBOMapping(E,C);let T=e.render.frame;s[E.id]!==T&&(f(E),s[E.id]=T)}function u(E){let _=d();E.__bindingPointIndex=_;let x=n.createBuffer(),C=E.__size,T=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,C,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,x),x}function d(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(E){let _=i[E.id],x=E.uniforms,C=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let T=0,D=x.length;T<D;T++){let I=Array.isArray(x[T])?x[T]:[x[T]];for(let S=0,b=I.length;S<b;S++){let A=I[S];if(h(A,T,S,C)===!0){let j=A.__offset,F=Array.isArray(A.value)?A.value:[A.value],V=0;for(let $=0;$<F.length;$++){let q=F[$],te=y(q);typeof q=="number"||typeof q=="boolean"?(A.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,j+V,A.__data)):q.isMatrix3?(A.__data[0]=q.elements[0],A.__data[1]=q.elements[1],A.__data[2]=q.elements[2],A.__data[3]=0,A.__data[4]=q.elements[3],A.__data[5]=q.elements[4],A.__data[6]=q.elements[5],A.__data[7]=0,A.__data[8]=q.elements[6],A.__data[9]=q.elements[7],A.__data[10]=q.elements[8],A.__data[11]=0):(q.toArray(A.__data,V),V+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,A.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(E,_,x,C){let T=E.value,D=_+"_"+x;if(C[D]===void 0)return typeof T=="number"||typeof T=="boolean"?C[D]=T:C[D]=T.clone(),!0;{let I=C[D];if(typeof T=="number"||typeof T=="boolean"){if(I!==T)return C[D]=T,!0}else if(I.equals(T)===!1)return I.copy(T),!0}return!1}function g(E){let _=E.uniforms,x=0,C=16;for(let D=0,I=_.length;D<I;D++){let S=Array.isArray(_[D])?_[D]:[_[D]];for(let b=0,A=S.length;b<A;b++){let j=S[b],F=Array.isArray(j.value)?j.value:[j.value];for(let V=0,$=F.length;V<$;V++){let q=F[V],te=y(q),W=x%C,se=W%te.boundary,he=W+se;x+=se,he!==0&&C-he<te.storage&&(x+=C-he),j.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=x,x+=te.storage}}}let T=x%C;return T>0&&(x+=C-T),E.__size=x,E.__cache={},this}function y(E){let _={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(_.boundary=4,_.storage=4):E.isVector2?(_.boundary=8,_.storage=8):E.isVector3||E.isColor?(_.boundary=16,_.storage=12):E.isVector4?(_.boundary=16,_.storage=16):E.isMatrix3?(_.boundary=48,_.storage=48):E.isMatrix4?(_.boundary=64,_.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),_}function m(E){let _=E.target;_.removeEventListener("dispose",m);let x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete s[_.id]}function p(){for(let E in i)n.deleteBuffer(i[E]);o=[],i={},s={}}return{bind:c,update:l,dispose:p}}var Xm=class{constructor(e={}){let{canvas:t=AN(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let h;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=r.getContextAttributes().alpha}else h=o;let g=new Uint32Array(4),y=new Int32Array(4),m=null,p=null,E=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=rn,this.toneMapping=is,this.toneMappingExposure=1;let x=this,C=!1,T=0,D=0,I=null,S=-1,b=null,A=new _t,j=new _t,F=null,V=new Oe(0),$=0,q=t.width,te=t.height,W=1,se=null,he=null,Se=new _t(0,0,q,te),Qe=new _t(0,0,q,te),Et=!1,Y=new Nc,ie=!1,U=!1,z=new $e,ce=new $e,oe=new O,Ue=new _t,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},tt=!1;function Ot(){return I===null?W:1}let R=r;function pr(w,P){return t.getContext(w,P)}try{let w={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${em}`),t.addEventListener("webglcontextlost",J,!1),t.addEventListener("webglcontextrestored",me,!1),t.addEventListener("webglcontextcreationerror",pe,!1),R===null){let P="webgl2";if(R=pr(P,w),R===null)throw pr(P)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(w){throw console.error("THREE.WebGLRenderer: "+w.message),w}let ut,dt,Me,Pt,Te,M,v,B,K,ee,Z,we,fe,ye,mt,re,ve,Le,ze,_e,ft,Ke,Rt,N;function ue(){ut=new h$(R),ut.init(),Ke=new j6(R,ut),dt=new a$(R,ut,e,Ke),Me=new H6(R,ut),dt.reverseDepthBuffer&&f&&Me.buffers.depth.setReversed(!0),Pt=new g$(R),Te=new D6,M=new G6(R,ut,Me,Te,dt,Ke,Pt),v=new l$(x),B=new f$(x),K=new SW(R),Rt=new s$(R,K),ee=new p$(R,K,Pt,Rt),Z=new v$(R,ee,K,Pt),ze=new y$(R,dt,M),re=new c$(Te),we=new C6(x,v,B,ut,dt,Rt,re),fe=new Y6(x,Te),ye=new R6,mt=new k6(ut),Le=new i$(x,v,B,Me,Z,h,c),ve=new V6(x,Z,dt),N=new Z6(R,Pt,dt,Me),_e=new o$(R,ut,Pt),ft=new m$(R,ut,Pt),Pt.programs=we.programs,x.capabilities=dt,x.extensions=ut,x.properties=Te,x.renderLists=ye,x.shadowMap=ve,x.state=Me,x.info=Pt}ue();let X=new Tb(x,R);this.xr=X,this.getContext=function(){return R},this.getContextAttributes=function(){return R.getContextAttributes()},this.forceContextLoss=function(){let w=ut.get("WEBGL_lose_context");w&&w.loseContext()},this.forceContextRestore=function(){let w=ut.get("WEBGL_lose_context");w&&w.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(w){w!==void 0&&(W=w,this.setSize(q,te,!1))},this.getSize=function(w){return w.set(q,te)},this.setSize=function(w,P,H=!0){if(X.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=w,te=P,t.width=Math.floor(w*W),t.height=Math.floor(P*W),H===!0&&(t.style.width=w+"px",t.style.height=P+"px"),this.setViewport(0,0,w,P)},this.getDrawingBufferSize=function(w){return w.set(q*W,te*W).floor()},this.setDrawingBufferSize=function(w,P,H){q=w,te=P,W=H,t.width=Math.floor(w*H),t.height=Math.floor(P*H),this.setViewport(0,0,w,P)},this.getCurrentViewport=function(w){return w.copy(A)},this.getViewport=function(w){return w.copy(Se)},this.setViewport=function(w,P,H,G){w.isVector4?Se.set(w.x,w.y,w.z,w.w):Se.set(w,P,H,G),Me.viewport(A.copy(Se).multiplyScalar(W).round())},this.getScissor=function(w){return w.copy(Qe)},this.setScissor=function(w,P,H,G){w.isVector4?Qe.set(w.x,w.y,w.z,w.w):Qe.set(w,P,H,G),Me.scissor(j.copy(Qe).multiplyScalar(W).round())},this.getScissorTest=function(){return Et},this.setScissorTest=function(w){Me.setScissorTest(Et=w)},this.setOpaqueSort=function(w){se=w},this.setTransparentSort=function(w){he=w},this.getClearColor=function(w){return w.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(w=!0,P=!0,H=!0){let G=0;if(w){let L=!1;if(I!==null){let ne=I.texture.format;L=ne===ym||ne===gm||ne===mm}if(L){let ne=I.texture.type,de=ne===Mi||ne===Gs||ne===kc||ne===$o||ne===fm||ne===hm,ge=Le.getClearColor(),be=Le.getClearAlpha(),He=ge.r,Ge=ge.g,De=ge.b;de?(g[0]=He,g[1]=Ge,g[2]=De,g[3]=be,R.clearBufferuiv(R.COLOR,0,g)):(y[0]=He,y[1]=Ge,y[2]=De,y[3]=be,R.clearBufferiv(R.COLOR,0,y))}else G|=R.COLOR_BUFFER_BIT}P&&(G|=R.DEPTH_BUFFER_BIT),H&&(G|=R.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),R.clear(G)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",J,!1),t.removeEventListener("webglcontextrestored",me,!1),t.removeEventListener("webglcontextcreationerror",pe,!1),Le.dispose(),ye.dispose(),mt.dispose(),Te.dispose(),v.dispose(),B.dispose(),Z.dispose(),Rt.dispose(),N.dispose(),we.dispose(),X.dispose(),X.removeEventListener("sessionstart",iw),X.removeEventListener("sessionend",sw),Ws.stop()};function J(w){w.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;let w=Pt.autoReset,P=ve.enabled,H=ve.autoUpdate,G=ve.needsUpdate,L=ve.type;ue(),Pt.autoReset=w,ve.enabled=P,ve.autoUpdate=H,ve.needsUpdate=G,ve.type=L}function pe(w){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",w.statusMessage)}function Xe(w){let P=w.target;P.removeEventListener("dispose",Xe),Bt(P)}function Bt(w){bn(w),Te.remove(w)}function bn(w){let P=Te.get(w).programs;P!==void 0&&(P.forEach(function(H){we.releaseProgram(H)}),w.isShaderMaterial&&we.releaseShaderCache(w))}this.renderBufferDirect=function(w,P,H,G,L,ne){P===null&&(P=et);let de=L.isMesh&&L.matrixWorld.determinant()<0,ge=gP(w,P,H,G,L);Me.setMaterial(G,de);let be=H.index,He=1;if(G.wireframe===!0){if(be=ee.getWireframeAttribute(H),be===void 0)return;He=2}let Ge=H.drawRange,De=H.attributes.position,gt=Ge.start*He,bt=(Ge.start+Ge.count)*He;ne!==null&&(gt=Math.max(gt,ne.start*He),bt=Math.min(bt,(ne.start+ne.count)*He)),be!==null?(gt=Math.max(gt,0),bt=Math.min(bt,be.count)):De!=null&&(gt=Math.max(gt,0),bt=Math.min(bt,De.count));let Wt=bt-gt;if(Wt<0||Wt===1/0)return;Rt.setup(L,G,ge,H,be);let Vt,yt=_e;if(be!==null&&(Vt=K.get(be),yt=ft,yt.setIndex(Vt)),L.isMesh)G.wireframe===!0?(Me.setLineWidth(G.wireframeLinewidth*Ot()),yt.setMode(R.LINES)):yt.setMode(R.TRIANGLES);else if(L.isLine){let Ie=G.linewidth;Ie===void 0&&(Ie=1),Me.setLineWidth(Ie*Ot()),L.isLineSegments?yt.setMode(R.LINES):L.isLineLoop?yt.setMode(R.LINE_LOOP):yt.setMode(R.LINE_STRIP)}else L.isPoints?yt.setMode(R.POINTS):L.isSprite&&yt.setMode(R.TRIANGLES);if(L.isBatchedMesh)if(L._multiDrawInstances!==null)yt.renderMultiDrawInstances(L._multiDrawStarts,L._multiDrawCounts,L._multiDrawCount,L._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))yt.renderMultiDraw(L._multiDrawStarts,L._multiDrawCounts,L._multiDrawCount);else{let Ie=L._multiDrawStarts,pn=L._multiDrawCounts,wt=L._multiDrawCount,Dr=be?K.get(be).bytesPerElement:1,ta=Te.get(G).currentProgram.getUniforms();for(let jn=0;jn<wt;jn++)ta.setValue(R,"_gl_DrawID",jn),yt.render(Ie[jn]/Dr,pn[jn])}else if(L.isInstancedMesh)yt.renderInstances(gt,Wt,L.count);else if(H.isInstancedBufferGeometry){let Ie=H._maxInstanceCount!==void 0?H._maxInstanceCount:1/0,pn=Math.min(H.instanceCount,Ie);yt.renderInstances(gt,Wt,pn)}else yt.render(gt,Wt)};function Mt(w,P,H){w.transparent===!0&&w.side===Mr&&w.forceSinglePass===!1?(w.side=Rn,w.needsUpdate=!0,dd(w,P,H),w.side=qr,w.needsUpdate=!0,dd(w,P,H),w.side=Mr):dd(w,P,H)}this.compile=function(w,P,H=null){H===null&&(H=w),p=mt.get(H),p.init(P),_.push(p),H.traverseVisible(function(L){L.isLight&&L.layers.test(P.layers)&&(p.pushLight(L),L.castShadow&&p.pushShadow(L))}),w!==H&&w.traverseVisible(function(L){L.isLight&&L.layers.test(P.layers)&&(p.pushLight(L),L.castShadow&&p.pushShadow(L))}),p.setupLights();let G=new Set;return w.traverse(function(L){if(!(L.isMesh||L.isPoints||L.isLine||L.isSprite))return;let ne=L.material;if(ne)if(Array.isArray(ne))for(let de=0;de<ne.length;de++){let ge=ne[de];Mt(ge,H,L),G.add(ge)}else Mt(ne,H,L),G.add(ne)}),_.pop(),p=null,G},this.compileAsync=function(w,P,H=null){let G=this.compile(w,P,H);return new Promise(L=>{function ne(){if(G.forEach(function(de){Te.get(de).currentProgram.isReady()&&G.delete(de)}),G.size===0){L(w);return}setTimeout(ne,10)}ut.get("KHR_parallel_shader_compile")!==null?ne():setTimeout(ne,10)})};let Cr=null;function Ai(w){Cr&&Cr(w)}function iw(){Ws.stop()}function sw(){Ws.start()}let Ws=new iP;Ws.setAnimationLoop(Ai),typeof self<"u"&&Ws.setContext(self),this.setAnimationLoop=function(w){Cr=w,X.setAnimationLoop(w),w===null?Ws.stop():Ws.start()},X.addEventListener("sessionstart",iw),X.addEventListener("sessionend",sw),this.render=function(w,P){if(P!==void 0&&P.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(w.matrixWorldAutoUpdate===!0&&w.updateMatrixWorld(),P.parent===null&&P.matrixWorldAutoUpdate===!0&&P.updateMatrixWorld(),X.enabled===!0&&X.isPresenting===!0&&(X.cameraAutoUpdate===!0&&X.updateCamera(P),P=X.getCamera()),w.isScene===!0&&w.onBeforeRender(x,w,P,I),p=mt.get(w,_.length),p.init(P),_.push(p),ce.multiplyMatrices(P.projectionMatrix,P.matrixWorldInverse),Y.setFromProjectionMatrix(ce),U=this.localClippingEnabled,ie=re.init(this.clippingPlanes,U),m=ye.get(w,E.length),m.init(),E.push(m),X.enabled===!0&&X.isPresenting===!0){let ne=x.xr.getDepthSensingMesh();ne!==null&&Jm(ne,P,-1/0,x.sortObjects)}Jm(w,P,0,x.sortObjects),m.finish(),x.sortObjects===!0&&m.sort(se,he),tt=X.enabled===!1||X.isPresenting===!1||X.hasDepthSensing()===!1,tt&&Le.addToRenderList(m,w),this.info.render.frame++,ie===!0&&re.beginShadows();let H=p.state.shadowsArray;ve.render(H,w,P),ie===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset();let G=m.opaque,L=m.transmissive;if(p.setupLights(),P.isArrayCamera){let ne=P.cameras;if(L.length>0)for(let de=0,ge=ne.length;de<ge;de++){let be=ne[de];aw(G,L,w,be)}tt&&Le.render(w);for(let de=0,ge=ne.length;de<ge;de++){let be=ne[de];ow(m,w,be,be.viewport)}}else L.length>0&&aw(G,L,w,P),tt&&Le.render(w),ow(m,w,P);I!==null&&(M.updateMultisampleRenderTarget(I),M.updateRenderTargetMipmap(I)),w.isScene===!0&&w.onAfterRender(x,w,P),Rt.resetDefaultState(),S=-1,b=null,_.pop(),_.length>0?(p=_[_.length-1],ie===!0&&re.setGlobalState(x.clippingPlanes,p.state.camera)):p=null,E.pop(),E.length>0?m=E[E.length-1]:m=null};function Jm(w,P,H,G){if(w.visible===!1)return;if(w.layers.test(P.layers)){if(w.isGroup)H=w.renderOrder;else if(w.isLOD)w.autoUpdate===!0&&w.update(P);else if(w.isLight)p.pushLight(w),w.castShadow&&p.pushShadow(w);else if(w.isSprite){if(!w.frustumCulled||Y.intersectsSprite(w)){G&&Ue.setFromMatrixPosition(w.matrixWorld).applyMatrix4(ce);let de=Z.update(w),ge=w.material;ge.visible&&m.push(w,de,ge,H,Ue.z,null)}}else if((w.isMesh||w.isLine||w.isPoints)&&(!w.frustumCulled||Y.intersectsObject(w))){let de=Z.update(w),ge=w.material;if(G&&(w.boundingSphere!==void 0?(w.boundingSphere===null&&w.computeBoundingSphere(),Ue.copy(w.boundingSphere.center)):(de.boundingSphere===null&&de.computeBoundingSphere(),Ue.copy(de.boundingSphere.center)),Ue.applyMatrix4(w.matrixWorld).applyMatrix4(ce)),Array.isArray(ge)){let be=de.groups;for(let He=0,Ge=be.length;He<Ge;He++){let De=be[He],gt=ge[De.materialIndex];gt&&gt.visible&&m.push(w,de,gt,H,Ue.z,De)}}else ge.visible&&m.push(w,de,ge,H,Ue.z,null)}}let ne=w.children;for(let de=0,ge=ne.length;de<ge;de++)Jm(ne[de],P,H,G)}function ow(w,P,H,G){let L=w.opaque,ne=w.transmissive,de=w.transparent;p.setupLightsView(H),ie===!0&&re.setGlobalState(x.clippingPlanes,H),G&&Me.viewport(A.copy(G)),L.length>0&&ud(L,P,H),ne.length>0&&ud(ne,P,H),de.length>0&&ud(de,P,H),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function aw(w,P,H,G){if((H.isScene===!0?H.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[G.id]===void 0&&(p.state.transmissionRenderTarget[G.id]=new xi(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?Uc:Mi,minFilter:Zr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ct.workingColorSpace}));let ne=p.state.transmissionRenderTarget[G.id],de=G.viewport||A;ne.setSize(de.z,de.w);let ge=x.getRenderTarget();x.setRenderTarget(ne),x.getClearColor(V),$=x.getClearAlpha(),$<1&&x.setClearColor(16777215,.5),x.clear(),tt&&Le.render(H);let be=x.toneMapping;x.toneMapping=is;let He=G.viewport;if(G.viewport!==void 0&&(G.viewport=void 0),p.setupLightsView(G),ie===!0&&re.setGlobalState(x.clippingPlanes,G),ud(w,H,G),M.updateMultisampleRenderTarget(ne),M.updateRenderTargetMipmap(ne),ut.has("WEBGL_multisampled_render_to_texture")===!1){let Ge=!1;for(let De=0,gt=P.length;De<gt;De++){let bt=P[De],Wt=bt.object,Vt=bt.geometry,yt=bt.material,Ie=bt.group;if(yt.side===Mr&&Wt.layers.test(G.layers)){let pn=yt.side;yt.side=Rn,yt.needsUpdate=!0,cw(Wt,H,G,Vt,yt,Ie),yt.side=pn,yt.needsUpdate=!0,Ge=!0}}Ge===!0&&(M.updateMultisampleRenderTarget(ne),M.updateRenderTargetMipmap(ne))}x.setRenderTarget(ge),x.setClearColor(V,$),He!==void 0&&(G.viewport=He),x.toneMapping=be}function ud(w,P,H){let G=P.isScene===!0?P.overrideMaterial:null;for(let L=0,ne=w.length;L<ne;L++){let de=w[L],ge=de.object,be=de.geometry,He=G===null?de.material:G,Ge=de.group;ge.layers.test(H.layers)&&cw(ge,P,H,be,He,Ge)}}function cw(w,P,H,G,L,ne){w.onBeforeRender(x,P,H,G,L,ne),w.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,w.matrixWorld),w.normalMatrix.getNormalMatrix(w.modelViewMatrix),L.onBeforeRender(x,P,H,G,w,ne),L.transparent===!0&&L.side===Mr&&L.forceSinglePass===!1?(L.side=Rn,L.needsUpdate=!0,x.renderBufferDirect(H,P,G,L,w,ne),L.side=qr,L.needsUpdate=!0,x.renderBufferDirect(H,P,G,L,w,ne),L.side=Mr):x.renderBufferDirect(H,P,G,L,w,ne),w.onAfterRender(x,P,H,G,L,ne)}function dd(w,P,H){P.isScene!==!0&&(P=et);let G=Te.get(w),L=p.state.lights,ne=p.state.shadowsArray,de=L.state.version,ge=we.getParameters(w,L.state,ne,P,H),be=we.getProgramCacheKey(ge),He=G.programs;G.environment=w.isMeshStandardMaterial?P.environment:null,G.fog=P.fog,G.envMap=(w.isMeshStandardMaterial?B:v).get(w.envMap||G.environment),G.envMapRotation=G.environment!==null&&w.envMap===null?P.environmentRotation:w.envMapRotation,He===void 0&&(w.addEventListener("dispose",Xe),He=new Map,G.programs=He);let Ge=He.get(be);if(Ge!==void 0){if(G.currentProgram===Ge&&G.lightsStateVersion===de)return uw(w,ge),Ge}else ge.uniforms=we.getUniforms(w),w.onBeforeCompile(ge,x),Ge=we.acquireProgram(ge,be),He.set(be,Ge),G.uniforms=ge.uniforms;let De=G.uniforms;return(!w.isShaderMaterial&&!w.isRawShaderMaterial||w.clipping===!0)&&(De.clippingPlanes=re.uniform),uw(w,ge),G.needsLights=vP(w),G.lightsStateVersion=de,G.needsLights&&(De.ambientLightColor.value=L.state.ambient,De.lightProbe.value=L.state.probe,De.directionalLights.value=L.state.directional,De.directionalLightShadows.value=L.state.directionalShadow,De.spotLights.value=L.state.spot,De.spotLightShadows.value=L.state.spotShadow,De.rectAreaLights.value=L.state.rectArea,De.ltc_1.value=L.state.rectAreaLTC1,De.ltc_2.value=L.state.rectAreaLTC2,De.pointLights.value=L.state.point,De.pointLightShadows.value=L.state.pointShadow,De.hemisphereLights.value=L.state.hemi,De.directionalShadowMap.value=L.state.directionalShadowMap,De.directionalShadowMatrix.value=L.state.directionalShadowMatrix,De.spotShadowMap.value=L.state.spotShadowMap,De.spotLightMatrix.value=L.state.spotLightMatrix,De.spotLightMap.value=L.state.spotLightMap,De.pointShadowMap.value=L.state.pointShadowMap,De.pointShadowMatrix.value=L.state.pointShadowMatrix),G.currentProgram=Ge,G.uniformsList=null,Ge}function lw(w){if(w.uniformsList===null){let P=w.currentProgram.getUniforms();w.uniformsList=Hc.seqWithValue(P.seq,w.uniforms)}return w.uniformsList}function uw(w,P){let H=Te.get(w);H.outputColorSpace=P.outputColorSpace,H.batching=P.batching,H.batchingColor=P.batchingColor,H.instancing=P.instancing,H.instancingColor=P.instancingColor,H.instancingMorph=P.instancingMorph,H.skinning=P.skinning,H.morphTargets=P.morphTargets,H.morphNormals=P.morphNormals,H.morphColors=P.morphColors,H.morphTargetsCount=P.morphTargetsCount,H.numClippingPlanes=P.numClippingPlanes,H.numIntersection=P.numClipIntersection,H.vertexAlphas=P.vertexAlphas,H.vertexTangents=P.vertexTangents,H.toneMapping=P.toneMapping}function gP(w,P,H,G,L){P.isScene!==!0&&(P=et),M.resetTextureUnits();let ne=P.fog,de=G.isMeshStandardMaterial?P.environment:null,ge=I===null?x.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:_n,be=(G.isMeshStandardMaterial?B:v).get(G.envMap||de),He=G.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,Ge=!!H.attributes.tangent&&(!!G.normalMap||G.anisotropy>0),De=!!H.morphAttributes.position,gt=!!H.morphAttributes.normal,bt=!!H.morphAttributes.color,Wt=is;G.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Wt=x.toneMapping);let Vt=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,yt=Vt!==void 0?Vt.length:0,Ie=Te.get(G),pn=p.state.lights;if(ie===!0&&(U===!0||w!==b)){let Tn=w===b&&G.id===S;re.setState(G,w,Tn)}let wt=!1;G.version===Ie.__version?(Ie.needsLights&&Ie.lightsStateVersion!==pn.state.version||Ie.outputColorSpace!==ge||L.isBatchedMesh&&Ie.batching===!1||!L.isBatchedMesh&&Ie.batching===!0||L.isBatchedMesh&&Ie.batchingColor===!0&&L.colorTexture===null||L.isBatchedMesh&&Ie.batchingColor===!1&&L.colorTexture!==null||L.isInstancedMesh&&Ie.instancing===!1||!L.isInstancedMesh&&Ie.instancing===!0||L.isSkinnedMesh&&Ie.skinning===!1||!L.isSkinnedMesh&&Ie.skinning===!0||L.isInstancedMesh&&Ie.instancingColor===!0&&L.instanceColor===null||L.isInstancedMesh&&Ie.instancingColor===!1&&L.instanceColor!==null||L.isInstancedMesh&&Ie.instancingMorph===!0&&L.morphTexture===null||L.isInstancedMesh&&Ie.instancingMorph===!1&&L.morphTexture!==null||Ie.envMap!==be||G.fog===!0&&Ie.fog!==ne||Ie.numClippingPlanes!==void 0&&(Ie.numClippingPlanes!==re.numPlanes||Ie.numIntersection!==re.numIntersection)||Ie.vertexAlphas!==He||Ie.vertexTangents!==Ge||Ie.morphTargets!==De||Ie.morphNormals!==gt||Ie.morphColors!==bt||Ie.toneMapping!==Wt||Ie.morphTargetsCount!==yt)&&(wt=!0):(wt=!0,Ie.__version=G.version);let Dr=Ie.currentProgram;wt===!0&&(Dr=dd(G,P,L));let ta=!1,jn=!1,Wc=!1,Lt=Dr.getUniforms(),mr=Ie.uniforms;if(Me.useProgram(Dr.program)&&(ta=!0,jn=!0,Wc=!0),G.id!==S&&(S=G.id,jn=!0),ta||b!==w){Me.buffers.depth.getReversed()?(z.copy(w.projectionMatrix),DN(z),IN(z),Lt.setValue(R,"projectionMatrix",z)):Lt.setValue(R,"projectionMatrix",w.projectionMatrix),Lt.setValue(R,"viewMatrix",w.matrixWorldInverse);let Nn=Lt.map.cameraPosition;Nn!==void 0&&Nn.setValue(R,oe.setFromMatrixPosition(w.matrixWorld)),dt.logarithmicDepthBuffer&&Lt.setValue(R,"logDepthBufFC",2/(Math.log(w.far+1)/Math.LN2)),(G.isMeshPhongMaterial||G.isMeshToonMaterial||G.isMeshLambertMaterial||G.isMeshBasicMaterial||G.isMeshStandardMaterial||G.isShaderMaterial)&&Lt.setValue(R,"isOrthographic",w.isOrthographicCamera===!0),b!==w&&(b=w,jn=!0,Wc=!0)}if(L.isSkinnedMesh){Lt.setOptional(R,L,"bindMatrix"),Lt.setOptional(R,L,"bindMatrixInverse");let Tn=L.skeleton;Tn&&(Tn.boneTexture===null&&Tn.computeBoneTexture(),Lt.setValue(R,"boneTexture",Tn.boneTexture,M))}L.isBatchedMesh&&(Lt.setOptional(R,L,"batchingTexture"),Lt.setValue(R,"batchingTexture",L._matricesTexture,M),Lt.setOptional(R,L,"batchingIdTexture"),Lt.setValue(R,"batchingIdTexture",L._indirectTexture,M),Lt.setOptional(R,L,"batchingColorTexture"),L._colorsTexture!==null&&Lt.setValue(R,"batchingColorTexture",L._colorsTexture,M));let gr=H.morphAttributes;if((gr.position!==void 0||gr.normal!==void 0||gr.color!==void 0)&&ze.update(L,H,Dr),(jn||Ie.receiveShadow!==L.receiveShadow)&&(Ie.receiveShadow=L.receiveShadow,Lt.setValue(R,"receiveShadow",L.receiveShadow)),G.isMeshGouraudMaterial&&G.envMap!==null&&(mr.envMap.value=be,mr.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1),G.isMeshStandardMaterial&&G.envMap===null&&P.environment!==null&&(mr.envMapIntensity.value=P.environmentIntensity),jn&&(Lt.setValue(R,"toneMappingExposure",x.toneMappingExposure),Ie.needsLights&&yP(mr,Wc),ne&&G.fog===!0&&fe.refreshFogUniforms(mr,ne),fe.refreshMaterialUniforms(mr,G,W,te,p.state.transmissionRenderTarget[w.id]),Hc.upload(R,lw(Ie),mr,M)),G.isShaderMaterial&&G.uniformsNeedUpdate===!0&&(Hc.upload(R,lw(Ie),mr,M),G.uniformsNeedUpdate=!1),G.isSpriteMaterial&&Lt.setValue(R,"center",L.center),Lt.setValue(R,"modelViewMatrix",L.modelViewMatrix),Lt.setValue(R,"normalMatrix",L.normalMatrix),Lt.setValue(R,"modelMatrix",L.matrixWorld),G.isShaderMaterial||G.isRawShaderMaterial){let Tn=G.uniformsGroups;for(let Nn=0,Qm=Tn.length;Nn<Qm;Nn++){let $s=Tn[Nn];N.update($s,Dr),N.bind($s,Dr)}}return Dr}function yP(w,P){w.ambientLightColor.needsUpdate=P,w.lightProbe.needsUpdate=P,w.directionalLights.needsUpdate=P,w.directionalLightShadows.needsUpdate=P,w.pointLights.needsUpdate=P,w.pointLightShadows.needsUpdate=P,w.spotLights.needsUpdate=P,w.spotLightShadows.needsUpdate=P,w.rectAreaLights.needsUpdate=P,w.hemisphereLights.needsUpdate=P}function vP(w){return w.isMeshLambertMaterial||w.isMeshToonMaterial||w.isMeshPhongMaterial||w.isMeshStandardMaterial||w.isShadowMaterial||w.isShaderMaterial&&w.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(w,P,H){Te.get(w.texture).__webglTexture=P,Te.get(w.depthTexture).__webglTexture=H;let G=Te.get(w);G.__hasExternalTextures=!0,G.__autoAllocateDepthBuffer=H===void 0,G.__autoAllocateDepthBuffer||ut.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),G.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(w,P){let H=Te.get(w);H.__webglFramebuffer=P,H.__useDefaultFramebuffer=P===void 0},this.setRenderTarget=function(w,P=0,H=0){I=w,T=P,D=H;let G=!0,L=null,ne=!1,de=!1;if(w){let be=Te.get(w);if(be.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(R.FRAMEBUFFER,null),G=!1;else if(be.__webglFramebuffer===void 0)M.setupRenderTarget(w);else if(be.__hasExternalTextures)M.rebindTextures(w,Te.get(w.texture).__webglTexture,Te.get(w.depthTexture).__webglTexture);else if(w.depthBuffer){let De=w.depthTexture;if(be.__boundDepthTexture!==De){if(De!==null&&Te.has(De)&&(w.width!==De.image.width||w.height!==De.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");M.setupDepthRenderbuffer(w)}}let He=w.texture;(He.isData3DTexture||He.isDataArrayTexture||He.isCompressedArrayTexture)&&(de=!0);let Ge=Te.get(w).__webglFramebuffer;w.isWebGLCubeRenderTarget?(Array.isArray(Ge[P])?L=Ge[P][H]:L=Ge[P],ne=!0):w.samples>0&&M.useMultisampledRTT(w)===!1?L=Te.get(w).__webglMultisampledFramebuffer:Array.isArray(Ge)?L=Ge[H]:L=Ge,A.copy(w.viewport),j.copy(w.scissor),F=w.scissorTest}else A.copy(Se).multiplyScalar(W).floor(),j.copy(Qe).multiplyScalar(W).floor(),F=Et;if(Me.bindFramebuffer(R.FRAMEBUFFER,L)&&G&&Me.drawBuffers(w,L),Me.viewport(A),Me.scissor(j),Me.setScissorTest(F),ne){let be=Te.get(w.texture);R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+P,be.__webglTexture,H)}else if(de){let be=Te.get(w.texture),He=P||0;R.framebufferTextureLayer(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,be.__webglTexture,H||0,He)}S=-1},this.readRenderTargetPixels=function(w,P,H,G,L,ne,de){if(!(w&&w.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ge=Te.get(w).__webglFramebuffer;if(w.isWebGLCubeRenderTarget&&de!==void 0&&(ge=ge[de]),ge){Me.bindFramebuffer(R.FRAMEBUFFER,ge);try{let be=w.texture,He=be.format,Ge=be.type;if(!dt.textureFormatReadable(He)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!dt.textureTypeReadable(Ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}P>=0&&P<=w.width-G&&H>=0&&H<=w.height-L&&R.readPixels(P,H,G,L,Ke.convert(He),Ke.convert(Ge),ne)}finally{let be=I!==null?Te.get(I).__webglFramebuffer:null;Me.bindFramebuffer(R.FRAMEBUFFER,be)}}},this.readRenderTargetPixelsAsync=function(w,P,H,G,L,ne,de){return xe(this,null,function*(){if(!(w&&w.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ge=Te.get(w).__webglFramebuffer;if(w.isWebGLCubeRenderTarget&&de!==void 0&&(ge=ge[de]),ge){let be=w.texture,He=be.format,Ge=be.type;if(!dt.textureFormatReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!dt.textureTypeReadable(Ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(P>=0&&P<=w.width-G&&H>=0&&H<=w.height-L){Me.bindFramebuffer(R.FRAMEBUFFER,ge);let De=R.createBuffer();R.bindBuffer(R.PIXEL_PACK_BUFFER,De),R.bufferData(R.PIXEL_PACK_BUFFER,ne.byteLength,R.STREAM_READ),R.readPixels(P,H,G,L,Ke.convert(He),Ke.convert(Ge),0);let gt=I!==null?Te.get(I).__webglFramebuffer:null;Me.bindFramebuffer(R.FRAMEBUFFER,gt);let bt=R.fenceSync(R.SYNC_GPU_COMMANDS_COMPLETE,0);return R.flush(),yield CN(R,bt,4),R.bindBuffer(R.PIXEL_PACK_BUFFER,De),R.getBufferSubData(R.PIXEL_PACK_BUFFER,0,ne),R.deleteBuffer(De),R.deleteSync(bt),ne}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(w,P=null,H=0){w.isTexture!==!0&&(qo("WebGLRenderer: copyFramebufferToTexture function signature has changed."),P=arguments[0]||null,w=arguments[1]);let G=Math.pow(2,-H),L=Math.floor(w.image.width*G),ne=Math.floor(w.image.height*G),de=P!==null?P.x:0,ge=P!==null?P.y:0;M.setTexture2D(w,0),R.copyTexSubImage2D(R.TEXTURE_2D,H,0,0,de,ge,L,ne),Me.unbindTexture()};let _P=R.createFramebuffer(),xP=R.createFramebuffer();this.copyTextureToTexture=function(w,P,H=null,G=null,L=0,ne=null){w.isTexture!==!0&&(qo("WebGLRenderer: copyTextureToTexture function signature has changed."),G=arguments[0]||null,w=arguments[1],P=arguments[2],ne=arguments[3]||0,H=null),ne===null&&(L!==0?(qo("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ne=L,L=0):ne=0);let de,ge,be,He,Ge,De,gt,bt,Wt,Vt=w.isCompressedTexture?w.mipmaps[ne]:w.image;if(H!==null)de=H.max.x-H.min.x,ge=H.max.y-H.min.y,be=H.isBox3?H.max.z-H.min.z:1,He=H.min.x,Ge=H.min.y,De=H.isBox3?H.min.z:0;else{let gr=Math.pow(2,-L);de=Math.floor(Vt.width*gr),ge=Math.floor(Vt.height*gr),w.isDataArrayTexture?be=Vt.depth:w.isData3DTexture?be=Math.floor(Vt.depth*gr):be=1,He=0,Ge=0,De=0}G!==null?(gt=G.x,bt=G.y,Wt=G.z):(gt=0,bt=0,Wt=0);let yt=Ke.convert(P.format),Ie=Ke.convert(P.type),pn;P.isData3DTexture?(M.setTexture3D(P,0),pn=R.TEXTURE_3D):P.isDataArrayTexture||P.isCompressedArrayTexture?(M.setTexture2DArray(P,0),pn=R.TEXTURE_2D_ARRAY):(M.setTexture2D(P,0),pn=R.TEXTURE_2D),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,P.flipY),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),R.pixelStorei(R.UNPACK_ALIGNMENT,P.unpackAlignment);let wt=R.getParameter(R.UNPACK_ROW_LENGTH),Dr=R.getParameter(R.UNPACK_IMAGE_HEIGHT),ta=R.getParameter(R.UNPACK_SKIP_PIXELS),jn=R.getParameter(R.UNPACK_SKIP_ROWS),Wc=R.getParameter(R.UNPACK_SKIP_IMAGES);R.pixelStorei(R.UNPACK_ROW_LENGTH,Vt.width),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,Vt.height),R.pixelStorei(R.UNPACK_SKIP_PIXELS,He),R.pixelStorei(R.UNPACK_SKIP_ROWS,Ge),R.pixelStorei(R.UNPACK_SKIP_IMAGES,De);let Lt=w.isDataArrayTexture||w.isData3DTexture,mr=P.isDataArrayTexture||P.isData3DTexture;if(w.isDepthTexture){let gr=Te.get(w),Tn=Te.get(P),Nn=Te.get(gr.__renderTarget),Qm=Te.get(Tn.__renderTarget);Me.bindFramebuffer(R.READ_FRAMEBUFFER,Nn.__webglFramebuffer),Me.bindFramebuffer(R.DRAW_FRAMEBUFFER,Qm.__webglFramebuffer);for(let $s=0;$s<be;$s++)Lt&&(R.framebufferTextureLayer(R.READ_FRAMEBUFFER,R.COLOR_ATTACHMENT0,Te.get(w).__webglTexture,L,De+$s),R.framebufferTextureLayer(R.DRAW_FRAMEBUFFER,R.COLOR_ATTACHMENT0,Te.get(P).__webglTexture,ne,Wt+$s)),R.blitFramebuffer(He,Ge,de,ge,gt,bt,de,ge,R.DEPTH_BUFFER_BIT,R.NEAREST);Me.bindFramebuffer(R.READ_FRAMEBUFFER,null),Me.bindFramebuffer(R.DRAW_FRAMEBUFFER,null)}else if(L!==0||w.isRenderTargetTexture||Te.has(w)){let gr=Te.get(w),Tn=Te.get(P);Me.bindFramebuffer(R.READ_FRAMEBUFFER,_P),Me.bindFramebuffer(R.DRAW_FRAMEBUFFER,xP);for(let Nn=0;Nn<be;Nn++)Lt?R.framebufferTextureLayer(R.READ_FRAMEBUFFER,R.COLOR_ATTACHMENT0,gr.__webglTexture,L,De+Nn):R.framebufferTexture2D(R.READ_FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,gr.__webglTexture,L),mr?R.framebufferTextureLayer(R.DRAW_FRAMEBUFFER,R.COLOR_ATTACHMENT0,Tn.__webglTexture,ne,Wt+Nn):R.framebufferTexture2D(R.DRAW_FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,Tn.__webglTexture,ne),L!==0?R.blitFramebuffer(He,Ge,de,ge,gt,bt,de,ge,R.COLOR_BUFFER_BIT,R.NEAREST):mr?R.copyTexSubImage3D(pn,ne,gt,bt,Wt+Nn,He,Ge,de,ge):R.copyTexSubImage2D(pn,ne,gt,bt,He,Ge,de,ge);Me.bindFramebuffer(R.READ_FRAMEBUFFER,null),Me.bindFramebuffer(R.DRAW_FRAMEBUFFER,null)}else mr?w.isDataTexture||w.isData3DTexture?R.texSubImage3D(pn,ne,gt,bt,Wt,de,ge,be,yt,Ie,Vt.data):P.isCompressedArrayTexture?R.compressedTexSubImage3D(pn,ne,gt,bt,Wt,de,ge,be,yt,Vt.data):R.texSubImage3D(pn,ne,gt,bt,Wt,de,ge,be,yt,Ie,Vt):w.isDataTexture?R.texSubImage2D(R.TEXTURE_2D,ne,gt,bt,de,ge,yt,Ie,Vt.data):w.isCompressedTexture?R.compressedTexSubImage2D(R.TEXTURE_2D,ne,gt,bt,Vt.width,Vt.height,yt,Vt.data):R.texSubImage2D(R.TEXTURE_2D,ne,gt,bt,de,ge,yt,Ie,Vt);R.pixelStorei(R.UNPACK_ROW_LENGTH,wt),R.pixelStorei(R.UNPACK_IMAGE_HEIGHT,Dr),R.pixelStorei(R.UNPACK_SKIP_PIXELS,ta),R.pixelStorei(R.UNPACK_SKIP_ROWS,jn),R.pixelStorei(R.UNPACK_SKIP_IMAGES,Wc),ne===0&&P.generateMipmaps&&R.generateMipmap(pn),Me.unbindTexture()},this.copyTextureToTexture3D=function(w,P,H=null,G=null,L=0){return w.isTexture!==!0&&(qo("WebGLRenderer: copyTextureToTexture3D function signature has changed."),H=arguments[0]||null,G=arguments[1]||null,w=arguments[2],P=arguments[3],L=arguments[4]||0),qo('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(w,P,H,G,L)},this.initRenderTarget=function(w){Te.get(w).__webglFramebuffer===void 0&&M.setupRenderTarget(w)},this.initTexture=function(w){w.isCubeTexture?M.setTextureCube(w,0):w.isData3DTexture?M.setTexture3D(w,0):w.isDataArrayTexture||w.isCompressedArrayTexture?M.setTexture2DArray(w,0):M.setTexture2D(w,0),Me.unbindTexture()},this.resetState=function(){T=0,D=0,I=null,Me.reset(),Rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _i}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=ct._getDrawingBufferColorSpace(e),t.unpackColorSpace=ct._getUnpackColorSpace()}};function Cb(n,e){if(e===nb)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Bc||e===od){let t=n.getIndex();if(t===null){let o=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let r=t.count-2,i=[];if(e===Bc)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Zm=class extends Yo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Lb(t)}),this.register(function(t){return new Fb(t)}),this.register(function(t){return new Wb(t)}),this.register(function(t){return new $b(t)}),this.register(function(t){return new qb(t)}),this.register(function(t){return new Ub(t)}),this.register(function(t){return new Bb(t)}),this.register(function(t){return new Vb(t)}),this.register(function(t){return new zb(t)}),this.register(function(t){return new Ob(t)}),this.register(function(t){return new Hb(t)}),this.register(function(t){return new kb(t)}),this.register(function(t){return new jb(t)}),this.register(function(t){return new Gb(t)}),this.register(function(t){return new Nb(t)}),this.register(function(t){return new Xb(t)}),this.register(function(t){return new Yb(t)})}load(e,t,r,i){let s=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let l=ns.extractUrlBase(e);o=ns.resolveURL(l,this.path)}else o=ns.extractUrlBase(e);this.manager.itemStart(e);let a=function(l){i?i(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Lc(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s,o={},a={},c=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===hP){try{o[st.KHR_BINARY_GLTF]=new Zb(e)}catch(d){i&&i(d);return}s=JSON.parse(o[st.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new rw(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){let d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){let d=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(d){case st.KHR_MATERIALS_UNLIT:o[d]=new Pb;break;case st.KHR_DRACO_MESH_COMPRESSION:o[d]=new Kb(s,this.dracoLoader);break;case st.KHR_TEXTURE_TRANSFORM:o[d]=new Jb;break;case st.KHR_MESH_QUANTIZATION:o[d]=new Qb;break;default:f.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){let r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}};function J6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var st={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Nb=class{constructor(e){this.parser=e,this.name=st.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){let s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t=this.parser,r="light:"+e,i=t.cache.get(r);if(i)return i;let s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e],l,u=new Oe(16777215);c.color!==void 0&&u.setRGB(c.color[0],c.color[1],c.color[2],_n);let d=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new Zu(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Yu(u),l.distance=d;break;case"spot":l=new Xu(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,os(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),i=Promise.resolve(l),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return r._getNodeRef(t.cache,a,c)})}},Pb=class{constructor(){this.name=st.KHR_MATERIALS_UNLIT}getMaterialType(){return Xr}extendParams(e,t,r){let i=[];e.color=new Oe(1,1,1),e.opacity=1;let s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],_n),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,rn))}return Promise.all(i)}},Ob=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},Lb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new rt(a,a)}return Promise.all(s)}},Fb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_DISPERSION}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},kb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},Ub=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_SHEEN}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[];t.sheenColor=new Oe(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){let a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],_n)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,rn)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},Bb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},Vb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_VOLUME}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Oe().setRGB(a[0],a[1],a[2],_n),Promise.all(s)}},zb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_IOR}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},Hb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_SPECULAR}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return t.specularColor=new Oe().setRGB(a[0],a[1],a[2],_n),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,rn)),Promise.all(s)}},Gb=class{constructor(e){this.parser=e,this.name=st.EXT_MATERIALS_BUMP}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}},jb=class{constructor(e){this.parser=e,this.name=st.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Gn}extendMaterialParams(e,t){let r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},Wb=class{constructor(e){this.parser=e,this.name=st.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;let s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},$b=class{constructor(e){this.parser=e,this.name=st.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=i.images[o.source],c=r.textureLoader;if(a.uri){let l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return r.loadTextureImage(e,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},qb=class{constructor(e){this.parser=e,this.name=st.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=i.images[o.source],c=r.textureLoader;if(a.uri){let l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return r.loadTextureImage(e,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Xb=class{constructor(e){this.name=st.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){let i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){let c=i.byteOffset||0,l=i.byteLength||0,u=i.count,d=i.byteStride,f=new Uint8Array(a,c,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,f,i.mode,i.filter).then(function(h){return h.buffer}):o.ready.then(function(){let h=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(h),u,d,f,i.mode,i.filter),h})})}else return null}},Yb=class{constructor(e){this.name=st.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;let i=t.meshes[r.mesh];for(let l of i.primitives)if(l.mode!==Ar.TRIANGLES&&l.mode!==Ar.TRIANGLE_STRIP&&l.mode!==Ar.TRIANGLE_FAN&&l.mode!==void 0)return null;let o=r.extensions[this.name].attributes,a=[],c={};for(let l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{let u=l.pop(),d=u.isGroup?u.children:[u],f=l[0].count,h=[];for(let g of d){let y=new $e,m=new O,p=new Er,E=new O(1,1,1),_=new Bu(g.geometry,g.material,f);for(let x=0;x<f;x++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,x),c.ROTATION&&p.fromBufferAttribute(c.ROTATION,x),c.SCALE&&E.fromBufferAttribute(c.SCALE,x),_.setMatrixAt(x,y.compose(m,p,E));for(let x in c)if(x==="_COLOR_0"){let C=c[x];_.instanceColor=new Hs(C.array,C.itemSize,C.normalized)}else x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&g.geometry.setAttribute(x,c[x]);hn.prototype.copy.call(_,g),this.parser.assignFinalMaterial(_),h.push(_)}return u.isGroup?(u.clear(),u.add(...h),u):h[0]}))}},hP="glTF",ld=12,lP={JSON:1313821514,BIN:5130562},Zb=class{constructor(e){this.name=st.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,ld),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==hP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let i=this.header.length-ld,s=new DataView(e,ld),o=0;for(;o<i;){let a=s.getUint32(o,!0);o+=4;let c=s.getUint32(o,!0);if(o+=4,c===lP.JSON){let l=new Uint8Array(e,ld+o,a);this.content=r.decode(l)}else if(c===lP.BIN){let l=ld+o;this.body=e.slice(l,l+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Kb=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=st.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(let u in o){let d=tw[u]||u.toLowerCase();a[d]=o[u]}for(let u in e.attributes){let d=tw[u]||u.toLowerCase();if(o[u]!==void 0){let f=r.accessors[e.attributes[u]],h=jc[f.componentType];l[d]=h.name,c[d]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,f){i.decodeDracoFile(u,function(h){for(let g in h.attributes){let y=h.attributes[g],m=c[g];m!==void 0&&(y.normalized=m)}d(h)},a,l,_n,f)})})}},Jb=class{constructor(){this.name=st.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},Qb=class{constructor(){this.name=st.KHR_MESH_QUANTIZATION}},Km=class extends Qi{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,u=i-t,d=(r-t)/u,f=d*d,h=f*d,g=e*l,y=g-l,m=-2*h+3*f,p=h-f,E=1-m,_=p-f+d;for(let x=0;x!==a;x++){let C=o[y+x+a],T=o[y+x+c]*u,D=o[g+x+a],I=o[g+x]*u;s[x]=E*C+_*T+m*D+p*I}return s}},Q6=new Er,ew=class extends Km{interpolate_(e,t,r,i){let s=super.interpolate_(e,t,r,i);return Q6.fromArray(s).normalize().toArray(s),s}},Ar={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uP={9728:vn,9729:In,9984:um,9985:Fc,9986:Wo,9987:Zr},dP={33071:vi,33648:Tc,10497:Vs},Db={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},js={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eq={CUBICSPLINE:void 0,LINEAR:Lo,STEP:Oo},Ib={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tq(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ji({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qr})),n.DefaultMaterial}function ea(n,e,t){for(let r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function os(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nq(n,e,t){let r=!1,i=!1,s=!1;for(let l=0,u=e.length;l<u;l++){let d=e[l];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);let o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){let d=e[l];if(r){let f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(f)}if(i){let f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(f)}if(s){let f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){let u=l[0],d=l[1],f=l[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function rq(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iq(n){let e,t=n.extensions&&n.extensions[st.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Rb(t.attributes):e=n.indices+":"+Rb(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+Rb(n.targets[r]);return e}function Rb(n){let e="",t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function nw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function sq(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var oq=new $e,rw=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new J6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=-1,s=!1,o=-1;if(typeof navigator<"u"){let a=navigator.userAgent;r=/^((?!chrome|android).)*safari/i.test(a)===!0;let c=a.match(/Version\/(\d+)/);i=r&&c?parseInt(c[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||r&&i<17||s&&o<98?this.textureLoader=new Vo(this.options.manager):this.textureLoader=new Ju(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Lc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){let a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return ea(s,a,i),os(a,i),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){let o=t[i].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){let o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;let i=r.clone(),s=(o,a)=>{let c=this.associations.get(o);c!=null&&this.associations.set(a,c);for(let[l,u]of o.children.entries())s(u,a.children[l])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){let i=e(t[r]);if(i)return i}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let r=[];for(let i=0;i<t.length;i++){let s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){let r=e+":"+t,i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){let r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[st.KHR_BINARY_GLTF].body);let i=this.options;return new Promise(function(s,o){r.load(ns.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){let i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){let t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){let o=Db[i.type],a=jc[i.componentType],c=i.normalized===!0,l=new a(i.count*o);return Promise.resolve(new Kt(l,o,c))}let s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){let a=o[0],c=Db[i.type],l=jc[i.componentType],u=l.BYTES_PER_ELEMENT,d=u*c,f=i.byteOffset||0,h=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0,y,m;if(h&&h!==d){let p=Math.floor(f/h),E="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+p+":"+i.count,_=t.cache.get(E);_||(y=new l(a,p*h,i.count*h/u),_=new Dc(y,h/u),t.cache.add(E,_)),m=new Ic(_,c,f%h/u,g)}else a===null?y=new l(i.count*c):y=new l(a,f,i.count*c),m=new Kt(y,c,g);if(i.sparse!==void 0){let p=Db.SCALAR,E=jc[i.sparse.indices.componentType],_=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0,C=new E(o[1],_,i.sparse.count*p),T=new l(o[2],x,i.sparse.count*c);a!==null&&(m=new Kt(m.array.slice(),m.itemSize,m.normalized)),m.normalized=!1;for(let D=0,I=C.length;D<I;D++){let S=C[D];if(m.setX(S,T[D*c]),c>=2&&m.setY(S,T[D*c+1]),c>=3&&m.setZ(S,T[D*c+2]),c>=4&&m.setW(S,T[D*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}m.normalized=g}return m})}loadTexture(e){let t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s],a=this.textureLoader;if(o.uri){let c=r.manager.getHandler(o.uri);c!==null&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){let i=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);let f=(s.samplers||{})[o.sampler]||{};return u.magFilter=uP[f.magFilter]||In,u.minFilter=uP[f.minFilter]||Zr,u.wrapS=dP[f.wrapS]||Vs,u.wrapT=dP[f.wrapT]||Vs,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==vn&&u.minFilter!==In,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){let r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());let o=i.images[e],a=self.URL||self.webkitURL,c=o.uri||"",l=!1;if(o.bufferView!==void 0)c=r.getDependency("bufferView",o.bufferView).then(function(d){l=!0;let f=new Blob([d],{type:o.mimeType});return c=a.createObjectURL(f),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(c).then(function(d){return new Promise(function(f,h){let g=f;t.isImageBitmapLoader===!0&&(g=function(y){let m=new hr(y);m.needsUpdate=!0,f(m)}),t.load(ns.resolveURL(d,s.path),g,void 0,h)})}).then(function(d){return l===!0&&a.revokeObjectURL(c),os(d,o),d.userData.mimeType=o.mimeType||sq(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){let s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[st.KHR_TEXTURE_TRANSFORM]){let a=r.extensions!==void 0?r.extensions[st.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=s.associations.get(o);o=s.extensions[st.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return i!==void 0&&(o.colorSpace=i),e[t]=o,o})}assignFinalMaterial(e){let t=e.geometry,r=e.material,i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+r.uuid,c=this.cache.get(a);c||(c=new Oc,xn.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(a,c)),r=c}else if(e.isLine){let a="LineBasicMaterial:"+r.uuid,c=this.cache.get(a);c||(c=new Pc,xn.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(a,c)),r=c}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=r.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(r))),r=c}e.material=r}getMaterialType(){return Ji}loadMaterial(e){let t=this,r=this.json,i=this.extensions,s=r.materials[e],o,a={},c=s.extensions||{},l=[];if(c[st.KHR_MATERIALS_UNLIT]){let d=i[st.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(a,s,t))}else{let d=s.pbrMetallicRoughness||{};if(a.color=new Oe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){let f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],_n),a.opacity=f[3]}d.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",d.baseColorTexture,rn)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Mr);let u=s.alphaMode||Ib.OPAQUE;if(u===Ib.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Ib.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Xr&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new rt(1,1),s.normalTexture.scale!==void 0)){let d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Xr&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Xr){let d=s.emissiveFactor;a.emissive=new Oe().setRGB(d[0],d[1],d[2],_n)}return s.emissiveTexture!==void 0&&o!==Xr&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,rn)),Promise.all(l).then(function(){let d=new o(a);return s.name&&(d.name=s.name),os(d,s),t.associations.set(d,{materials:e}),s.extensions&&ea(i,d,s),d})}createUniqueName(e){let t=Ft.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[st.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return fP(c,a,t)})}let o=[];for(let a=0,c=e.length;a<c;a++){let l=e[a],u=iq(l),d=i[u];if(d)o.push(d.promise);else{let f;l.extensions&&l.extensions[st.KHR_DRACO_MESH_COMPRESSION]?f=s(l):f=fP(new lr,l,t),i[u]={primitive:l,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){let t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){let u=o[c].material===void 0?tq(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let h=0,g=u.length;h<g;h++){let y=u[h],m=o[h],p,E=l[h];if(m.mode===Ar.TRIANGLES||m.mode===Ar.TRIANGLE_STRIP||m.mode===Ar.TRIANGLE_FAN||m.mode===void 0)p=s.isSkinnedMesh===!0?new Fu(y,E):new Jt(y,E),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),m.mode===Ar.TRIANGLE_STRIP?p.geometry=Cb(p.geometry,od):m.mode===Ar.TRIANGLE_FAN&&(p.geometry=Cb(p.geometry,Bc));else if(m.mode===Ar.LINES)p=new Vu(y,E);else if(m.mode===Ar.LINE_STRIP)p=new Uo(y,E);else if(m.mode===Ar.LINE_LOOP)p=new zu(y,E);else if(m.mode===Ar.POINTS)p=new Hu(y,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(p.geometry.morphAttributes).length>0&&rq(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),os(p,s),m.extensions&&ea(i,p,m),t.assignFinalMaterial(p),d.push(p)}for(let h=0,g=d.length;h<g;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return s.extensions&&ea(i,d[0],s),d[0];let f=new Yr;s.extensions&&ea(i,f,s),t.associations.set(f,{meshes:e});for(let h=0,g=d.length;h<g;h++)f.add(d[h]);return f})}loadCamera(e){let t,r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Zt(ab.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Ho(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),os(t,r),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){let s=i.pop(),o=i,a=[],c=[];for(let l=0,u=o.length;l<u;l++){let d=o[l];if(d){a.push(d);let f=new $e;s!==null&&f.fromArray(s.array,l*16),c.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Uu(a,c)})}loadAnimation(e){let t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let d=0,f=i.channels.length;d<f;d++){let h=i.channels[d],g=i.samplers[h.sampler],y=h.target,m=y.node,p=i.parameters!==void 0?i.parameters[g.input]:g.input,E=i.parameters!==void 0?i.parameters[g.output]:g.output;y.node!==void 0&&(o.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",p)),c.push(this.getDependency("accessor",E)),l.push(g),u.push(y))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){let f=d[0],h=d[1],g=d[2],y=d[3],m=d[4],p=[];for(let E=0,_=f.length;E<_;E++){let x=f[E],C=h[E],T=g[E],D=y[E],I=m[E];if(x===void 0)continue;x.updateMatrix&&x.updateMatrix();let S=r._createAnimationTracks(x,C,T,D,I);if(S)for(let b=0;b<S.length;b++)p.push(S[b])}return new $u(s,void 0,p)})}createNodeMesh(e){let t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){let o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=i.weights.length;c<l;c++)a.morphTargetInfluences[c]=i.weights[c]}),o})}loadNode(e){let t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));let c=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){let u=l[0],d=l[1],f=l[2];f!==null&&u.traverse(function(h){h.isSkinnedMesh&&h.bind(f,oq)});for(let h=0,g=d.length;h<g;h++)u.add(d[h]);return u})}_loadNodeShallow(e){let t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],c=i._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(l){return i._getNodeRef(i.cameraCache,s.camera,l)})),i._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(s.isBone===!0?u=new Rc:l.length>1?u=new Yr:l.length===1?u=l[0]:u=new hn,u!==l[0])for(let d=0,f=l.length;d<f;d++)u.add(l[d]);if(s.name&&(u.userData.name=s.name,u.name=o),os(u,s),s.extensions&&ea(r,u,s),s.matrix!==void 0){let d=new $e;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let t=this.extensions,r=this.json.scenes[e],i=this,s=new Yr;r.name&&(s.name=i.createUniqueName(r.name)),os(s,r),r.extensions&&ea(t,s,r);let o=r.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(i.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)s.add(c[u]);let l=u=>{let d=new Map;for(let[f,h]of i.associations)(f instanceof xn||f instanceof hr)&&d.set(f,h);return u.traverse(f=>{let h=i.associations.get(f);h!=null&&d.set(f,h)}),d};return i.associations=l(s),s})}_createAnimationTracks(e,t,r,i,s){let o=[],a=e.name?e.name:e.uuid,c=[];js[s.path]===js.weights?e.traverse(function(f){f.morphTargetInfluences&&c.push(f.name?f.name:f.uuid)}):c.push(a);let l;switch(js[s.path]){case js.weights:l=bi;break;case js.rotation:l=wi;break;case js.position:case js.scale:l=Si;break;default:switch(r.itemSize){case 1:l=bi;break;case 2:case 3:default:l=Si;break}break}let u=i.interpolation!==void 0?eq[i.interpolation]:Lo,d=this._getArrayFromAccessor(r);for(let f=0,h=c.length;f<h;f++){let g=new l(c[f]+"."+js[s.path],t.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let r=nw(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){let i=this instanceof wi?ew:Km;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function aq(n,e,t){let r=e.attributes,i=new cr;if(r.POSITION!==void 0){let a=t.json.accessors[r.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(i.set(new O(c[0],c[1],c[2]),new O(l[0],l[1],l[2])),a.normalized){let u=nw(jc[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let s=e.targets;if(s!==void 0){let a=new O,c=new O;for(let l=0,u=s.length;l<u;l++){let d=s[l];if(d.POSITION!==void 0){let f=t.json.accessors[d.POSITION],h=f.min,g=f.max;if(h!==void 0&&g!==void 0){if(c.setX(Math.max(Math.abs(h[0]),Math.abs(g[0]))),c.setY(Math.max(Math.abs(h[1]),Math.abs(g[1]))),c.setZ(Math.max(Math.abs(h[2]),Math.abs(g[2]))),f.normalized){let y=nw(jc[f.componentType]);c.multiplyScalar(y)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;let o=new Hn;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function fP(n,e,t){let r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(let o in r){let a=tw[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){let o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return ct.workingColorSpace!==_n&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ct.workingColorSpace}" not supported.`),os(n,e),aq(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?nq(n,e.targets,t):n})}var pP=(()=>{class n{constructor(t,r){this._platformId=t,this._route=r,this._angle=2.2}ngOnInit(){return xe(this,null,function*(){if(Ui(this._platformId))return;let t=document.getElementById("three-js-object");this._scene=new Lu,this._scene.background=new Oe(2042678);let r=new Ku(16777215,1);this._scene.add(r),new Zm().load("/3d/model/VoxelSceneV2.glb",c=>{let l=c.scene;l.traverse(u=>{if(u instanceof Jt){if(u.material instanceof xn&&(u.material.transparent=!1,u.material.depthWrite=!0,u.material.depthTest=!0),u.name==="Floor"){let f=new Vo().load("/3d/model/imgpsh_fullsize_anim.png");u.material=new Ji({map:f,transparent:!0,opacity:.7}),u.position.z=-10.7,u.position.x=-.4,u.rotation.z=Math.PI}if(u.name==="Screen"){let d=new ur({uniforms:{time:{value:0},resolution:{value:new rt(1024,1024)}},vertexShader:`
                  varying vec2 vUv;
                  void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                  }
                `,fragmentShader:`
                  uniform float time;
                  uniform vec2 resolution;
                  varying vec2 vUv;

                  // Random function for block positioning
                  float random(vec2 st) {
                    return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
                  }

                  void main() {
                    vec2 uv = vUv;
                    uv.y += time * 0.5; // Flow downward

                    // Generate blocky random patterns
                    vec2 blockUV = floor(uv * 10.0); // Divide into blocks
                    float randomValue = random(blockUV); // Generate random value per block

                    // Define brightness of blocks
                    float intensity = step(0.95, randomValue); // Random bright blocks
                    float fade = fract(uv.y); // Smooth fade effect per block

                    // Render falling green blocks
                    gl_FragColor = vec4(0.0, fade * intensity, 0.0, 1.0);
                  }
                `}),f=new Qu,h=()=>{requestAnimationFrame(h),d.uniforms.time.value+=f.getDelta()};h(),u.material=d}}}),this._scene.add(l)});let s=new Bo(500,500),o=new ju({opacity:.5}),a=new Jt(s,o);a.rotation.x=-Math.PI/2,a.position.y=-.03,this._camera=new Zt(40,1,1,500),this._scene.add(this._camera),this._scene.position.y-=3,this._renderer=new Xm({canvas:t,antialias:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setClearColor(237183522,1),this._renderer.setSize(280,280),this.animate()})}animate(){return xe(this,null,function*(){requestAnimationFrame(()=>this.animate()),this._angle+=Math.PI/1e3;let t=20,r=12;this._camera.position.x=t*Math.cos(this._angle),this._camera.position.z=t*Math.sin(this._angle),this._camera.position.y=r,this._camera.lookAt(0,0,0),this._renderer.render(this._scene,this._camera)})}static{this.\u0275fac=function(r){return new(r||n)(vt(Bn),vt(wr))}}static{this.\u0275cmp=ln({type:n,selectors:[["app-three-js-object"]],decls:1,vars:0,consts:[["id","three-js-object",1,"w-[280px]","h-[280px]"]],template:function(r,i){r&1&&Vn(0,"canvas",0)},encapsulation:2})}}return n})();var mP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ln({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"flex","items-center","justify-center","pb-0","pt-0"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","p-8","pt-0","lg:p-0","lg:w-8/12","xl:w-6/12"],[1,"flex","items-center","space-x-4","pb-6"],["src","/head.png","alt","Stanislav Romanov",1,"w-12","h-12"],[1,"text-4xl","font-bold"],[1,"font-semibold"]],template:function(r,i){r&1&&(Vn(0,"app-header")(1,"app-three-js-object",0),Ne(2,"div",1)(3,"div",2)(4,"div",3)(5,"div"),Vn(6,"img",4),Ce(),Ne(7,"div")(8,"h1",5),Fe(9,"Stanislav Romanov"),Ce(),Ne(10,"p",6),Fe(11,"Full-Stack Software Developer"),Ce()()(),Vn(12,"router-outlet"),Ce()(),Vn(13,"app-footer"))},dependencies:[b_,e1,t1,pP],encapsulation:2})}}return n})();pA(mP,QR).catch(n=>console.error(n));
